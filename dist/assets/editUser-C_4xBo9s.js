import{B as F,f as P,r as d,g as T,j as r,d2 as U,d3 as A}from"./index-B8WTsAS6.js";import{Q as C,B as s}from"./react-toastify.esm-BnAFxftJ.js";import{u as E}from"./index.esm-CH-ucXk-.js";/* empty css                      */import{R as I,b as R}from"./ReusableBreadcrumb-D5trGug1.js";import{i as _}from"./chunk-NK4BRF7C-BeCWup4P.js";import{b as h}from"./chunk-DBLREEYE-KYxkDfWC.js";import{s as B}from"./chunk-TDOFO53L-BhVz0FjF.js";import"./clsx-B-dksMZM.js";import"./chunk-N2KXC5ZE-mxrXGXiM.js";import"./chunk-XHQUSKIE-BwnSvnTo.js";import"./index-rH3ZM3xY.js";import"./index-DiNnCp_7.js";import"./_class_private_field_set-DiTYLpP0.js";import"./chunk-BZCSOIUI-ECjOxws-.js";import"./chunk-6NL67ZRH-ST4yRtyp.js";import"./chunk-MNNRULGA-Ck-UmubQ.js";import"./features-animation-BrpZblPW.js";const L=()=>{const u=F(),i=P(),[a,x]=d.useState(null),[n,c]=d.useState(!1),[m,b]=d.useState(null),y=T(),o=new URLSearchParams(u.search).get("userId"),[p,f]=d.useState(""),{register:w,handleSubmit:k,setValue:j,formState:{errors:g}}=E();d.useEffect(()=>{(async()=>{try{if(o){const e=await i(U(o)).unwrap();x(e),e.avatar&&b(e.avatar)}}catch(e){console.error("Error fetching user profile:",e),s.error("Không thể lấy thông tin người dùng")}})()},[o,i]);const N=()=>{const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*()_+",e=Array.from({length:12},()=>t.charAt(Math.floor(Math.random()*t.length))).join("");f(e),j("password",e),s.dismiss(),s.info("Mật khẩu mới đã được tạo!")},v=()=>{navigator.clipboard.writeText(p).then(()=>{s.dismiss(),s.success("Mật khẩu đã được sao chép!")}).catch(()=>{s.dismiss(),s.error("Không thể sao chép mật khẩu!")})},S=async t=>{if(!a||!o||!t.password){s.error("Vui lòng nhập mật khẩu hợp lệ!");return}c(!0);try{const e=new FormData;e.append("password",t.password);const l=i(A({userId:o,formData:e})).unwrap();s.dismiss();const M=(await l).message;s.success(M),setTimeout(()=>{y("/admin/listUser")},3e3)}catch(e){const l=e||"Không thể cập nhật mật khẩu";s.dismiss(),s.error(l)}finally{c(!1)}};return r.jsxs("form",{onSubmit:k(S),children:[r.jsx(C,{}),r.jsx(I,{items:R.editUser}),r.jsx("div",{className:"mb-4 ml-4 col-span-full xl:mb-2",children:r.jsx("h1",{className:"text-xl font-semibold text-gray-900 sm:text-2xl dark:text-white",children:"Cập nhật người dùng"})}),r.jsxs("div",{className:"grid grid-cols-[1fr_2fr] px-4 pt-4 xl:grid-cols-[1fr_2fr] xl:gap-4 dark:bg-gray-900",children:[r.jsxs("div",{className:"col-span-full xl:col-auto",children:[r.jsx("div",{className:"p-4 mb-4 bg-white border border-gray-200 rounded-lg shadow-sm 2xl:col-span-2 dark:border-gray-700 sm:p-6 dark:bg-gray-800",children:r.jsx("div",{className:"items-center sm:flex xl:block 2xl:flex sm:space-x-4 xl:space-x-0 2xl:space-x-4",children:m?r.jsx(_,{src:m,alt:"Avatar preview",className:"w-24 h-24 object-cover mt-2"}):r.jsx("div",{className:"w-24 h-24 bg-gray-300 flex items-center justify-center mt-2 rounded-full",children:r.jsx("span",{className:"text-white",children:"No Avatar"})})})}),r.jsxs("div",{className:"p-4 mb-4 bg-white border border-gray-200 rounded-lg shadow-sm 2xl:col-span-2 dark:border-gray-700 sm:p-6 dark:bg-gray-800",children:[r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-gray-700 font-bold mb-2",htmlFor:"password",children:"Mật khẩu mới"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"text",id:"password",readOnly:!0,value:p,className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring bg-gray-100",...w("password")}),r.jsx("i",{onClick:v,className:"iconify solar--copy-bold w-5 h-5 absolute right-2 top-1/2 transform -translate-y-1/2 bg-blue-500 hover:bg-blue-700 text-white font-bold py-1 px-3 rounded "})]}),g.password&&r.jsx("p",{className:"text-red-500 text-sm mt-1",children:g.password.message})]}),r.jsx(h,{type:"button",className:"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded mb-4",onClick:N,children:"Mật khẩu ngẫu nhiên"})]})]}),r.jsx("div",{className:"col-span-full xl:col-auto",children:r.jsxs("div",{className:"p-4 mb-4 bg-white border border-gray-200 rounded-lg shadow-sm 2xl:col-span-2 dark:border-gray-700 sm:p-6 dark:bg-gray-800",children:[r.jsx("h3",{className:"mb-4 text-xl font-semibold dark:text-white",children:"Thông tin người dùng"}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{htmlFor:"name",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Họ và tên"}),r.jsx("input",{className:"bg-gray-50 border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",type:"text",id:"name",value:(a==null?void 0:a.name)||"trống",readOnly:!0})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{htmlFor:"phone",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Số điện thoại"}),r.jsx("input",{className:"bg-gray-50 border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",type:"text",id:"name",value:(a==null?void 0:a.phone)||"trống",readOnly:!0})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{htmlFor:"birthday",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Ngày sinh"}),r.jsx("input",{className:"bg-gray-50 border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",type:"text",id:"name",value:(a==null?void 0:a.birthday)||"Trống",readOnly:!0})]}),r.jsx(h,{type:"submit",className:`min-w-[200px] bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded flex items-center justify-center ${n?"opacity-50 cursor-not-allowed":""}`,disabled:n,children:n?r.jsxs(r.Fragment,{children:[r.jsx(B,{size:"sm",color:"warning",className:"mr-2"}),r.jsx("span",{className:"whitespace-nowrap",children:"Đang cập nhật..."})]}):"Cập nhật mật khẩu"})]})})]})]})},tr=()=>r.jsx(L,{});export{tr as default};
