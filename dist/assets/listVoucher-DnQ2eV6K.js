import{f as p,h as g,r as d,cv as l,j as e,L as u,cw as y}from"./index-B8WTsAS6.js";import{S as f}from"./sweetalert2.all-CanRnygg.js";import{w as b}from"./sweetalert2-react-content.es-_20BSG7l.js";import{R as j,b as N}from"./ReusableBreadcrumb-D5trGug1.js";import{P as k}from"./paginationcrud-CYiMZm9R.js";import{P as w}from"./ProductSummary-NkOstGUN.js";import{S as v}from"./searchFomProduct-CtepxUMW.js";import{A as S}from"./index-Cc_yPv-2.js";import"./clsx-B-dksMZM.js";import"./chunk-TDOFO53L-BhVz0FjF.js";import"./chunk-N2KXC5ZE-mxrXGXiM.js";const n=b(f),C=s=>new Intl.NumberFormat("vi-VN",{style:"decimal",minimumFractionDigits:0,maximumFractionDigits:0}).format(s)+" vnđ",D=()=>{const s=p(),{vouchers:a,loading:i,error:c}=g(r=>r.voucher),[,m]=d.useState(a);d.useEffect(()=>{s(l())},[s]);const x=async r=>{n.fire({title:"Xóa mã giảm giá?",text:"Bạn có chắc muốn xóa dòng này không!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Có",cancelButtonText:"Hủy"}).then(async o=>{if(o.isConfirmed)try{await s(y(r)).unwrap(),s(l()),m(t=>t.filter(h=>h._id!==r)),n.fire({title:"Đã xóa!",text:"Mã giảm giá  đã  xóa.",icon:"success"})}catch(t){console.error("Error deleting product:",t),n.fire({title:"Lỗi!",text:"Đã xảy ra sự cố ",icon:"error"})}})};return i?e.jsx("p",{children:"Loading..."}):c?e.jsxs("p",{children:["Error: ",c]}):e.jsxs("table",{className:"w-full text-sm text-left text-gray-500 dark:text-gray-400",children:[e.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"checkbox-all",type:"checkbox",className:"w-4 h-4 text-primary-600 bg-gray-100 rounded border-gray-300 focus:ring-primary-500 dark:focus:ring-primary-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),e.jsx("label",{htmlFor:"checkbox-all",className:"sr-only",children:"checkbox"})]})}),e.jsx("th",{scope:"col",className:"p-4",children:"MÃ GIẢM"}),e.jsx("th",{scope:"col",className:"p-4",children:"GIẢM GIÁ"}),e.jsx("th",{scope:"col",className:"p-4",children:"HẠN SỬ DỤNG"}),e.jsx("th",{scope:"col",className:"p-4",children:"DANH MỤC SẴN SÀNG"}),e.jsx("th",{scope:"col",className:"p-4",children:"MÔ TẢ"}),e.jsx("th",{scope:"col",className:"p-4",children:"TRẠNG THÁI"}),e.jsx("th",{scope:"col",className:"p-4",children:"HÀNH ĐỘNG"})]})}),e.jsx("tbody",{children:a.map(r=>e.jsxs("tr",{className:"border-b dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"p-4 w-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"checkbox-table-search-1",type:"checkbox",className:"w-4 h-4 text-primary-600 bg-gray-100 rounded border-gray-300 focus:ring-primary-500 dark:focus:ring-primary-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),e.jsx("label",{htmlFor:"checkbox-table-search-1",className:"sr-only",children:"checkbox"})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"bg-primary-100 text-primary-800 text-xs font-medium px-2 py-0.5 rounded dark:bg-primary-900 dark:text-primary-300",children:r.code})}),e.jsx("td",{className:"px-4 py-3",children:C(r.voucherNum)}),e.jsx("td",{className:"px-4 py-3",children:r.expiryDate}),e.jsx("td",{className:"px-4 py-3",children:r.cateReady.map((o,t)=>e.jsx("div",{children:o.name},t))}),e.jsx("td",{className:"px-4 py-3",children:r.conditionActive}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"inline-flex items-center rounded-md bg-green-50 px-2 py-1 text-xs font-medium text-green-700 ring-1 ring-current",children:r.status==="active"?"Hiển thị":"Đã ẩn"})}),e.jsx("td",{className:"px-4 py-3 font-medium text-gray-900 whitespace-nowrap dark:text-white",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{className:"flex items-center text-red-700 bg-red-200 hover:text-white border border-red-700 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 font-medium rounded-lg text-sm px-3 py-2 text-center dark:border-red-500 dark:text-red-500 dark:hover:text-white dark:hover:bg-red-600 dark:focus:ring-red-900",onClick:()=>x(r._id),children:"Xoá"}),e.jsx(u,{to:`/admin/editVouchers/${r._id}`,className:"py-2 px-3 flex items-center text-sm font-medium text-center text-white bg-lime-600 rounded-lg hover:bg-lime-500 focus:ring-4 focus:outline-none focus:ring-primary-300 dark:bg-primary-600 dark:hover:bg-primary-700 dark:focus:ring-primary-800",children:"Sửa"})]})})]},r._id))})]})},L=()=>{const[s,a]=d.useState(1),i=c=>{a(c)};return e.jsxs("div",{children:[e.jsx(j,{items:N.listVouchers}),e.jsx("div",{className:"mb-4 ml-4 col-span-full xl:mb-2",children:e.jsx("h1",{className:"text-xl font-semibold text-gray-900 sm:text-2xl dark:text-white",children:"Danh sách giảm giá"})}),e.jsx("section",{className:"bg-gray-50 dark:bg-gray-900 p-3 sm:p-5 antialiased",children:e.jsx("div",{className:"mb-4 col-span-full xl:mb-2",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 relative shadow-md sm:rounded-lg overflow-hidden",children:[e.jsx(w,{}),e.jsxs("div",{className:"flex flex-col md:flex-row items-stretch md:items-center md:space-x-3 space-y-3 md:space-y-0 justify-between mx-4 py-4 border-t dark:border-gray-700",children:[e.jsx(v,{}),e.jsx(S,{type:"addVoucher"})]}),e.jsxs("div",{className:"overflow-x-auto",children:[e.jsx(D,{}),e.jsx(k,{currentPage:s,totalPages:5,onPageChange:i})]})]})})})]})};export{L as default};
