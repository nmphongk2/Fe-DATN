import{r as h,j as e,f as ee,h as F,M as ge,P as fe,L as Be,J as De,g as Ie,B as be,W as Ae}from"./index-B8WTsAS6.js";import{q as K,R as Le,b as $e}from"./base-BeIOSPgb.js";import{W as ye,C as ve,F as je,a as Ce,I as Pe,b as ze}from"./PlusIcon-CtLI7RNP.js";import{g as M,e as G,f as _,h as Te,r as te,i as we,j as V,k as D,l as E,m as U,n as ne,o as Ne,p as Me,a as Q,q as Se,t as ae,v as ie,w as Ge,x as Ee,y as qe,u as se,B as A,T as le,I as ce,b as de,c as Ve,d as ue,C as q,P as Ue}from"./productSkeleton-OA5_JX-h.js";import{c as L}from"./clsx-B-dksMZM.js";import{P as Oe}from"./paginationcrud-CYiMZm9R.js";import{H as He}from"./HeartIcon-I8pz1Dx_.js";import{t as We,S as Ze}from"./truncateText-DCYr2heY.js";import{l as Xe,q as Je,m as Ke,p as Qe}from"./XMarkIcon-CR00bvNx.js";import"./useHover-BojuH7IM.js";import"./transition-iMQxfHpN.js";import"./assertThisInitialized-CUbX1Gq7.js";import"./hoist-non-react-statics.cjs-C4SqqP4T.js";import"./useFocus-CiKVCmpT.js";import"./useFocusWithin-Cnv4cfRz.js";import"./useEffectEvent-Cg1JSw20.js";function Ye(t){return M("PrivateSwitchBase",t)}G("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const et=t=>{const{classes:s,checked:o,disabled:i,edge:l}=t,c={root:["root",o&&"checked",i&&"disabled",l&&`edge${D(l)}`],input:["input"]};return E(c,Ye,s)},tt=_(Te)({padding:9,borderRadius:"50%",variants:[{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:({edge:t,ownerState:s})=>t==="start"&&s.size!=="small",style:{marginLeft:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}},{props:({edge:t,ownerState:s})=>t==="end"&&s.size!=="small",style:{marginRight:-12}}]}),nt=_("input",{shouldForwardProp:te})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),st=h.forwardRef(function(s,o){const{autoFocus:i,checked:l,checkedIcon:c,className:a,defaultChecked:u,disabled:d,disableFocusRipple:p=!1,edge:n=!1,icon:r,id:g,inputProps:f,inputRef:C,name:P,onBlur:y,onChange:w,onFocus:b,readOnly:v,required:m=!1,tabIndex:x,type:j,value:$,...O}=s,[B,z]=we({controlled:l,default:!!u,name:"SwitchBase",state:"checked"}),N=V(),H=k=>{b&&b(k),N&&N.onFocus&&N.onFocus(k)},I=k=>{y&&y(k),N&&N.onBlur&&N.onBlur(k)},R=k=>{if(k.nativeEvent.defaultPrevented)return;const re=k.target.checked;z(re),w&&w(k,re)};let S=d;N&&typeof S>"u"&&(S=N.disabled);const Re=j==="checkbox"||j==="radio",W={...s,checked:B,disabled:S,disableFocusRipple:p,edge:n},oe=et(W);return e.jsxs(tt,{component:"span",className:L(oe.root,a),centerRipple:!0,focusRipple:!p,disabled:S,tabIndex:null,role:void 0,onFocus:H,onBlur:I,ownerState:W,ref:o,...O,children:[e.jsx(nt,{autoFocus:i,checked:l,defaultChecked:u,className:oe.input,disabled:S,id:Re?g:void 0,name:P,onChange:R,readOnly:v,ref:C,required:m,ownerState:W,tabIndex:x,type:j,...j==="checkbox"&&$===void 0?{}:{value:$},...f}),B?c:r]})});function ot(t){return M("MuiFormControlLabel",t)}const T=G("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),rt=t=>{const{classes:s,disabled:o,labelPlacement:i,error:l,required:c}=t,a={root:["root",o&&"disabled",`labelPlacement${D(i)}`,l&&"error",c&&"required"],label:["label",o&&"disabled"],asterisk:["asterisk",l&&"error"]};return E(a,ot,s)},at=_("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:o}=t;return[{[`& .${T.label}`]:s.label},s.root,s[`labelPlacement${D(o.labelPlacement)}`]]}})(U(({theme:t})=>({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${T.disabled}`]:{cursor:"default"},[`& .${T.label}`]:{[`&.${T.disabled}`]:{color:(t.vars||t).palette.text.disabled}},variants:[{props:{labelPlacement:"start"},style:{flexDirection:"row-reverse",marginRight:-11}},{props:{labelPlacement:"top"},style:{flexDirection:"column-reverse"}},{props:{labelPlacement:"bottom"},style:{flexDirection:"column"}},{props:({labelPlacement:s})=>s==="start"||s==="top"||s==="bottom",style:{marginLeft:16}}]}))),it=_("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(t,s)=>s.asterisk})(U(({theme:t})=>({[`&.${T.error}`]:{color:(t.vars||t).palette.error.main}}))),Z=h.forwardRef(function(s,o){const i=ne({props:s,name:"MuiFormControlLabel"}),{checked:l,className:c,componentsProps:a={},control:u,disabled:d,disableTypography:p,inputRef:n,label:r,labelPlacement:g="end",name:f,onChange:C,required:P,slots:y={},slotProps:w={},value:b,...v}=i,m=V(),x=d??u.props.disabled??(m==null?void 0:m.disabled),j=P??u.props.required,$={disabled:x,required:j};["checked","name","onChange","value","inputRef"].forEach(S=>{typeof u.props[S]>"u"&&typeof i[S]<"u"&&($[S]=i[S])});const O=Ne({props:i,muiFormControl:m,states:["error"]}),B={...i,disabled:x,labelPlacement:g,required:j,error:O.error},z=rt(B),N={slots:y,slotProps:{...a,...w}},[H,I]=Me("typography",{elementType:Q,externalForwardedProps:N,ownerState:B});let R=r;return R!=null&&R.type!==Q&&!p&&(R=e.jsx(H,{component:"span",...I,className:L(z.label,I==null?void 0:I.className),children:R})),e.jsxs(at,{className:L(z.root,c),ownerState:B,ref:o,...v,children:[h.cloneElement(u,$),j?e.jsxs("div",{children:[R,e.jsxs(it,{ownerState:B,"aria-hidden":!0,className:z.asterisk,children:[" ","*"]})]}):R]})});function lt(t){return M("MuiFormGroup",t)}G("MuiFormGroup",["root","row","error"]);const ct=t=>{const{classes:s,row:o,error:i}=t;return E({root:["root",o&&"row",i&&"error"]},lt,s)},dt=_("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:o}=t;return[s.root,o.row&&s.row]}})({display:"flex",flexDirection:"column",flexWrap:"wrap",variants:[{props:{row:!0},style:{flexDirection:"row"}}]}),ut=h.forwardRef(function(s,o){const i=ne({props:s,name:"MuiFormGroup"}),{className:l,row:c=!1,...a}=i,u=V(),d=Ne({props:i,muiFormControl:u,states:["error"]}),p={...i,row:c,error:d.error},n=ct(p);return e.jsx(dt,{className:L(n.root,l),ownerState:p,ref:o,...a})}),mt=Se(e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"RadioButtonUnchecked"),pt=Se(e.jsx("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"}),"RadioButtonChecked"),ht=_("span",{shouldForwardProp:te})({position:"relative",display:"flex"}),xt=_(mt)({transform:"scale(1)"}),gt=_(pt)(U(({theme:t})=>({left:0,position:"absolute",transform:"scale(0)",transition:t.transitions.create("transform",{easing:t.transitions.easing.easeIn,duration:t.transitions.duration.shortest}),variants:[{props:{checked:!0},style:{transform:"scale(1)",transition:t.transitions.create("transform",{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.shortest})}}]})));function ke(t){const{checked:s=!1,classes:o={},fontSize:i}=t,l={...t,checked:s};return e.jsxs(ht,{className:o.root,ownerState:l,children:[e.jsx(xt,{fontSize:i,className:o.background,ownerState:l}),e.jsx(gt,{fontSize:i,className:o.dot,ownerState:l})]})}const Fe=h.createContext(void 0);function ft(){return h.useContext(Fe)}function bt(t){return M("MuiRadio",t)}const me=G("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary","sizeSmall"]),yt=t=>{const{classes:s,color:o,size:i}=t,l={root:["root",`color${D(o)}`,i!=="medium"&&`size${D(i)}`]};return{...s,...E(l,bt,s)}},vt=_(st,{shouldForwardProp:t=>te(t)||t==="classes",name:"MuiRadio",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:o}=t;return[s.root,o.size!=="medium"&&s[`size${D(o.size)}`],s[`color${D(o.color)}`]]}})(U(({theme:t})=>({color:(t.vars||t).palette.text.secondary,[`&.${me.disabled}`]:{color:(t.vars||t).palette.action.disabled},variants:[{props:{color:"default",disabled:!1,disableRipple:!1},style:{"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:ae(t.palette.action.active,t.palette.action.hoverOpacity)}}},...Object.entries(t.palette).filter(ie()).map(([s])=>({props:{color:s,disabled:!1,disableRipple:!1},style:{"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette[s].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:ae(t.palette[s].main,t.palette.action.hoverOpacity)}}})),...Object.entries(t.palette).filter(ie()).map(([s])=>({props:{color:s,disabled:!1},style:{[`&.${me.checked}`]:{color:(t.vars||t).palette[s].main}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]})));function jt(t,s){return typeof s=="object"&&s!==null?t===s:String(t)===String(s)}const pe=e.jsx(ke,{checked:!0}),he=e.jsx(ke,{}),X=h.forwardRef(function(s,o){const i=ne({props:s,name:"MuiRadio"}),{checked:l,checkedIcon:c=pe,color:a="primary",icon:u=he,name:d,onChange:p,size:n="medium",className:r,disabled:g,disableRipple:f=!1,...C}=i,P=V();let y=g;P&&typeof y>"u"&&(y=P.disabled),y??(y=!1);const w={...i,disabled:y,disableRipple:f,color:a,size:n},b=yt(w),v=ft();let m=l;const x=Ge(p,v&&v.onChange);let j=d;return v&&(typeof m>"u"&&(m=jt(v.value,i.value)),typeof j>"u"&&(j=v.name)),e.jsx(vt,{type:"radio",icon:h.cloneElement(u,{fontSize:he.props.fontSize??n}),checkedIcon:h.cloneElement(c,{fontSize:pe.props.fontSize??n}),disabled:y,ownerState:w,classes:b,name:j,checked:m,onChange:x,ref:o,className:L(b.root,r),...C})});function Ct(t){return M("MuiRadioGroup",t)}G("MuiRadioGroup",["root","row","error"]);const Pt=t=>{const{classes:s,row:o,error:i}=t;return E({root:["root",o&&"row",i&&"error"]},Ct,s)},wt=h.forwardRef(function(s,o){const{actions:i,children:l,className:c,defaultValue:a,name:u,onChange:d,value:p,...n}=s,r=h.useRef(null),g=Pt(s),[f,C]=we({controlled:p,default:a,name:"RadioGroup"});h.useImperativeHandle(i,()=>({focus:()=>{let b=r.current.querySelector("input:not(:disabled):checked");b||(b=r.current.querySelector("input:not(:disabled)")),b&&b.focus()}}),[]);const P=Ee(o,r),y=qe(u),w=h.useMemo(()=>({name:y,onChange(b){C(b.target.value),d&&d(b,b.target.value)},value:f}),[y,d,C,f]);return e.jsx(Fe.Provider,{value:w,children:e.jsx(ut,{role:"radiogroup",ref:P,className:L(g.root,c),...n,children:l})})}),_e=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",className:"size-4",children:e.jsx("path",{fillRule:"evenodd",d:"M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14Zm2.78-4.22a.75.75 0 0 1-1.06 0L8 9.06l-1.72 1.72a.75.75 0 1 1-1.06-1.06L6.94 8 5.22 6.28a.75.75 0 0 1 1.06-1.06L8 6.94l1.72-1.72a.75.75 0 1 1 1.06 1.06L9.06 8l1.72 1.72a.75.75 0 0 1 0 1.06Z",clipRule:"evenodd"})}),Nt=({onchange:t,filters:s})=>{const o=ee(),i=F(n=>n.productClient.getAllBrandPageAuction.brands||[]),[l,c]=h.useState([]);h.useEffect(()=>{o(ge())},[o]),h.useEffect(()=>{s.brand?c(s.brand):c([])},[s.brand]);const a=n=>{const g=l.some(f=>f._id===n._id)?l.filter(f=>f._id!==n._id):[...l,n];c(g),t&&t(g)},u=()=>{c([]),t&&t([])},d=[{value:"select-all",label:"Bỏ chọn tất cả",checked:!1},...i.map(n=>({value:n._id,label:n.name,checked:l.some(r=>r._id===n._id),brand:n}))],p=l.length>0;return e.jsxs(ye,{as:"div",className:"border-t border-gray-200 py-6",children:[e.jsx("h3",{className:"-my-3 flow-root",children:e.jsxs(ve,{className:"group flex w-full items-center justify-between bg-white px-2 py-3 text-sm text-gray-400 hover:text-gray-500",children:[e.jsx("span",{className:"font-medium text-gray-900",children:"Thương hiệu"}),e.jsxs("span",{className:"ml-6 flex items-center",children:[e.jsx(je,{"aria-hidden":"true",className:"h-5 w-5 group-data-[open]:hidden"}),e.jsx(Ce,{"aria-hidden":"true",className:"h-5 w-5 [.group:not([data-open])_&]:hidden"})]})]})}),e.jsx(Pe,{className:"pt-6",children:e.jsx("div",{className:"space-y-4",children:d.map((n,r)=>e.jsx("div",{className:"flex items-center px-2",children:n.value==="select-all"?e.jsxs("button",{type:"button",className:`flex items-center px-2 ${p?"text-gray-600":"opacity-50 cursor-not-allowed"}`,onClick:u,disabled:!p,children:[e.jsx(_e,{}),e.jsx("span",{className:"ml-2 text-sm",children:"Bỏ chọn"})]}):e.jsxs("div",{className:"flex items-center px-2",children:[e.jsx("input",{checked:n.checked,id:`filter-brand-${r}`,name:"brand",type:"checkbox",className:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500",onChange:()=>n.brand&&a(n.brand)}),e.jsx("label",{htmlFor:`filter-brand-${r}`,className:"ml-3 text-sm text-gray-600",children:n.label})]})},n.value))})})]})},St=({onchange:t})=>{const s=se(),[o,i]=h.useState({minPrice:0,maxPrice:0}),[l,c]=h.useState(null),a=r=>new Intl.NumberFormat("vi-VN").format(r),u=r=>parseFloat(r.replace(/[^\d]/g,""))||0,d=r=>{const{name:g,value:f}=r.target;i(C=>({...C,[g]:u(f)}))},p=()=>{if(!o.minPrice||!o.maxPrice){c("Vui lòng điền khoảng giá phù hợp");return}o.minPrice>o.maxPrice?c("Giá trị đầu phải nhỏ hơn hoặc bằng giá trị sau"):(c(null),t&&t(o.minPrice,o.maxPrice))},n=()=>{i({minPrice:0,maxPrice:0}),c(null),t&&t(null,null)};return e.jsxs(A,{sx:{padding:s.spacing(1)},children:[e.jsx("span",{className:"font-bold text-gray-900 text-sm",children:"Lọc theo khoảng giá"}),e.jsxs(A,{sx:{display:"flex",flexFlow:"row nowrap",alignItems:"center",marginTop:s.spacing(1),marginBottom:s.spacing(1)},children:[e.jsx(le,{name:"minPrice",label:"Giá tối thiểu",onChange:d,value:a(o.minPrice),fullWidth:!0,variant:"filled",color:"primary",focused:!0,InputProps:{endAdornment:e.jsx(ce,{position:"end",children:"₫"})}}),e.jsx("span",{style:{margin:"0 8px"},children:"-"}),e.jsx(le,{name:"maxPrice",label:"Giá tối đa",onChange:d,value:a(o.maxPrice),fullWidth:!0,variant:"filled",color:"primary",focused:!0,InputProps:{endAdornment:e.jsx(ce,{position:"end",children:"₫"})}})]}),l&&e.jsx(Q,{color:"error",variant:"caption",children:l}),e.jsxs(A,{sx:{display:"flex",gap:s.spacing(1),marginTop:s.spacing(2)},children:[e.jsx(de,{variant:"contained",color:"primary",onClick:p,size:"small",sx:{fontFamily:"'Barlow', sans-serif"},children:"Áp dụng"}),e.jsx(de,{variant:"contained",color:"success",onClick:n,size:"small",sx:{fontFamily:"'Barlow', sans-serif"},children:"Xóa bộ lọc"})]})]})},kt=({onchange:t,filters:s})=>{const o=ee(),i=F(n=>n.productClient.getAllConditionShoppingPageAuction.conditionShopping||[]),[l,c]=h.useState([]);h.useEffect(()=>{o(fe())},[o]),h.useEffect(()=>{s.conditionShopping?c(s.conditionShopping):c([])},[s.conditionShopping]);const a=n=>{const g=l.some(f=>f._id===n._id)?l.filter(f=>f._id!==n._id):[...l,n];c(g),t&&t(g)},u=()=>{c([]),t&&t([])},d=[{value:"select-all",label:"Bỏ chọn tất cả",checked:!1},...i.map(n=>({value:n._id,label:n.nameCondition,checked:l.some(r=>r._id===n._id),condition:n}))],p=l.length>0;return e.jsxs(ye,{as:"div",className:"border-t border-gray-200 py-6",children:[e.jsx("h3",{className:"-my-3 flow-root",children:e.jsxs(ve,{className:"group flex w-full items-center justify-between bg-white px-2 py-3 text-sm text-gray-400 hover:text-gray-500",children:[e.jsx("span",{className:"font-medium text-gray-900",children:"Điều kiện mua sắm"}),e.jsxs("span",{className:"ml-6 flex items-center",children:[e.jsx(je,{"aria-hidden":"true",className:"h-5 w-5 group-data-[open]:hidden"}),e.jsx(Ce,{"aria-hidden":"true",className:"h-5 w-5 [.group:not([data-open])_&]:hidden"})]})]})}),e.jsx(Pe,{className:"pt-6",children:e.jsx("div",{className:"space-y-4",children:d.map((n,r)=>e.jsx("div",{className:"flex items-center px-2",children:n.value==="select-all"?e.jsxs("button",{type:"button",className:`flex items-center px-2 ${p?"text-gray-600":"opacity-50 cursor-not-allowed"}`,onClick:u,disabled:!p,children:[e.jsx(_e,{}),e.jsx("span",{className:"ml-2 text-sm",children:"Bỏ chọn"})]}):e.jsxs("div",{className:"flex items-center px-2",children:[e.jsx("input",{checked:n.checked,id:`filter-condition-${r}`,name:"conditionShopping[]",type:"checkbox",className:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500",onChange:()=>n.condition&&a(n.condition)}),e.jsx("label",{htmlFor:`filter-condition-${r}`,className:"ml-3 text-sm text-gray-600",children:n.label})]})},n.value??`null-option-${r}`))})})]})},Ft=({filters:t={minDiscountPercent:null,maxDiscountPercent:null},onchange:s})=>{const o=se(),i=a=>{const{value:u}=a.target;let d=null,p=null;u==="lightDiscount"?(d=1,p=null):u==="deepDiscount"?(d=30,p=null):u==="noDiscount"&&(d=null,p=null),s(d,p)},l=t.minDiscountPercent===1?"lightDiscount":t.minDiscountPercent===30?"deepDiscount":"noDiscount",c=l==="noDiscount";return e.jsxs(A,{sx:{padding:o.spacing(1),borderTop:`1px solid ${o.palette.grey[200]}`},children:[e.jsx("span",{className:"font-medium text-gray-900 text-sm",children:"Dịch vụ"}),e.jsx(A,{sx:{marginTop:o.spacing(1),marginBottom:o.spacing(1)},children:e.jsxs(wt,{value:l,onChange:i,children:[e.jsx(Z,{value:"noDiscount",control:e.jsx(X,{sx:{"& .MuiSvgIcon-root":{fontSize:14},cursor:c?"not-allowed":"pointer"}}),label:"Bỏ chọn",disabled:c,className:"opacity-50 cursor-not-allowed"}),e.jsx(Z,{value:"lightDiscount",control:e.jsx(X,{sx:{"& .MuiSvgIcon-root":{fontSize:14}}}),label:"Có giảm giá",sx:{"& .MuiFormControlLabel-label":{fontSize:"14px"}},className:"text-sm text-gray-600"}),e.jsx(Z,{value:"deepDiscount",control:e.jsx(X,{sx:{"& .MuiSvgIcon-root":{fontSize:14}}}),label:"Giảm giá sâu (trên 30%)",sx:{"& .MuiFormControlLabel-label":{fontSize:"14px"}},className:"text-sm text-gray-600"})]})})]})},xe=({filters:t,onChange:s=()=>{}})=>{const o=a=>{const u={...t,brand:a.length>0?a:void 0};s(u)},i=a=>{const u={...t,conditionShopping:a.length>0?a:void 0};s(u)},l=(a,u)=>{const d={...t,minPrice:a!==null?a:void 0,maxPrice:u!==null?u:void 0};s(d)},c=(a,u)=>{const d={...t,minDiscountPercent:a!==null?a:void 0,maxDiscountPercent:u!==null?u:void 0};s(d)};return e.jsxs("div",{children:[e.jsx(St,{onchange:l}),e.jsx(Nt,{filters:t,onchange:o}),e.jsx(kt,{filters:t,onchange:i}),e.jsx(Ft,{filters:t,onchange:c})]})},_t="_sectionContainer_11kyo_1",Rt="_dark_11kyo_1",Bt="_container_11kyo_7",Dt="_gridContainer_11kyo_15",It="_productCard_11kyo_21",At="_productImageContainer_11kyo_27",Lt="_productLink_11kyo_35",$t="_productImage_11kyo_27",zt="_productCardContent_11kyo_49",Tt="_productCardHeader_11kyo_57",Mt="_productDiscount_11kyo_65",Gt="_productNoDiscount_11kyo_73",Y={sectionContainer:_t,dark:Rt,container:Bt,gridContainer:Dt,productCard:It,productImageContainer:At,productLink:Lt,productImage:$t,productCardContent:zt,productCardHeader:Tt,productDiscount:Mt,productNoDiscount:Gt};function J(t){return De.format(t,{code:"VND",symbol:""})}function Et({product:t,index:s}){return e.jsxs("div",{className:"relative w-full flex-col overflow-hidden rounded-lg border border-gray-100 bg-white shadow-md",children:[e.jsx("div",{className:"backdrop-blur-sm bg-white/30",children:e.jsx(Be,{to:`/detailAuc/${t._id}`,children:e.jsx("figure",{className:"relative w-full h-0 pb-[100%] overflow-hidden transition-all duration-300 cursor-pointer filter grayscale-0",children:e.jsx("img",{className:"absolute inset-0 w-full h-full object-cover rounded-lg",src:t.image[0],alt:`product ${s+1}`})})})}),e.jsxs("div",{className:"pt-1 mb-10",children:[e.jsxs("div",{className:"mb-4 px-2 flex items-center justify-between gap-4",children:[t.product_discount.discountPercent>0?e.jsxs("span",{className:" rounded bg-primary-100 px-2.5 py-0.5 text-xs font-medium text-primary-800 dark:bg-primary-900 dark:text-primary-300",children:["Giảm giá ",t.product_discount.discountPercent,"%"]}):e.jsx("span",{className:"me-2 rounded px-2.5 py-0.5 text-xs font-medium text-primary-800 dark:bg-primary-900 dark:text-primary-300"}),e.jsx("div",{className:"flex items-center justify-end gap-1",children:e.jsx("button",{type:"button","data-tooltip-target":"tooltip-add-to-favorites",className:"rounded-lg p-2 text-gray-500 hover:bg-gray-100 hover:text-gray-900 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white",children:e.jsx(He,{fill:"red",size:"1em"})})})]}),e.jsx("div",{className:"text-md font-semibold leading-tight text-gray-900 hover:text-balance dark:text-white",children:e.jsx("div",{className:"mt-1 px-2 pb-1",children:e.jsx("a",{href:"#",children:e.jsx("h5",{className:"text-sm tracking-tight text-slate-900 font-medium",children:We(t.product_name,30)})})})}),e.jsxs("div",{className:"px-2 flex items-center gap-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:t.product_ratingAvg?t.product_ratingAvg.toFixed(1):"N/A"}),e.jsx(Ze,{}),e.jsx("div",{className:"text-xs text-gray-500 items-center",children:t.product_quantity>0?`(Còn ${t.product_quantity} sản phẩm)`:"Hết hàng"})]}),e.jsx("div",{className:"mt-2 px-2 flex items-center gap-2",children:t.product_discount.discountPercent>1?e.jsxs("div",{className:"flex w-full",children:[e.jsxs("p",{className:"text-xs font-medium text-rose-700 flex-grow",children:[J(t.product_price*(1-t.product_discount.discountPercent/100))," ","đ"]}),e.jsxs("p",{className:"text-xs font-medium text-gray-400 line-through flex-shrink-0",children:[J(t.product_price)," đ"]})]}):e.jsxs("p",{className:"text-xs font-medium text-rose-700",children:[J(t.product_price)," đ"]})})]})]},s)}function qt({products:t}){return e.jsx("div",{className:Y.gridContainer,children:t.map((s,o)=>e.jsx(Et,{product:s,index:o},o))})}const Vt=({currentSort:t,onChange:s})=>{const o=(i,l)=>{s&&s(l)};return e.jsxs("div",{className:"pb-1",children:[" ",e.jsxs(Ve,{value:t,indicatorColor:"primary",textColor:"primary",onChange:o,"aria-label":"sort tabs example",children:[e.jsx(ue,{label:"Giá thấp tới cao",value:"product_price:ASC",sx:{fontFamily:"'Barlow', sans-serif"}}),e.jsx(ue,{label:"Giá cao xuống thấp",value:"product_price:DESC",sx:{fontFamily:"'Barlow', sans-serif"}})]})]})},Ut=({filters:t,onChange:s})=>{const o=se(),i=n=>n!==null?new Intl.NumberFormat("vi-VN").format(n):"Chưa xác định",l=h.useMemo(()=>[{id:1,type:"condition",getLabel:n=>(n.conditionShopping??[]).map(g=>g.nameCondition).join(", ")||"Điều kiện mua sắm",isVisible:n=>n.conditionShopping&&n.conditionShopping.length>0,isActive:n=>n.conditionShopping&&n.conditionShopping.length>0,isRemovable:!0,onRemove:n=>{const r={...n};return delete r.conditionShopping,r},onToggle:n=>n},{id:2,type:"price",getLabel:n=>`Từ ${i(n.minPrice??null)} đến ${i(n.maxPrice??null)}`,isVisible:n=>n.minPrice!==void 0&&n.maxPrice!==void 0,isActive:n=>n.minPrice!==void 0&&n.maxPrice!==void 0,isRemovable:!0,onRemove:n=>{const r={...n};return delete r.minPrice,delete r.maxPrice,r},onToggle:n=>n},{id:3,type:"brand",getLabel:n=>(n.brand??[]).map(g=>g.name).join(", ")||"Thương hiệu",isVisible:n=>n.brand&&n.brand.length>0,isActive:n=>n.brand&&n.brand.length>0,isRemovable:!0,onRemove:n=>{const r={...n};return delete r.brand,r},onToggle:n=>n},{id:4,type:"discount",getLabel:n=>{const r=n.minDiscountPercent??null;return r!==null?`Giảm giá từ ${r}%`:"Giảm giá"},isVisible:n=>n.minDiscountPercent!==void 0,isActive:n=>n.minDiscountPercent!==void 0,isRemovable:!0,onRemove:n=>{const r={...n};return delete r.minDiscountPercent,delete r.maxDiscountPercent,r},onToggle:n=>n}],[t]),c=h.useMemo(()=>l.filter(n=>n.isVisible(t)),[t,l]),a=n=>{const r=(t.conditionShopping??[]).filter(f=>f._id!==n),g={...t,conditionShopping:r};s&&s(g)},u=n=>{const r=(t.brand??[]).filter(f=>f._id!==n),g={...t,brand:r};s&&s(g)},d=()=>{const n={...t};delete n.minPrice,delete n.maxPrice,s&&s(n)},p=()=>{const n={...t};delete n.minDiscountPercent,delete n.maxDiscountPercent,s&&s(n)};return e.jsx(A,{component:"ul",sx:{padding:o.spacing(1),display:"flex",flexFlow:"row wrap",alignItems:"center",listStyleType:"none"},children:c.map(n=>e.jsxs("li",{children:[n.type==="condition"&&(t.conditionShopping??[]).map(r=>e.jsx(q,{label:r.nameCondition,color:"primary",size:"small",onDelete:()=>a(r._id),sx:{margin:o.spacing(.5)}},r._id)),n.type==="price"&&e.jsx(q,{label:n.getLabel(t),color:"primary",size:"small",onDelete:d,sx:{margin:o.spacing(.5)}}),n.type==="brand"&&(t.brand??[]).map(r=>e.jsx(q,{label:r.name,color:"primary",size:"small",onDelete:()=>u(r._id),sx:{margin:o.spacing(.5)}},r._id)),n.type==="discount"&&e.jsx(q,{label:n.getLabel(t),color:"primary",size:"small",onDelete:p,sx:{margin:o.spacing(.5)}})]},n.id))})},Ot=()=>e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] p-4 text-center text-gray-500",children:[e.jsx("img",{src:"https://firebasestorage.googleapis.com/v0/b/xprojreact.appspot.com/o/no-product%2Fno-product.png?alt=media&token=1ed14df4-2023-4e13-b25e-ba4296975c6c",alt:"No products",className:"w-32 h-32 mb-4"}),e.jsx("p",{className:"text-gray-400",children:"Hix. Không có sản phẩm nào. Bạn thử tắt điều kiện lọc và tìm lại nhé?"})]}),Ht=(t,s)=>{const o=t.find(i=>i._id===s);return o?o.name:" không xác định Brand"},Wt=(t,s)=>{const o=t.find(i=>i._id===s);return o?o.nameCondition:" không xác định Condition"},Zt=(t,s,o)=>{const i=Ie(),l=be(),c={...t,...K.parse(l.search)},[a,u]=h.useState({_sort:c._sort||"product_price:ASC",brand:c.brand?c.brand.split(",").map(d=>({_id:d,name:Ht(s,d)})):[],conditionShopping:c.conditionShopping?c.conditionShopping.split(",").map(d=>({_id:d,nameCondition:Wt(o,d)})):[],minPrice:c.minPrice?parseFloat(c.minPrice):void 0,maxPrice:c.maxPrice?parseFloat(c.maxPrice):void 0,minDiscountPercent:c.minDiscountPercent?parseFloat(c.minDiscountPercent):void 0,maxDiscountPercent:c.maxDiscountPercent?parseFloat(c.maxDiscountPercent):void 0,page:Number(c.page)||1});return h.useEffect(()=>{var p,n;const d={};a._sort&&(d._sort=a._sort),(p=a.brand)!=null&&p.length&&(d.brand=a.brand.map(r=>r._id).join(",")),(n=a.conditionShopping)!=null&&n.length&&(d.conditionShopping=a.conditionShopping.map(r=>r._id).join(",")),a.minPrice!==void 0&&(d.minPrice=String(a.minPrice)),a.maxPrice!==void 0&&(d.maxPrice=String(a.maxPrice)),a.minDiscountPercent!==void 0&&(d.minDiscountPercent=String(a.minDiscountPercent)),a.maxDiscountPercent!==void 0&&(d.maxDiscountPercent=String(a.maxDiscountPercent)),typeof a.page=="number"&&(d.page=a.page),i({pathname:window.location.pathname,search:K.stringify(d)})},[i,a]),[a,u]};function Xt(){const t=ee(),s=be(),o=K.parse(s.search),i=F(m=>{var x;return((x=m.productClient.listPageAuctionProduct.pagination)==null?void 0:x.currentPage)||1}),l=F(m=>{var x;return((x=m.productClient.listPageAuctionProduct.pagination)==null?void 0:x.totalPages)||1}),c=F(m=>m.productClient.listPageAuctionProduct.total||0),a=F(m=>m.productClient.listPageAuctionProduct.products||[]),u=F(m=>m.productClient.listPageAuctionProduct.isLoading),d=F(m=>m.productClient.getAllBrandPageAuction.brands||[]),p=F(m=>m.productClient.getAllConditionShoppingPageAuction.conditionShopping||[]);h.useEffect(()=>{t(ge()),t(fe())},[t]);const[n,r]=Zt(o,d,p),g=!u&&a.length===0;h.useEffect(()=>{t(Ae({page:n.page,limit:n.limit,_sort:n._sort,brand:n.brand||[],conditionShopping:n.conditionShopping||[],minPrice:n.minPrice,maxPrice:n.maxPrice,minDiscountPercent:n.minDiscountPercent,maxDiscountPercent:n.maxDiscountPercent}))},[t,n]);const f=m=>{r(x=>({...x,page:m}))},C=m=>{r(x=>({...x,_sort:m}))},P=h.useCallback(m=>{r(x=>({...x,...m}))},[]),y=h.useCallback(m=>{r(m)},[]),w=Object.keys(n).some(m=>{const x=n[m];return!(m==="_sort"&&(x==="product_price:ASC"||x==="product_price:DESC")||m==="page"&&x===1||Array.isArray(x)&&x.length===0||x==null||x==="")}),[b,v]=h.useState(!1);return e.jsxs("div",{children:[e.jsx(Le,{items:$e.productlist}),e.jsx("div",{className:"w-full max-w-screen-2xl px-0 bg-white",children:e.jsxs("div",{children:[e.jsxs(Xe,{open:b,onClose:v,className:"relative z-40 lg:hidden",children:[e.jsx(Je,{transition:!0,className:"fixed inset-0 bg-black bg-opacity-25 transition-opacity duration-300 ease-linear data-[closed]:opacity-0"}),e.jsx("div",{className:"fixed inset-0 z-40 flex",children:e.jsxs(Ke,{transition:!0,className:"relative ml-auto flex h-full w-full max-w-xs transform flex-col overflow-y-auto bg-white py-4 pb-12 shadow-xl transition duration-300 ease-in-out data-[closed]:translate-x-full",children:[e.jsxs("div",{className:"flex items-center justify-between px-4",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Filters"}),e.jsxs("button",{type:"button",onClick:()=>v(!1),className:"-mr-2 flex h-10 w-10 items-center justify-center rounded-md bg-white p-2 text-gray-400",children:[e.jsx("span",{className:"sr-only",children:"Close menu"}),e.jsx(Qe,{"aria-hidden":"true",className:"h-6 w-6"})]})]}),e.jsxs("form",{className:"mt-4 border-t border-gray-200",children:[e.jsx("h3",{className:"sr-only",children:"Categories"}),e.jsx(xe,{filters:n,onChange:P})]})]})})]}),e.jsx("main",{className:"w-full max-w-screen-2xl px-0 sm:px-6 lg:px-5",children:e.jsxs("section",{"aria-labelledby":"products-heading",className:"pb-24 pt-4",children:[e.jsx("h2",{id:"products-heading",className:"sr-only",children:"sản phẩm"}),e.jsxs("div",{className:"grid grid-cols-1 gap-x-0.5 gap-y-10 lg:grid-cols-4",children:[e.jsxs("div",{className:"lg:col-span-1",children:[" ",e.jsxs("form",{className:"hidden lg:block rounded-lg border border-gray-100 bg-white shadow-sm ",children:[e.jsx("h3",{className:"sr-only",children:"Categories"}),e.jsx(xe,{filters:n,onChange:P})]})," "]}),e.jsxs("div",{className:"lg:col-span-3",children:[e.jsx("div",{className:"bg-white shadow-md sm:rounded-t-lg  overflow-hidden border border-gray-100 antialiased dark:bg-gray-900 md:py-4",children:e.jsxs("div",{className:"flex items-center justify-between px-4 py-2",children:[e.jsxs("h1",{className:"text-xl font-barlow font-bold text-gray-900",children:["Sản phẩm - Đấu giá",e.jsxs("span",{className:"text-lg font-medium text-gray-500",children:[" (có ",c," sản phẩm)"]})]}),e.jsxs("button",{type:"button",onClick:()=>v(!0),className:"ml-4 p-2 text-gray-400 hover:text-gray-500 lg:hidden",children:[e.jsx("span",{className:"sr-only",children:"Filters"}),e.jsx(ze,{"aria-hidden":"true",className:"h-5 w-5"})]})]})}),w&&e.jsx("div",{className:"bg-white shadow-md overflow-hidden border border-gray-100 antialiased dark:bg-gray-900 md:py-4",children:e.jsxs("div",{className:"flex items-center px-4 py-2",children:[e.jsx("h1",{className:"text-lg font-barlow font-medium text-gray-900",children:"Bộ lọc hiện tại"}),e.jsx(Ut,{filters:n,onChange:y})]})}),e.jsx("div",{className:"bg-white",children:e.jsxs("section",{className:Y.sectionContainer,children:[e.jsx(Vt,{currentSort:n._sort,onChange:C}),e.jsx("div",{className:Y.container,children:u?e.jsx(Ue,{length:12}):g?e.jsx(Ot,{}):e.jsx(qt,{products:a})}),e.jsx(Oe,{currentPage:i,totalPages:l,onPageChange:f})]})})]})]})]})})]})})]})}const pn=()=>e.jsx(e.Fragment,{children:e.jsx(Xt,{})});export{pn as default};
