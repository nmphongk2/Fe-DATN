import{_ as q,bp as l,r as x,s as z,g as H,j as o}from"./index-B8WTsAS6.js";import{u as $}from"./index.esm-CH-ucXk-.js";import{Q as V}from"./react-toastify.esm-BnAFxftJ.js";/* empty css                      */import{n as G}from"./success-DkzG9fZq.js";import{h as M}from"./hoist-non-react-statics.cjs-C4SqqP4T.js";import"./clsx-B-dksMZM.js";const W=async n=>{try{return(await q.post("/client/contact/add",n,{headers:{"Content-Type":"application/json"}})).data}catch(r){throw console.error("Error adding contact:",r),r}};var Y=["sitekey","onChange","theme","type","tabindex","onExpired","onErrored","size","stoken","grecaptcha","badge","hl","isolated"];function S(){return S=Object.assign?Object.assign.bind():function(n){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var t in i)Object.prototype.hasOwnProperty.call(i,t)&&(n[t]=i[t])}return n},S.apply(this,arguments)}function Z(n,r){if(n==null)return{};var i={},t=Object.keys(n),e,c;for(c=0;c<t.length;c++)e=t[c],!(r.indexOf(e)>=0)&&(i[e]=n[e]);return i}function R(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function B(n,r){n.prototype=Object.create(r.prototype),n.prototype.constructor=n,E(n,r)}function E(n,r){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},E(n,r)}var L=function(n){B(r,n);function r(){var t;return t=n.call(this)||this,t.handleExpired=t.handleExpired.bind(R(t)),t.handleErrored=t.handleErrored.bind(R(t)),t.handleChange=t.handleChange.bind(R(t)),t.handleRecaptchaRef=t.handleRecaptchaRef.bind(R(t)),t}var i=r.prototype;return i.getCaptchaFunction=function(e){return this.props.grecaptcha?this.props.grecaptcha.enterprise?this.props.grecaptcha.enterprise[e]:this.props.grecaptcha[e]:null},i.getValue=function(){var e=this.getCaptchaFunction("getResponse");return e&&this._widgetId!==void 0?e(this._widgetId):null},i.getWidgetId=function(){return this.props.grecaptcha&&this._widgetId!==void 0?this._widgetId:null},i.execute=function(){var e=this.getCaptchaFunction("execute");if(e&&this._widgetId!==void 0)return e(this._widgetId);this._executeRequested=!0},i.executeAsync=function(){var e=this;return new Promise(function(c,g){e.executionResolve=c,e.executionReject=g,e.execute()})},i.reset=function(){var e=this.getCaptchaFunction("reset");e&&this._widgetId!==void 0&&e(this._widgetId)},i.forceReset=function(){var e=this.getCaptchaFunction("reset");e&&e()},i.handleExpired=function(){this.props.onExpired?this.props.onExpired():this.handleChange(null)},i.handleErrored=function(){this.props.onErrored&&this.props.onErrored(),this.executionReject&&(this.executionReject(),delete this.executionResolve,delete this.executionReject)},i.handleChange=function(e){this.props.onChange&&this.props.onChange(e),this.executionResolve&&(this.executionResolve(e),delete this.executionReject,delete this.executionResolve)},i.explicitRender=function(){var e=this.getCaptchaFunction("render");if(e&&this._widgetId===void 0){var c=document.createElement("div");this._widgetId=e(c,{sitekey:this.props.sitekey,callback:this.handleChange,theme:this.props.theme,type:this.props.type,tabindex:this.props.tabindex,"expired-callback":this.handleExpired,"error-callback":this.handleErrored,size:this.props.size,stoken:this.props.stoken,hl:this.props.hl,badge:this.props.badge,isolated:this.props.isolated}),this.captcha.appendChild(c)}this._executeRequested&&this.props.grecaptcha&&this._widgetId!==void 0&&(this._executeRequested=!1,this.execute())},i.componentDidMount=function(){this.explicitRender()},i.componentDidUpdate=function(){this.explicitRender()},i.handleRecaptchaRef=function(e){this.captcha=e},i.render=function(){var e=this.props;e.sitekey,e.onChange,e.theme,e.type,e.tabindex,e.onExpired,e.onErrored,e.size,e.stoken,e.grecaptcha,e.badge,e.hl,e.isolated;var c=Z(e,Y);return x.createElement("div",S({},c,{ref:this.handleRecaptchaRef}))},r}(x.Component);L.displayName="ReCAPTCHA";L.propTypes={sitekey:l.string.isRequired,onChange:l.func,grecaptcha:l.object,theme:l.oneOf(["dark","light"]),type:l.oneOf(["image","audio"]),tabindex:l.number,onExpired:l.func,onErrored:l.func,size:l.oneOf(["compact","normal","invisible"]),stoken:l.string,hl:l.string,badge:l.oneOf(["bottomright","bottomleft","inline"]),isolated:l.bool};L.defaultProps={onChange:function(){},theme:"light",type:"image",tabindex:0,size:"normal",badge:"bottomright"};function k(){return k=Object.assign||function(n){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var t in i)Object.prototype.hasOwnProperty.call(i,t)&&(n[t]=i[t])}return n},k.apply(this,arguments)}function Q(n,r){if(n==null)return{};var i={},t=Object.keys(n),e,c;for(c=0;c<t.length;c++)e=t[c],!(r.indexOf(e)>=0)&&(i[e]=n[e]);return i}function J(n,r){n.prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r}var m={},K=0;function X(n,r){return r=r||{},function(t){var e=t.displayName||t.name||"Component",c=function(y){J(v,y);function v(f,s){var a;return a=y.call(this,f,s)||this,a.state={},a.__scriptURL="",a}var p=v.prototype;return p.asyncScriptLoaderGetScriptLoaderID=function(){return this.__scriptLoaderID||(this.__scriptLoaderID="async-script-loader-"+K++),this.__scriptLoaderID},p.setupScriptURL=function(){return this.__scriptURL=typeof n=="function"?n():n,this.__scriptURL},p.asyncScriptLoaderHandleLoad=function(s){var a=this;this.setState(s,function(){return a.props.asyncScriptOnLoad&&a.props.asyncScriptOnLoad(a.state)})},p.asyncScriptLoaderTriggerOnScriptLoaded=function(){var s=m[this.__scriptURL];if(!s||!s.loaded)throw new Error("Script is not loaded.");for(var a in s.observers)s.observers[a](s);delete window[r.callbackName]},p.componentDidMount=function(){var s=this,a=this.setupScriptURL(),d=this.asyncScriptLoaderGetScriptLoaderID(),h=r,A=h.globalName,j=h.callbackName,I=h.scriptId;if(A&&typeof window[A]<"u"&&(m[a]={loaded:!0,observers:{}}),m[a]){var _=m[a];if(_&&(_.loaded||_.errored)){this.asyncScriptLoaderHandleLoad(_);return}_.observers[d]=function(u){return s.asyncScriptLoaderHandleLoad(u)};return}var T={};T[d]=function(u){return s.asyncScriptLoaderHandleLoad(u)},m[a]={loaded:!1,observers:T};var b=document.createElement("script");b.src=a,b.async=!0;for(var P in r.attributes)b.setAttribute(P,r.attributes[P]);I&&(b.id=I);var F=function(w){if(m[a]){var D=m[a],O=D.observers;for(var U in O)w(O[U])&&delete O[U]}};j&&typeof window<"u"&&(window[j]=function(){return s.asyncScriptLoaderTriggerOnScriptLoaded()}),b.onload=function(){var u=m[a];u&&(u.loaded=!0,F(function(w){return j?!1:(w(u),!0)}))},b.onerror=function(){var u=m[a];u&&(u.errored=!0,F(function(w){return w(u),!0}))},document.body.appendChild(b)},p.componentWillUnmount=function(){var s=this.__scriptURL;if(r.removeOnUnmount===!0)for(var a=document.getElementsByTagName("script"),d=0;d<a.length;d+=1)a[d].src.indexOf(s)>-1&&a[d].parentNode&&a[d].parentNode.removeChild(a[d]);var h=m[s];h&&(delete h.observers[this.asyncScriptLoaderGetScriptLoaderID()],r.removeOnUnmount===!0&&delete m[s])},p.render=function(){var s=r.globalName,a=this.props;a.asyncScriptOnLoad;var d=a.forwardedRef,h=Q(a,["asyncScriptOnLoad","forwardedRef"]);return s&&typeof window<"u"&&(h[s]=typeof window[s]<"u"?window[s]:void 0),h.ref=d,x.createElement(t,h)},v}(x.Component),g=x.forwardRef(function(y,v){return x.createElement(c,k({},y,{forwardedRef:v}))});return g.displayName="AsyncScriptLoader("+e+")",g.propTypes={asyncScriptOnLoad:l.func},M(g,t)}}var N="onloadcallback",ee="grecaptcha";function C(){return typeof window<"u"&&window.recaptchaOptions||{}}function te(){var n=C(),r=n.useRecaptchaNet?"recaptcha.net":"www.google.com";return n.enterprise?"https://"+r+"/recaptcha/enterprise.js?onload="+N+"&render=explicit":"https://"+r+"/recaptcha/api.js?onload="+N+"&render=explicit"}const ne=X(te,{callbackName:N,globalName:ee,attributes:C().nonce?{nonce:C().nonce}:{}})(L),re=()=>{const{register:n,handleSubmit:r,formState:{errors:i}}=$(),[t,e]=x.useState(!1),[c,g]=x.useState(null),[y,v]=x.useState(null),p=z(d=>d.auth.profile.profile),f=H(),s=d=>{v(d)},a=async d=>{if(!y){g("Vui lòng xác minh reCAPTCHA.");return}try{e(!0);const h={id_user:d.id_user,name:d.name,phone:d.phone,email:d.email,message:d.message,captchaToken:y};await W(h),G(),g("Tin nhắn đã được gửi thành công!"),setTimeout(()=>{f("/")},2e3)}catch(h){console.error("Error:",h),g("Đã xảy ra lỗi khi gửi tin nhắn. Vui lòng thử lại.")}finally{e(!1)}};return o.jsx("div",{className:"container py-8 flex items-center justify-center min-h-screen bg-gray-100",children:o.jsxs("div",{className:"bg-white shadow-lg rounded-lg p-8 w-full max-w-md",children:[o.jsx("h2",{className:"text-2xl font-semibold text-gray-800 text-center mb-6",children:"Liên Hệ Với Chúng Tôi"}),o.jsxs("form",{onSubmit:r(a),className:"space-y-6",children:[o.jsx(V,{}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"name",className:"block text-gray-700 font-medium",children:"Tên của bạn"}),o.jsx("input",{id:"id_user",type:"hidden",value:p==null?void 0:p._id,...n("id_user")}),o.jsx("input",{value:p==null?void 0:p.name,type:"text",id:"name",className:"w-full px-4 py-2 mt-2 border rounded-md",...n("name",{required:"Tên không được bỏ trống"})}),i.name&&o.jsx("small",{className:"text-red-600",children:i.name.message})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"phone",className:"block text-gray-700 font-medium",children:"Số điện thoại"}),o.jsx("input",{value:p==null?void 0:p.phone,type:"text",id:"phone",className:"w-full px-4 py-2 mt-2 border rounded-md",...n("phone",{required:"Số điện thoại không được bỏ trống",pattern:{value:/^[0-9]+$/,message:"Số điện thoại phải là số"},maxLength:{value:10,message:"Số điện thoại không được quá 10"}})}),i.phone&&o.jsx("small",{className:"text-red-600",children:i.phone.message})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"email",className:"block text-gray-700 font-medium",children:"Email"}),o.jsx("input",{value:p==null?void 0:p.email,type:"email",id:"email",className:"w-full px-4 py-2 mt-2 border rounded-md",...n("email",{required:"Email không được bỏ trống",pattern:{value:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/,message:"Email không đúng định dạng"}})}),i.email&&o.jsx("small",{className:"text-red-600",children:i.email.message})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"message",className:"block text-gray-700 font-medium",children:"Tin nhắn"}),o.jsx("textarea",{id:"message",className:"w-full px-4 py-2 mt-2 border rounded-md",maxLength:250,...n("message",{required:"Tin nhắn không được bỏ trống",maxLength:{value:250,message:"Tin nhắn không được quá 250 ký tự"}})}),i.message&&o.jsx("small",{className:"text-red-600",children:i.message.message})]}),o.jsx(ne,{sitekey:"6LewB4wqAAAAAEZfYrJ6YaVQdt-Xb2iOOY80dggY",onChange:s,onExpired:()=>v(null),hl:"vi"}),o.jsx("button",{type:"submit",className:"w-full py-2 px-4 bg-blue-600 text-white rounded-md",disabled:t,children:t?"Đang gửi...":"Gửi tin nhắn"}),c&&o.jsx("div",{className:"mt-4 text-center text-green-600",children:c})]})]})})},he=()=>o.jsx(re,{});export{he as default};
