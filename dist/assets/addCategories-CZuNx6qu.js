import{r as i,f as v,g as w,h as f,j as e,L as C,bq as F}from"./index-B8WTsAS6.js";import{u as S}from"./index.esm-CH-ucXk-.js";/* empty css                    */import{Q as T}from"./react-toastify.esm-BnAFxftJ.js";/* empty css                      */import{n as E}from"./success-DkzG9fZq.js";import{R as q,b as B}from"./ReusableBreadcrumb-D5trGug1.js";import"./clsx-B-dksMZM.js";const D=()=>{const[o,y]=i.useState(null),[,l]=i.useState(null),[m,c]=i.useState(null),k=v(),g=w(),{register:d,handleSubmit:x,reset:p,formState:{errors:t}}=S(),n=f(r=>r.categories.status),h=f(r=>r.categories.message);i.useEffect(()=>{n==="succeeded"?(p(),c(null),l(null)):n==="failed"&&l(h)},[n,p,h,g]);const j=r=>{if(r.target.files){const a=r.target.files[0];y(a);const s=new FileReader;s.onloadend=()=>{c(s.result)},s.readAsDataURL(a)}},u=async r=>{if(!o){l("No file selected");return}const a=new FormData;a.append("name",r.name),a.append("path",r.path),a.append("imgCate",o);try{await k(F(a)).unwrap(),l(null),E(),setTimeout(()=>{g("/admin/listCategories")},2e3)}catch(s){const b=(s==null?void 0:s.message)||"Error creating category";l(b),console.error("Error:",b)}},N=()=>{x(u)()};return e.jsxs("form",{onSubmit:x(u),encType:"multipart/form-data",children:[e.jsx(T,{}),e.jsx(q,{items:B.addCategories}),e.jsx("div",{className:"mb-4 ml-4 col-span-full xl:mb-2",children:e.jsx("h1",{className:"text-xl font-semibold text-gray-900 sm:text-2xl dark:text-white",children:"Cập nhật sản phẩm"})}),e.jsxs("div",{className:"grid grid-cols-[1fr_2fr] px-4 pt-4 xl:grid-cols-[1fr_2fr] xl:gap-4 dark:bg-gray-900",children:[e.jsx("div",{className:"col-span-full xl:col-auto",children:e.jsx("div",{className:"p-4 mb-4 bg-white border border-gray-200 rounded-lg shadow-sm 2xl:col-span-2 dark:border-gray-700 sm:p-6 dark:bg-gray-800",children:e.jsxs("div",{className:"items-center sm:flex xl:block 2xl:flex sm:space-x-4 xl:space-x-0 2xl:space-x-4",children:[m&&e.jsx("div",{className:"mt-4",children:e.jsx("img",{src:m,alt:"Preview",className:"w-40 h-40 object-cover"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"mb-1 text-xl font-bold text-gray-900 dark:text-white",children:"Hình ảnh"}),e.jsx("div",{className:"mb-4 text-sm text-gray-500 dark:text-gray-400",children:"JPG, GIF or PNG. Max size of 800KB"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("input",{id:"imgCate",type:"file",...d("imgCate",{required:"Hình không bỏ trống"}),onChange:j,className:"block w-full text-sm text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 dark:text-gray-400 focus:outline-none dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400"}),t.imgCate&&e.jsx("span",{className:"text-red-600",children:t.imgCate.message})]})]})]})})}),e.jsx("div",{className:"col-span-full xl:col-auto",children:e.jsxs("div",{className:"p-4 mb-4 bg-white border border-gray-200 rounded-lg shadow-sm 2xl:col-span-2 dark:border-gray-700 sm:p-6 dark:bg-gray-800",children:[e.jsx("h3",{className:"mb-4 text-xl font-semibold dark:text-white",children:"Tổng quan sản phẩm"}),e.jsxs("div",{className:"grid grid-cols-6 gap-6",children:[e.jsxs("div",{className:"col-span-6 sm:col-span-3",children:[e.jsx("label",{htmlFor:"first-name",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Tên danh mục"}),e.jsx("input",{type:"text",className:"shadow-sm bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",placeholder:"Bonnie",id:"name",...d("name",{required:"Tên không được bỏ trống",minLength:{value:3,message:"Độ đài phải có ít nhất 3 kí tự"}})}),t.name&&e.jsx("span",{className:"text-red-600",children:t.name.message})]}),e.jsxs("div",{className:"col-span-6 sm:col-span-3",children:[e.jsx("label",{htmlFor:"last-name",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Path"}),e.jsx("input",{type:"text",className:"shadow-sm bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",placeholder:"Green",id:"path",...d("path",{required:"Đường truyền không được bỏ trống",minLength:{value:3,message:"Độ đài phải có ít nhất 3 kí tự"},validate:{}})}),t.path&&e.jsx("span",{className:"text-red-600",children:t.path.message})]})]}),e.jsxs("div",{className:"col-span-6 mt-4 sm:col-full flex space-x-4",children:[e.jsx("button",{id:"addNewButton",type:"button",onClick:N,className:"text-white bg-blue-600 hover:bg-primary-800 focus:ring-4 focus:ring-primary-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-primary-600 dark:hover:bg-primary-700 dark:focus:ring-primary-800",children:"Thêm mới"}),e.jsx(C,{to:"/admin/listCategories",className:"text-white bg-emerald-700 hover:bg-lime-600 focus:ring-4 focus:ring-primary-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-primary-600 dark:hover:bg-primary-700 dark:focus:ring-primary-800",children:"Danh sách"})]})]})})]})]})},_=()=>e.jsx(D,{});export{_ as default};
