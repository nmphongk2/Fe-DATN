import{z as w,g as C,f as S,h as T,r as t,br as F,j as e,L as P,bs as I}from"./index-B8WTsAS6.js";import{u as R}from"./index.esm-CH-ucXk-.js";import{g as L}from"./getFirebse.service-CqsH0Ot3.js";/* empty css                    */import{A}from"./alert.succes-DssjoKKe.js";import{Q as E}from"./react-toastify.esm-BnAFxftJ.js";import{R as B,b as D}from"./ReusableBreadcrumb-D5trGug1.js";import"./tslib.es6-DUex0IDm.js";import"./clsx-B-dksMZM.js";const G=()=>{const{id:i}=w(),y=C(),o=S(),s=T(r=>r.categories.selectedCategory),[g,f]=t.useState(null),[x,p]=t.useState(null),[h,u]=t.useState(null),[k,b]=t.useState(null),{register:m,handleSubmit:j,setValue:n,formState:{errors:l}}=R();t.useEffect(()=>{i&&o(F(i))},[o,i]),t.useEffect(()=>{s&&(n("name",s.name),n("path",s.path),s.imgURL&&L(s.imgURL).then(r=>{p(r)}))},[s,n]);const N=r=>{const a=r.target.files;if(a&&a.length>0){const c=a[0],d=new FileReader;d.onloadend=()=>{typeof d.result=="string"&&p(d.result)},d.readAsDataURL(c),f(c)}},v=async r=>{if(i){const a=new FormData;a.append("name",r.name),a.append("path",r.path),g&&a.append("imgCate",g);try{await o(I({id:i,formData:a})),u("Cập nhật thành công!"),b("success"),setTimeout(()=>{y("/admin/listCategories")},2e3)}catch{u("Failed to update category."),b("error")}}};return e.jsxs("form",{onSubmit:j(v),encType:"multipart/form-data",children:[h&&e.jsx(A,{message:h,type:k}),e.jsx(E,{}),e.jsx(B,{items:D.editProducts}),e.jsx("div",{className:"mb-4 ml-4 col-span-full xl:mb-2",children:e.jsx("h1",{className:"text-xl font-semibold text-gray-900 sm:text-2xl dark:text-white",children:"Cập nhật sản phẩm"})}),e.jsxs("div",{className:"grid grid-cols-[1fr_2fr] px-4 pt-4 xl:grid-cols-[1fr_2fr] xl:gap-4 dark:bg-gray-900",children:[e.jsx("div",{className:"col-span-full xl:col-auto",children:e.jsx("div",{className:"p-4 mb-4 bg-white border border-gray-200 rounded-lg shadow-sm 2xl:col-span-2 dark:border-gray-700 sm:p-6 dark:bg-gray-800",children:e.jsxs("div",{className:"items-center sm:flex xl:block 2xl:flex sm:space-x-4 xl:space-x-0 2xl:space-x-4",children:[x&&e.jsx("div",{className:"image-preview",children:e.jsx("img",{src:x,alt:"Image Preview"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"mb-1 text-xl font-bold text-gray-900 dark:text-white",children:"Hình ảnh"}),e.jsx("div",{className:"mb-4 text-sm text-gray-500 dark:text-gray-400",children:"JPG, GIF or PNG. Max size of 800KB"}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsx("input",{type:"file",id:"imgCate",...m("imgCate"),onChange:N,className:"block w-full text-sm text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 dark:text-gray-400 focus:outline-none dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400"})})]})]})})}),e.jsx("div",{className:"col-span-full xl:col-auto",children:e.jsxs("div",{className:"p-4 mb-4 bg-white border border-gray-200 rounded-lg shadow-sm 2xl:col-span-2 dark:border-gray-700 sm:p-6 dark:bg-gray-800",children:[e.jsx("h3",{className:"mb-4 text-xl font-semibold dark:text-white",children:"Tổng quan sản phẩm"}),e.jsxs("div",{className:"grid grid-cols-6 gap-6",children:[e.jsxs("div",{className:"col-span-6 sm:col-span-3",children:[e.jsx("label",{htmlFor:"first-name",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Tên danh mục"}),e.jsx("input",{type:"text",className:"shadow-sm bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",placeholder:"Bonnie",id:"name",...m("name",{required:"Tên không được bỏ trống",minLength:{value:3,message:"Độ đài phải có ít nhất 3 kí tự"}})}),l.name&&e.jsx("p",{className:"text-red-500 text-xs italic",children:l.name.message})]}),e.jsxs("div",{className:"col-span-6 sm:col-span-3",children:[e.jsx("label",{htmlFor:"last-name",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Path"}),e.jsx("input",{type:"text",className:"shadow-sm bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",placeholder:"Green",id:"path",...m("path",{required:"Path không được bỏ trống"})}),l.path&&e.jsx("p",{className:"text-red-500 text-xs italic",children:l.path.message})]})]}),e.jsxs("div",{className:"col-span-6 mt-4 sm:col-full flex space-x-4",children:[e.jsx("button",{type:"submit",className:`text-white bg-blue-600\r
                 hover:bg-primary-800 focus:ring-4\r
                  focus:ring-primary-300 font-medium \r
                  rounded-lg text-sm px-5 py-2.5 \r
                  text-center dark:bg-primary-600 dark:hover:bg-primary-700 dark:focus:ring-primary-800`,children:"Cập nhật"}),e.jsx(P,{to:"/admin/listCategories",className:"text-white bg-emerald-700 hover:bg-lime-600 focus:ring-4 focus:ring-primary-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-primary-600 dark:hover:bg-primary-700 dark:focus:ring-primary-800",children:"Trở lại"})]})]})})]})]})},V=()=>e.jsx(G,{});export{V as default};
