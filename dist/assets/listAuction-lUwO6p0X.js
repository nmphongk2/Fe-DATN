import{cf as j,cg as h,r as x,l as w,j as e,f as N,h as u,L as v}from"./index-B8WTsAS6.js";import{S as _}from"./sweetalert2.all-CanRnygg.js";import{w as C}from"./sweetalert2-react-content.es-_20BSG7l.js";import{A as P}from"./index-Cc_yPv-2.js";import{D as S}from"./DeleteIcon-BukMQWWF.js";import{E as A}from"./EditIcon-CG9WE6-X.js";import{S as k}from"./searchMessage-I2XlDOxB.js";import{N as B}from"./noProduct-CCebxuri.js";import{t as D,a as L,b as n,c as T,d as E,e as M}from"./chunk-YRZGWF2W-CXxVUGNa.js";import{p as R}from"./chunk-MRXO6UUP-nmik_M5x.js";import{t as p}from"./chunk-3ZXLDIEA-b4fsncww.js";import{c as b}from"./chunk-4WFLSIHH-GgbuetXY.js";import{R as F,b as I}from"./ReusableBreadcrumb-D5trGug1.js";import"./chunk-TDOFO53L-BhVz0FjF.js";import"./chunk-N2KXC5ZE-mxrXGXiM.js";import"./chunk-XHQUSKIE-BwnSvnTo.js";import"./_class_private_field_set-DiTYLpP0.js";import"./filterDOMProps-B3AneKiX.js";import"./useEffectEvent-Cg1JSw20.js";import"./clsx-B-dksMZM.js";import"./getChildNodes-Cw4ook6e.js";import"./VisuallyHidden-D5xcTfY7.js";import"./useFocusWithin-Cnv4cfRz.js";import"./focusSafely-7dc_zii7.js";import"./useFocusable-BgsBLUcz.js";import"./useFocus-CiKVCmpT.js";import"./FocusScope-DCO5JZf9.js";import"./chunk-KBN3H6OQ-BYj_qRg-.js";import"./index-DiNnCp_7.js";import"./chunk-CAFRINWI-BTDo8zfp.js";import"./useFormValidationState-Ds8IGnmn.js";import"./useFormReset-BlmLPiDA.js";import"./chunk-CIZQCQPA-BQKhqm3c.js";import"./chunk-IXXDDLGU-D8Ib2K6T.js";import"./chunk-7F3ZLNJ6-B2JTPL8n.js";import"./chunk-MNNRULGA-Ck-UmubQ.js";import"./index-xaiLQO7O.js";import"./chunk-BZCSOIUI-ECjOxws-.js";import"./useOverlayTriggerState-_gK5y_xw.js";import"./number-DfkVkf0F.js";import"./useHover-BojuH7IM.js";import"./features-animation-BrpZblPW.js";const f=C(_),H=(s,a,c,i)=>{f.fire({title:"Xóa sản phẩm?",text:"Bạn có chắc muốn xóa sản phẩm này không!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Có",cancelButtonText:"Hủy"}).then(async o=>{var l,m;if(o.isConfirmed)try{const t=await a(j(s));if(j.rejected.match(t)){const r=((l=t.payload)==null?void 0:l.msg)||"Đã xảy ra sự cố khi xóa sản phẩm.";y(r)}else{const r=((m=t.payload)==null?void 0:m.msg)||"Sản phẩm của bạn đã bị xóa.";z(r),a(h({page:c,search:i}))}}catch{y("Đã xảy ra sự cố khi xóa sản phẩm.")}})},z=s=>{f.fire({title:"Đã xóa!",text:s,icon:"success",customClass:{confirmButton:"bg-blue-500 md:bg-green-500"}})},y=s=>{f.fire({title:"Lỗi!",text:s,icon:"error",customClass:{confirmButton:"bg-red-600"}})},G=()=>{const[s,a]=x.useState(""),c=w(),i=o=>{o.preventDefault(),c(h({page:1,search:s}))};return e.jsx("div",{className:"w-full md:w-1/2",children:e.jsxs("form",{className:"flex items-center",onSubmit:i,children:[e.jsx("label",{htmlFor:"simple-search",className:"sr-only",children:"Search"}),e.jsxs("div",{className:"relative w-full",children:[e.jsx("input",{id:"simple-search",type:"search",className:"w-full py-1 px-2 border border-gray-300 rounded-md shadow-sm",placeholder:"Search",value:s,onChange:o=>a(o.target.value)}),e.jsx("button",{type:"submit",className:"absolute inset-y-0 right-0 flex items-center p-2 text-white bg-blue-500 border border-gray-300 rounded-r-md",children:e.jsx("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.795 13.408l5.204 5.204a1 1 0 01-1.414 1.414l-5.204-5.204a7.5 7.5 0 111.414-1.414zM8.5 14A5.5 5.5 0 103 8.5 5.506 5.506 0 008.5 14z"})})})]})]})})},V=()=>{const s=N(),[a]=x.useState(""),c=u(t=>{var r;return((r=t.products.LimitProductAuction.pagination)==null?void 0:r.currentPage)||1}),i=u(t=>{var r;return((r=t.products.LimitProductAuction.pagination)==null?void 0:r.totalPages)||1}),o=u(t=>t.products.LimitProductAuction.products||[]);x.useEffect(()=>{s(h({page:c,search:a}))},[s,c,a]);const l=t=>{s(h({page:t,search:a}))},m=(t,r)=>{var g;switch(r){case"image":return e.jsx("div",{className:"flex items-center",children:e.jsx("img",{src:t.image[0],alt:t.product_name,className:"w-16 md:w-32 max-w-full max-h-full sm:w-24 sm:min-w-[96px] sm:min-h-[96px] mr-2 rounded-xl"})});case"product_name":const d=t.product_name;return e.jsx(p,{content:d,delay:0,children:e.jsx("span",{children:d.length>20?`${d.substring(0,20)}...`:d})});case"product_type":return e.jsx(b,{color:"primary",children:((g=t.product_type)==null?void 0:g.name)||"Chưa có loại"});case"product_price":return new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(t.product_price);case"status":return e.jsx(b,{color:t.status==="active"?"success":"danger",children:t.status==="active"?"Hiển thị":"Đã ẩn"});case"actions":return e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(p,{content:"Soft Delete",children:e.jsx("button",{type:"button",onClick:()=>H(t._id,s,c,a),className:"text-red-700 hover:text-red-800",children:e.jsx(S,{})})}),e.jsx(p,{content:"Edit",children:e.jsx(v,{to:`/admin/edit-product-auction/${t._id}`,className:"text-lime-600 hover:text-lime-500",children:e.jsx(A,{})})})]});default:return null}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-stretch md:items-center md:space-x-3 space-y-3 md:space-y-0 justify-between mx-4 py-4 border-t dark:border-gray-700",children:[e.jsx(G,{}),e.jsx(P,{type:"addProductAuction"})]}),o.length===0?a.length>0?e.jsx(k,{}):e.jsx(B,{}):e.jsxs(D,{"aria-label":"Product List Auction Table",shadow:void 0,color:"secondary",className:"p-4",children:[e.jsxs(L,{children:[e.jsx(n,{children:"Hình ảnh"}),e.jsx(n,{children:"Tên sản phẩm"}),e.jsx(n,{children:"Danh mục"}),e.jsx(n,{children:"Giá gốc"}),e.jsx(n,{children:"Trạng thái"}),e.jsx(n,{children:"Chức năng"})]}),e.jsx(T,{children:o.map(t=>e.jsx(E,{children:["image","product_name","product_type","product_price","status","actions"].map(r=>e.jsx(M,{children:m(t,r)},r))},t._id))})]}),i>1&&e.jsx("div",{className:"flex justify-center my-4",children:e.jsx(R,{isCompact:!0,loop:!0,showControls:!0,color:"primary",total:i,initialPage:c,onChange:t=>l(t)})})]})},$=()=>{const s=u(a=>a.products.LimitProductAuction.total||[]);return e.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-3 md:space-y-0 md:space-x-4 p-4",children:e.jsxs("div",{className:"flex-1 flex items-center space-x-2",children:[e.jsxs("h5",{children:[e.jsx("span",{className:"text-gray-500",children:"Tổng có: "}),e.jsx("span",{className:"dark:text-white",children:s})]}),e.jsx("h5",{className:"text-gray-500 dark:text-gray-400 ml-1",children:"Sản phẩm Đấu giá"})]})})},Le=()=>e.jsxs("div",{children:[e.jsx(F,{items:I.listroductAuction}),e.jsx("div",{className:"mb-4 ml-4 col-span-full xl:mb-2",children:e.jsx("h1",{className:"text-xl font-semibold text-gray-900 sm:text-2xl dark:text-white",children:"Danh sách sản phẩm đấu giá"})}),e.jsx("section",{className:"bg-gray-50 dark:bg-gray-900 p-3 sm:p-5 antialiased",children:e.jsx("div",{className:"mb-4 col-span-full xl:mb-2",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 relative border shadow-md sm:rounded-lg overflow-hidden",children:[e.jsx($,{}),e.jsx("div",{className:"overflow-x-auto",children:e.jsx(V,{})})]})})})]});export{Le as default};
