import{f as w,g as b,B as f,h as d,r as u,as as j,j as r,L as _}from"./index-B8WTsAS6.js";/* empty css                      */const N=()=>{var h;const m=w(),g=b(),l=f(),o=d(e=>e.auth.profile),i=(h=o==null?void 0:o.profile)==null?void 0:h.addresses.find(e=>e.isDefault===!0),n=d(e=>e.auth.profile.profile),c=d(e=>e.cart.carts),[s]=u.useState(null),[,x]=u.useState(null);u.useEffect(()=>{const e=new URLSearchParams(l.search),a=e.get("paymentResult"),t=e.get("orderId");a==="success"&&t&&(x(t),v(t))},[l.search]);const y=(e,a)=>({cartId:c[0]._id,user:n!=null&&n._id?n:null,cartDetails:[{_id:s==null?void 0:s._id,order:a||"",items:s==null?void 0:s.items.map(t=>({product:{...t.product,product_attributes:t.product.product_attributes.map(p=>({k:p.k,v:p.v}))},quantity:t.quantity,price:t.product.product_price_unit,totalItemPrice:t.product.product_price_unit*t.quantity,_id:t._id}))}],payment:{amount:c[0].totalPrice,payment_method:e,order_info:a||""},shipping:{recipientName:(n==null?void 0:n.name)||"",phoneNumber:(n==null?void 0:n.phone)||"",address:(i==null?void 0:i.address)||""},voucher:[],formatShipping:"Nhanh",totalAmount:c[0].totalPrice,shippingFee:0,totalPriceWithShipping:c[0].totalPrice,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),v=async e=>{const a=y("vnPay",e);try{await m(j(a)).unwrap(),setTimeout(()=>{g("/")},2e3)}catch(t){console.error("Failed to create order:",t)}};return r.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:r.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg max-w-lg w-full",children:[r.jsx("h1",{className:"text-3xl font-bold text-center text-green-600 mb-4",children:"Thanh toán thành công!"}),r.jsx("p",{className:"text-gray-600 text-center mb-6",children:"Cảm ơn bạn đã đặt hàng. Đơn hàng của bạn đã được xác nhận và sẽ được xử lý sớm nhất."}),r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx("div",{className:"mb-4",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-20 w-20 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}),r.jsx(_,{to:"/",className:"bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition duration-300",children:"Quay về trang chủ"})]})]})})},P=()=>r.jsx(r.Fragment,{children:r.jsx(N,{})});export{P as default};
