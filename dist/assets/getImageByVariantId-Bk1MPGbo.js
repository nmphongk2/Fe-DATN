import{j as s,aq as ot,r as u,R as Se,at as nt,u as rt,cd as he,ce as se,z as st,f as at,h as U,L as it}from"./index-B8WTsAS6.js";import{S as lt}from"./searchFomProduct-CtepxUMW.js";import{A as ct}from"./index-Cc_yPv-2.js";import{P as dt}from"./PlaceholderImage-Coq05ojA.js";import{D as ut}from"./DeleteIcon-BukMQWWF.js";import{E as ft}from"./EditIcon-CG9WE6-X.js";import{S as mt}from"./sweetalert2.all-CanRnygg.js";import{w as pt}from"./sweetalert2-react-content.es-_20BSG7l.js";import{u as ve}from"./chunk-KBN3H6OQ-BYj_qRg-.js";import{t as bt,f as _,c as O,m as ht,o as vt}from"./chunk-N2KXC5ZE-mxrXGXiM.js";import{d as xt,u as G,a as W}from"./chunk-XHQUSKIE-BwnSvnTo.js";import{f as ee,T as gt,b as $t,$ as wt}from"./useOverlayTriggerState-_gK5y_xw.js";import{$ as yt,b as xe,d as Et,c as Ct,a as jt}from"./useDialog-clsvYkd8.js";import{c as Fe}from"./clsx-B-dksMZM.js";import{aa as ge,a4 as $e,ab as we,ac as kt}from"./features-animation-BrpZblPW.js";import{d as ae}from"./filterDOMProps-B3AneKiX.js";import{$ as It}from"./useEffectEvent-Cg1JSw20.js";import{$ as Ne,t as Pt,a as Tt,b as te,c as St,d as Ft,e as oe}from"./chunk-YRZGWF2W-CXxVUGNa.js";import{l as Nt}from"./useFocusWithin-Cnv4cfRz.js";import{u as Mt}from"./chunk-6NL67ZRH-ST4yRtyp.js";import{b as ye}from"./chunk-DBLREEYE-KYxkDfWC.js";import{p as Bt}from"./chunk-MRXO6UUP-nmik_M5x.js";import{t as z}from"./chunk-3ZXLDIEA-b4fsncww.js";import{R as Lt,b as Dt}from"./ReusableBreadcrumb-D5trGug1.js";import"./chunk-TDOFO53L-BhVz0FjF.js";import"./focusSafely-7dc_zii7.js";import"./index-DiNnCp_7.js";import"./_class_private_field_set-DiTYLpP0.js";import"./chunk-CAFRINWI-BTDo8zfp.js";import"./useFocusable-BgsBLUcz.js";import"./useFocus-CiKVCmpT.js";import"./useFormValidationState-Ds8IGnmn.js";import"./useFormReset-BlmLPiDA.js";import"./VisuallyHidden-D5xcTfY7.js";import"./chunk-CIZQCQPA-BQKhqm3c.js";import"./number-DfkVkf0F.js";import"./FocusScope-DCO5JZf9.js";import"./chunk-BZCSOIUI-ECjOxws-.js";import"./useLabels-C5NmhLsG.js";import"./getChildNodes-Cw4ook6e.js";import"./chunk-IXXDDLGU-D8Ib2K6T.js";import"./chunk-7F3ZLNJ6-B2JTPL8n.js";import"./chunk-MNNRULGA-Ck-UmubQ.js";import"./index-xaiLQO7O.js";import"./useHover-BojuH7IM.js";const ne=typeof document<"u"&&window.visualViewport,Ot=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);let K=0,re;function _t(e={}){let{isDisabled:o}=e;It(()=>{if(!o)return K++,K===1&&(Nt()?re=Vt():re=At()),()=>{K--,K===0&&re()}},[o])}function At(){return ae(N(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`),N(document.documentElement,"overflow","hidden"))}function Vt(){let e,o,t=l=>{e=Ne(l.target,!0),!(e===document.documentElement&&e===document.body)&&e instanceof HTMLElement&&window.getComputedStyle(e).overscrollBehavior==="auto"&&(o=N(e,"overscrollBehavior","contain"))},n=l=>{if(!e||e===document.documentElement||e===document.body){l.preventDefault();return}e.scrollHeight===e.clientHeight&&e.scrollWidth===e.clientWidth&&l.preventDefault()},r=l=>{let f=l.target;Ce(f)&&f!==document.activeElement&&(l.preventDefault(),d(),f.style.transform="translateY(-2000px)",f.focus(),requestAnimationFrame(()=>{f.style.transform=""})),o&&o()},i=l=>{let f=l.target;Ce(f)&&(d(),f.style.transform="translateY(-2000px)",requestAnimationFrame(()=>{f.style.transform="",ne&&(ne.height<window.innerHeight?requestAnimationFrame(()=>{Ee(f)}):ne.addEventListener("resize",()=>Ee(f),{once:!0}))}))},a=null,d=()=>{if(a)return;let l=()=>{window.scrollTo(0,0)},f=window.pageXOffset,b=window.pageYOffset;a=ae(L(window,"scroll",l),N(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`),N(document.documentElement,"overflow","hidden"),N(document.body,"marginTop",`-${b}px`),()=>{window.scrollTo(f,b)}),window.scrollTo(0,0)},m=ae(L(document,"touchstart",t,{passive:!1,capture:!0}),L(document,"touchmove",n,{passive:!1,capture:!0}),L(document,"touchend",r,{passive:!1,capture:!0}),L(document,"focus",i,!0));return()=>{o==null||o(),a==null||a(),m()}}function N(e,o,t){let n=e.style[o];return e.style[o]=t,()=>{e.style[o]=n}}function L(e,o,t,n){return e.addEventListener(o,t,n),()=>{e.removeEventListener(o,t,n)}}function Ee(e){let o=document.scrollingElement||document.documentElement;for(;e&&e!==o;){let t=Ne(e);if(t!==document.documentElement&&t!==document.body&&t!==e){let n=t.getBoundingClientRect().top,r=e.getBoundingClientRect().top;r>n+e.clientHeight&&(t.scrollTop+=r-n)}e=t.parentElement}}function Ce(e){return e instanceof HTMLInputElement&&!Ot.has(e.type)||e instanceof HTMLTextAreaElement||e instanceof HTMLElement&&e.isContentEditable}var je=bt({slots:{wrapper:["flex","w-screen","h-[100dvh]","fixed","inset-0","z-50","overflow-x-auto","justify-center","h-[--visual-viewport-height]"],base:["flex","flex-col","relative","bg-white","z-50","w-full","box-border","bg-content1","outline-none","mx-1","my-1","sm:mx-6","sm:my-16"],backdrop:"z-50",header:"flex py-4 px-6 flex-initial text-large font-semibold",body:"flex flex-1 flex-col gap-3 px-6 py-2",footer:"flex flex-row gap-2 px-6 py-4 justify-end",closeButton:["absolute","appearance-none","outline-none","select-none","top-1","right-1","rtl:left-1","rtl:right-[unset]","p-2","text-foreground-500","rounded-full","hover:bg-default-100","active:bg-default-200","tap-highlight-transparent",...xt]},variants:{size:{xs:{base:"max-w-xs"},sm:{base:"max-w-sm"},md:{base:"max-w-md"},lg:{base:"max-w-lg"},xl:{base:"max-w-xl"},"2xl":{base:"max-w-2xl"},"3xl":{base:"max-w-3xl"},"4xl":{base:"max-w-4xl"},"5xl":{base:"max-w-5xl"},full:{base:"my-0 mx-0 sm:mx-0 sm:my-0 max-w-full h-[100dvh] min-h-[100dvh] !rounded-none"}},radius:{none:{base:"rounded-none"},sm:{base:"rounded-small"},md:{base:"rounded-medium"},lg:{base:"rounded-large"}},placement:{auto:{wrapper:"items-end sm:items-center"},center:{wrapper:"items-center sm:items-center"},top:{wrapper:"items-start sm:items-start"},"top-center":{wrapper:"items-start sm:items-center"},bottom:{wrapper:"items-end sm:items-end"},"bottom-center":{wrapper:"items-end sm:items-center"}},shadow:{sm:{base:"shadow-small"},md:{base:"shadow-medium"},lg:{base:"shadow-large"}},backdrop:{transparent:{backdrop:"hidden"},opaque:{backdrop:"bg-overlay/50 backdrop-opacity-disabled"},blur:{backdrop:"backdrop-blur-md backdrop-saturate-150 bg-overlay/30"}},scrollBehavior:{normal:{base:"overflow-y-hidden"},inside:{base:"max-h-[calc(100%_-_8rem)]",body:"overflow-y-auto"},outside:{wrapper:"items-start sm:items-start overflow-y-auto",base:"my-16"}},disableAnimation:{false:{wrapper:["[--scale-enter:100%]","[--scale-exit:100%]","[--slide-enter:0px]","[--slide-exit:80px]","sm:[--scale-enter:100%]","sm:[--scale-exit:103%]","sm:[--slide-enter:0px]","sm:[--slide-exit:0px]"]}}},defaultVariants:{size:"md",radius:"lg",shadow:"sm",placement:"auto",backdrop:"opaque",scrollBehavior:"normal"},compoundVariants:[{backdrop:["opaque","blur"],class:{backdrop:"w-screen h-screen fixed inset-0"}}]}),Ht=e=>{const{isSelected:o,isIndeterminate:t,disableAnimation:n,...r}=e;return s.jsx("svg",{"aria-hidden":"true",fill:"none",focusable:"false",height:"1em",role:"presentation",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,viewBox:"0 0 24 24",width:"1em",...r,children:s.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})},[Rt,X]=ot({name:"ModalContext",errorMessage:"useModalContext: `context` is undefined. Seems you forgot to wrap all popover components within `<Modal />`"}),Me=_((e,o)=>{const{as:t,children:n,className:r,...i}=e,{slots:a,classNames:d,bodyId:m,setBodyMounted:l}=X(),f=G(o),b=t||"div";return u.useEffect(()=>(l(!0),()=>l(!1)),[l]),s.jsx(b,{ref:f,className:a.body({class:O(d==null?void 0:d.body,r)}),id:m,...i,children:n})});Me.displayName="NextUI.ModalBody";var Wt=Me,zt={enter:{scale:"var(--scale-enter)",y:"var(--slide-enter)",opacity:1,transition:{scale:{duration:.4,ease:ee.ease},opacity:{duration:.4,ease:ee.ease},y:{type:"spring",bounce:0,duration:.6}}},exit:{scale:"var(--scale-exit)",y:"var(--slide-exit)",opacity:0,transition:{duration:.3,ease:ee.ease}}};const Be=typeof document<"u"?Se.useLayoutEffect:()=>{};function Kt(e){const o=u.useRef(null);return Be(()=>{o.current=e},[e]),u.useCallback((...t)=>{const n=o.current;return n==null?void 0:n(...t)},[])}let ke=new Map;function Ut(e,o){if(e===o)return e;let t=ke.get(e);if(t)return t(o),o;let n=ke.get(o);return n?(n(e),e):o}function Le(...e){return(...o)=>{for(let t of e)typeof t=="function"&&t(...o)}}const A=e=>{var o;return(o=e==null?void 0:e.ownerDocument)!==null&&o!==void 0?o:document},k=e=>e&&"window"in e&&e.window===e?e:A(e).defaultView||window;function ie(...e){let o={...e[0]};for(let t=1;t<e.length;t++){let n=e[t];for(let r in n){let i=o[r],a=n[r];typeof i=="function"&&typeof a=="function"&&r[0]==="o"&&r[1]==="n"&&r.charCodeAt(2)>=65&&r.charCodeAt(2)<=90?o[r]=Le(i,a):(r==="className"||r==="UNSAFE_className")&&typeof i=="string"&&typeof a=="string"?o[r]=Fe(i,a):r==="id"&&i&&a?o.id=Ut(i,a):o[r]=a!==void 0?a:i}}return o}function qt(...e){return e.length===1?e[0]:o=>{for(let t of e)typeof t=="function"?t(o):t!=null&&(t.current=o)}}function Gt(e){var o;return typeof window>"u"||window.navigator==null?!1:((o=window.navigator.userAgentData)===null||o===void 0?void 0:o.brands.some(t=>e.test(t.brand)))||e.test(window.navigator.userAgent)}function Xt(e){var o;return typeof window<"u"&&window.navigator!=null?e.test(((o=window.navigator.userAgentData)===null||o===void 0?void 0:o.platform)||window.navigator.platform):!1}function Yt(){return Xt(/^Mac/i)}function Jt(){return Gt(/Android/i)}let g=typeof document<"u"&&window.visualViewport;function Qt(){let e=nt(),[o,t]=u.useState(()=>e?{width:0,height:0}:Ie());return u.useEffect(()=>{let n=()=>{t(r=>{let i=Ie();return i.width===r.width&&i.height===r.height?r:i})};return g?g.addEventListener("resize",n):window.addEventListener("resize",n),()=>{g?g.removeEventListener("resize",n):window.removeEventListener("resize",n)}},[]),o}function Ie(){return{width:g&&(g==null?void 0:g.width)||window.innerWidth,height:g&&(g==null?void 0:g.height)||window.innerHeight}}function Zt(e){return e.mozInputSource===0&&e.isTrusted?!0:Jt()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}var De=_((e,o)=>{const{as:t,children:n,role:r="dialog",...i}=e,{Component:a,domRef:d,slots:m,classNames:l,motionProps:f,backdrop:b,closeButton:h,hideCloseButton:c,disableAnimation:p,getDialogProps:v,getBackdropProps:w,getCloseButtonProps:x,onClose:y}=X(),E=t||a||"div",M=Qt(),{dialogProps:C}=yt({role:r},d),P=u.isValidElement(h)?u.cloneElement(h,x()):s.jsx("button",{...x(),children:s.jsx(Ht,{})}),Y=u.useCallback(S=>{S.key==="Tab"&&S.nativeEvent.isComposing&&(S.stopPropagation(),S.preventDefault())},[]),T=v(ie(C,i)),H=s.jsxs(E,{...T,onKeyDown:Le(T.onKeyDown,Y),children:[s.jsx(xe,{onDismiss:y}),!c&&P,typeof n=="function"?n(y):n,s.jsx(xe,{onDismiss:y})]}),J=u.useMemo(()=>b==="transparent"?null:p?s.jsx("div",{...w()}):s.jsx(ge,{features:$e,children:s.jsx(we.div,{animate:"enter",exit:"exit",initial:"exit",variants:gt.fade,...w()})}),[b,p,w]),R={"--visual-viewport-height":M.height+"px"},Q=p?s.jsx("div",{className:m.wrapper({class:l==null?void 0:l.wrapper}),"data-slot":"wrapper",style:R,children:H}):s.jsx(ge,{features:$e,children:s.jsx(we.div,{animate:"enter",className:m.wrapper({class:l==null?void 0:l.wrapper}),"data-slot":"wrapper",exit:"exit",initial:"exit",variants:zt,...f,style:R,children:H})});return s.jsxs("div",{tabIndex:-1,children:[J,Q]})});De.displayName="NextUI.ModalContent";var eo=De,Oe=_((e,o)=>{const{as:t,children:n,className:r,...i}=e,{slots:a,classNames:d}=X(),m=G(o),l=t||"footer";return s.jsx(l,{ref:m,className:a.footer({class:O(d==null?void 0:d.footer,r)}),...i,children:n})});Oe.displayName="NextUI.ModalFooter";var to=Oe,_e=_((e,o)=>{const{as:t,children:n,className:r,...i}=e,{slots:a,classNames:d,headerId:m,setHeaderMounted:l}=X(),f=G(o),b=t||"header";return u.useEffect(()=>(l(!0),()=>l(!1)),[l]),s.jsx(b,{ref:f,className:a.header({class:O(d==null?void 0:d.header,r)}),id:m,...i,children:n})});_e.displayName="NextUI.ModalHeader";var oo=_e;let Pe=new Map;function no(e,o){if(e===o)return e;let t=Pe.get(e);if(t)return t(o),o;let n=Pe.get(o);return n?(n(e),e):o}function ro(...e){return(...o)=>{for(let t of e)typeof t=="function"&&t(...o)}}function so(...e){let o={...e[0]};for(let t=1;t<e.length;t++){let n=e[t];for(let r in n){let i=o[r],a=n[r];typeof i=="function"&&typeof a=="function"&&r[0]==="o"&&r[1]==="n"&&r.charCodeAt(2)>=65&&r.charCodeAt(2)<=90?o[r]=ro(i,a):(r==="className"||r==="UNSAFE_className")&&typeof i=="string"&&typeof a=="string"?o[r]=Fe(i,a):r==="id"&&i&&a?o.id=no(i,a):o[r]=a!==void 0?a:i}}return o}function ao(e={shouldBlockScroll:!0},o,t){let{overlayProps:n,underlayProps:r}=$t({...e,isOpen:o.isOpen,onClose:o.close},t);return _t({isDisabled:!o.isOpen||!e.shouldBlockScroll}),Et(),u.useEffect(()=>{if(o.isOpen&&t.current)return Ct([t.current])},[o.isOpen,t]),{modalProps:so(n),underlayProps:r}}class io{isDefaultPrevented(){return this.nativeEvent.defaultPrevented}preventDefault(){this.defaultPrevented=!0,this.nativeEvent.preventDefault()}stopPropagation(){this.nativeEvent.stopPropagation(),this.isPropagationStopped=()=>!0}isPropagationStopped(){return!1}persist(){}constructor(o,t){this.nativeEvent=t,this.target=t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget,this.bubbles=t.bubbles,this.cancelable=t.cancelable,this.defaultPrevented=t.defaultPrevented,this.eventPhase=t.eventPhase,this.isTrusted=t.isTrusted,this.timeStamp=t.timeStamp,this.type=o}}function Ae(e){let o=u.useRef({isFocused:!1,observer:null});Be(()=>{const n=o.current;return()=>{n.observer&&(n.observer.disconnect(),n.observer=null)}},[]);let t=Kt(n=>{e==null||e(n)});return u.useCallback(n=>{if(n.target instanceof HTMLButtonElement||n.target instanceof HTMLInputElement||n.target instanceof HTMLTextAreaElement||n.target instanceof HTMLSelectElement){o.current.isFocused=!0;let r=n.target,i=a=>{o.current.isFocused=!1,r.disabled&&t(new io("blur",a)),o.current.observer&&(o.current.observer.disconnect(),o.current.observer=null)};r.addEventListener("focusout",i,{once:!0}),o.current.observer=new MutationObserver(()=>{if(o.current.isFocused&&r.disabled){var a;(a=o.current.observer)===null||a===void 0||a.disconnect();let d=r===document.activeElement?null:document.activeElement;r.dispatchEvent(new FocusEvent("blur",{relatedTarget:d})),r.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:d}))}}),o.current.observer.observe(r,{attributes:!0,attributeFilter:["disabled"]})}},[t])}function lo(e){let{isDisabled:o,onFocus:t,onBlur:n,onFocusChange:r}=e;const i=u.useCallback(m=>{if(m.target===m.currentTarget)return n&&n(m),r&&r(!1),!0},[n,r]),a=Ae(i),d=u.useCallback(m=>{const l=A(m.target);m.target===m.currentTarget&&l.activeElement===m.target&&(t&&t(m),r&&r(!0),a(m))},[r,t,a]);return{focusProps:{onFocus:!o&&(t||r||n)?d:void 0,onBlur:!o&&(n||r)?i:void 0}}}let V=null,le=new Set,D=new Map,I=!1,ce=!1;const co={Tab:!0,Escape:!0};function ue(e,o){for(let t of le)t(e,o)}function uo(e){return!(e.metaKey||!Yt()&&e.altKey||e.ctrlKey||e.key==="Control"||e.key==="Shift"||e.key==="Meta")}function q(e){I=!0,uo(e)&&(V="keyboard",ue("keyboard",e))}function $(e){V="pointer",(e.type==="mousedown"||e.type==="pointerdown")&&(I=!0,ue("pointer",e))}function Ve(e){Zt(e)&&(I=!0,V="virtual")}function He(e){e.target===window||e.target===document||(!I&&!ce&&(V="virtual",ue("virtual",e)),I=!1,ce=!1)}function Re(){I=!1,ce=!0}function de(e){if(typeof window>"u"||D.get(k(e)))return;const o=k(e),t=A(e);let n=o.HTMLElement.prototype.focus;o.HTMLElement.prototype.focus=function(){I=!0,n.apply(this,arguments)},t.addEventListener("keydown",q,!0),t.addEventListener("keyup",q,!0),t.addEventListener("click",Ve,!0),o.addEventListener("focus",He,!0),o.addEventListener("blur",Re,!1),typeof PointerEvent<"u"?(t.addEventListener("pointerdown",$,!0),t.addEventListener("pointermove",$,!0),t.addEventListener("pointerup",$,!0)):(t.addEventListener("mousedown",$,!0),t.addEventListener("mousemove",$,!0),t.addEventListener("mouseup",$,!0)),o.addEventListener("beforeunload",()=>{We(e)},{once:!0}),D.set(o,{focus:n})}const We=(e,o)=>{const t=k(e),n=A(e);o&&n.removeEventListener("DOMContentLoaded",o),D.has(t)&&(t.HTMLElement.prototype.focus=D.get(t).focus,n.removeEventListener("keydown",q,!0),n.removeEventListener("keyup",q,!0),n.removeEventListener("click",Ve,!0),t.removeEventListener("focus",He,!0),t.removeEventListener("blur",Re,!1),typeof PointerEvent<"u"?(n.removeEventListener("pointerdown",$,!0),n.removeEventListener("pointermove",$,!0),n.removeEventListener("pointerup",$,!0)):(n.removeEventListener("mousedown",$,!0),n.removeEventListener("mousemove",$,!0),n.removeEventListener("mouseup",$,!0)),D.delete(t))};function fo(e){const o=A(e);let t;return o.readyState!=="loading"?de(e):(t=()=>{de(e)},o.addEventListener("DOMContentLoaded",t)),()=>We(e,t)}typeof document<"u"&&fo();function ze(){return V!=="pointer"}const mo=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function po(e,o,t){var n;const r=typeof window<"u"?k(t==null?void 0:t.target).HTMLInputElement:HTMLInputElement,i=typeof window<"u"?k(t==null?void 0:t.target).HTMLTextAreaElement:HTMLTextAreaElement,a=typeof window<"u"?k(t==null?void 0:t.target).HTMLElement:HTMLElement,d=typeof window<"u"?k(t==null?void 0:t.target).KeyboardEvent:KeyboardEvent;return e=e||(t==null?void 0:t.target)instanceof r&&!mo.has(t==null||(n=t.target)===null||n===void 0?void 0:n.type)||(t==null?void 0:t.target)instanceof i||(t==null?void 0:t.target)instanceof a&&(t==null?void 0:t.target.isContentEditable),!(e&&o==="keyboard"&&t instanceof d&&!co[t.key])}function bo(e,o,t){de(),u.useEffect(()=>{let n=(r,i)=>{po(!!(t!=null&&t.isTextInput),r,i)&&e(ze())};return le.add(n),()=>{le.delete(n)}},o)}function ho(e){let{isDisabled:o,onBlurWithin:t,onFocusWithin:n,onFocusWithinChange:r}=e,i=u.useRef({isFocusWithin:!1}),a=u.useCallback(l=>{i.current.isFocusWithin&&!l.currentTarget.contains(l.relatedTarget)&&(i.current.isFocusWithin=!1,t&&t(l),r&&r(!1))},[t,r,i]),d=Ae(a),m=u.useCallback(l=>{!i.current.isFocusWithin&&document.activeElement===l.target&&(n&&n(l),r&&r(!0),i.current.isFocusWithin=!0,d(l))},[n,r,d]);return o?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:m,onBlur:a}}}function vo(e={}){let{autoFocus:o=!1,isTextInput:t,within:n}=e,r=u.useRef({isFocused:!1,isFocusVisible:o||ze()}),[i,a]=u.useState(!1),[d,m]=u.useState(()=>r.current.isFocused&&r.current.isFocusVisible),l=u.useCallback(()=>m(r.current.isFocused&&r.current.isFocusVisible),[]),f=u.useCallback(c=>{r.current.isFocused=c,a(c),l()},[l]);bo(c=>{r.current.isFocusVisible=c,l()},[],{isTextInput:t});let{focusProps:b}=lo({isDisabled:n,onFocusChange:f}),{focusWithinProps:h}=ho({isDisabled:!n,onFocusWithinChange:f});return{isFocused:i,isFocusVisible:d,focusProps:n?h:b}}function xo(e){var o,t,n;const r=rt(),[i,a]=ht(e,je.variantKeys),{ref:d,as:m,className:l,classNames:f,isOpen:b,defaultOpen:h,onOpenChange:c,motionProps:p,closeButton:v,isDismissable:w=!0,hideCloseButton:x=!1,shouldBlockScroll:y=!0,portalContainer:E,isKeyboardDismissDisabled:M=!1,onClose:C,...P}=i,Y=m||"section",T=G(d),H=u.useRef(null),[J,R]=u.useState(!1),[Q,S]=u.useState(!1),Z=(t=(o=e.disableAnimation)!=null?o:r==null?void 0:r.disableAnimation)!=null?t:!1,Ue=u.useId(),me=u.useId(),pe=u.useId(),F=wt({isOpen:b,defaultOpen:h,onOpenChange:j=>{c==null||c(j),j||C==null||C()}}),{modalProps:qe,underlayProps:be}=ao({isDismissable:w,shouldBlockScroll:y,isKeyboardDismissDisabled:M},F,T),{buttonProps:Ge}=Mt({onPress:F.close},H),{isFocusVisible:Xe,focusProps:Ye}=vo(),Je=O(f==null?void 0:f.base,l),B=u.useMemo(()=>je({...a,disableAnimation:Z}),[vt(a),Z]),Qe=(j={},tt=null)=>({ref:qt(tt,T),...ie(qe,P,j),className:B.base({class:O(Je,j.className)}),id:Ue,"data-open":W(F.isOpen),"data-dismissable":W(w),"aria-modal":W(!0),"aria-labelledby":J?me:void 0,"aria-describedby":Q?pe:void 0}),Ze=u.useCallback((j={})=>({className:B.backdrop({class:f==null?void 0:f.backdrop}),onClick:()=>F.close(),...be,...j}),[B,f,be]),et=()=>({role:"button",tabIndex:0,"aria-label":"Close","data-focus-visible":W(Xe),className:B.closeButton({class:f==null?void 0:f.closeButton}),...ie(Ge,Ye)});return{Component:Y,slots:B,domRef:T,headerId:me,bodyId:pe,motionProps:p,classNames:f,isDismissable:w,closeButton:v,hideCloseButton:x,portalContainer:E,shouldBlockScroll:y,backdrop:(n=e.backdrop)!=null?n:"opaque",isOpen:F.isOpen,onClose:F.close,disableAnimation:Z,setBodyMounted:S,setHeaderMounted:R,getDialogProps:Qe,getBackdropProps:Ze,getCloseButtonProps:et}}var Ke=_((e,o)=>{const{children:t,...n}=e,r=xo({...n,ref:o}),i=s.jsx(jt,{portalContainer:r.portalContainer,children:t});return s.jsx(Rt,{value:r,children:r.disableAnimation&&r.isOpen?i:s.jsx(kt,{children:r.isOpen?i:null})})});Ke.displayName="NextUI.Modal";var go=Ke;function $o(...e){return(...o)=>{for(let t of e)typeof t=="function"&&t(...o)}}function wo(e,o,t){let[n,r]=u.useState(e||o),i=u.useRef(e!==void 0),a=e!==void 0;u.useEffect(()=>{let l=i.current;l!==a&&console.warn(`WARN: A component changed from ${l?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}.`),i.current=a},[a]);let d=a?e:n,m=u.useCallback((l,...f)=>{let b=(h,...c)=>{t&&(Object.is(d,h)||t(h,...c)),a||(d=h)};typeof l=="function"?(console.warn("We can not support a function callback. See Github Issues for details https://github.com/adobe/react-spectrum/issues/2320"),r((c,...p)=>{let v=l(a?d:c,...p);return b(v,...f),a?c:v})):(a||r(l),b(l,...f))},[a,d,t]);return[d,m]}function yo(e={}){const{id:o,defaultOpen:t,isOpen:n,onClose:r,onOpen:i,onChange:a=()=>{}}=e,d=ve(i),m=ve(r),[l,f]=wo(n,t||!1,a),b=u.useId(),h=o||b,c=n!==void 0,p=u.useCallback(()=>{c||f(!1),m==null||m()},[c,m]),v=u.useCallback(()=>{c||f(!0),d==null||d()},[c,d]),w=u.useCallback(()=>{(l?p:v)()},[l,v,p]);return{isOpen:!!l,onOpen:v,onClose:p,onOpenChange:w,isControlled:c,getButtonProps:(x={})=>({...x,"aria-expanded":l,"aria-controls":h,onClick:$o(x.onClick,w)}),getDisclosureProps:(x={})=>({...x,hidden:!l,id:h})}}const fe=pt(mt),Eo=(e,o,t,n)=>{fe.fire({title:"Xóa ảnh?",text:"Bạn có chắc muốn xóa ảnh này không!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Có",cancelButtonText:"Hủy"}).then(async r=>{var i;if(r.isConfirmed)try{const a=await t(he({imageId:o,variantId:e}));if(he.rejected.match(a)){const d=typeof a.payload=="string"?a.payload:"Đã xảy ra sự cố khi xóa ảnh.";Te(d)}else{const d=((i=a.payload)==null?void 0:i.msg)||"ảnh của bạn đã bị xóa.";Co(d),t(se({variantId:e,page:n}))}}catch{Te("Đã xảy ra sự cố khi xóa ảnh.")}})},Co=e=>{fe.fire({title:"Đã xóa!",text:e,icon:"success",customClass:{confirmButton:"bg-blue-500 md:bg-green-500"}})},Te=e=>{fe.fire({title:"Lỗi!",text:e,icon:"error",customClass:{confirmButton:"bg-red-600"}})},jo=()=>{const{isOpen:e,onOpen:o,onOpenChange:t}=yo(),[n]=Se.useState("inside"),{variantId:r}=st(),i=at(),a=U(c=>{var p;return((p=c.products.getImageByVariantId.pagination)==null?void 0:p.currentPage)||1}),d=U(c=>{var p;return((p=c.products.getImageByVariantId.pagination)==null?void 0:p.totalPages)||1}),m=U(c=>{var p;return((p=c.products.getImageByVariantId.imageList)==null?void 0:p.images)||[]}),[l,f]=u.useState([]);u.useEffect(()=>{r&&i(se({variantId:r,page:a}))},[i,a,r]);const b=c=>{r?i(se({variantId:r,page:c})):console.error("productId is undefined")},h=(c,p)=>{var v;switch(p){case"image":const x=c.image.slice(0,1),y=c.image.slice(1);return s.jsx("div",{className:"flex items-center space-x-2 flex-wrap",children:Array.isArray(c.image)&&c.image.length>0?s.jsxs(s.Fragment,{children:[x.map((M,C)=>{var P;return s.jsx("img",{src:M,className:"w-16 md:w-32 max-w-full max-h-full sm:w-24 sm:min-w-[96px] sm:min-h-[96px] mr-2",alt:((P=c.color)==null?void 0:P.name)||`Product image ${C+1}`},C)}),y.length>0&&s.jsx(z,{content:`+${y.length} ảnh`,delay:0,children:s.jsxs(ye,{variant:"ghost",color:"primary",onPress:()=>{f(y),o()},className:"mt-2",children:["Xem ",y.length," ảnh"]})})]}):s.jsx(dt,{className:"w-16 md:w-24 lg:w-32 max-w-full max-h-full sm:w-24 sm:min-w-[96px] sm:min-h-[96px] mr-2 mb-2"})});case"color":const E=((v=c.color)==null?void 0:v.name)||"No Color";return s.jsx(z,{content:E,delay:0,children:s.jsx("span",{children:E.length>20?`${E.substring(0,20)}...`:E})});case"actions":return s.jsxs("div",{className:"relative flex items-center gap-2",children:[s.jsx(z,{color:"danger",content:"Xóa ảnh",children:s.jsx("span",{className:"text-lg text-danger cursor-pointer active:opacity-50",onClick:()=>Eo(r||"",c._id,i,a),children:s.jsx(ut,{})})}),s.jsx(z,{content:"Cập nhật màu sắc",children:s.jsx(it,{to:`/admin/edit-image-and-color/${c._id}`,className:"text-lg text-default-400 cursor-pointer active:opacity-50",children:s.jsx(ft,{})})})]});default:return null}};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex flex-col md:flex-row items-stretch md:items-center md:space-x-3 space-y-3 md:space-y-0 justify-between mx-4 py-4 border-t dark:border-gray-700",children:[s.jsx(lt,{}),s.jsx(ct,{type:"addProduct"})]}),s.jsxs(Pt,{"aria-label":"Product Variants Table",className:"p-4",children:[s.jsxs(Tt,{children:[s.jsx(te,{children:"Hình ảnh"}),s.jsx(te,{children:"Màu sắc"}),s.jsx(te,{children:"Chức năng"})]}),s.jsx(St,{children:(Array.isArray(m)?m:[]).map(c=>s.jsxs(Ft,{className:"text-center",children:[s.jsx(oe,{children:h(c,"image")}),s.jsx(oe,{children:h(c,"color")}),s.jsx(oe,{children:h(c,"actions")})]},c._id))})]}),s.jsx(go,{isOpen:e,onOpenChange:t,scrollBehavior:n,"aria-labelledby":"modal-title",children:s.jsx(eo,{children:c=>s.jsxs(s.Fragment,{children:[s.jsx(oo,{children:s.jsx("p",{id:"modal-title",className:"text-lg",children:"Các ảnh còn lại"})}),s.jsx(Wt,{children:s.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:l.map((p,v)=>s.jsx("img",{src:p,className:"w-full sm:w-24 md:w-32 lg:w-40 xl:w-48 h-auto object-cover rounded-md",alt:`Image ${v+1}`},v))})}),s.jsx(to,{children:s.jsx(ye,{color:"danger",variant:"light",onPress:c,children:"Đóng"})})]})})}),s.jsx("div",{className:"flex justify-center my-4",children:s.jsx(Bt,{isCompact:!0,loop:!0,showControls:!0,color:"primary",total:d,initialPage:a,onChange:c=>b(c)})})]})},ko=()=>{const e=U(o=>{var t;return((t=o.products.getImageByVariantId.imageList)==null?void 0:t.total)||[]});return console.log(e),s.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-3 md:space-y-0 md:space-x-4 p-4",children:s.jsxs("div",{className:"flex-1 flex items-center space-x-2",children:[s.jsxs("h5",{children:[s.jsx("span",{className:"text-gray-500",children:"Tổng có: "}),s.jsx("span",{className:"dark:text-white",children:e})]}),s.jsx("h5",{className:"text-gray-500 dark:text-gray-400 ml-1",children:"màu"})]})})},gn=()=>s.jsxs("div",{children:[s.jsx(Lt,{items:Dt.listproduct}),s.jsx("div",{className:"mb-4 ml-4 col-span-full xl:mb-2",children:s.jsx("h1",{className:"text-xl font-semibold text-gray-900 sm:text-2xl dark:text-white",children:"Danh sách hình ảnh và màu sắc"})}),s.jsx("section",{className:"bg-gray-50 dark:bg-gray-900 p-3 sm:p-5 antialiased",children:s.jsx("div",{className:"mb-4 col-span-full xl:mb-2",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 relative border shadow-md sm:rounded-lg overflow-hidden",children:[s.jsx(ko,{}),s.jsx("div",{className:"overflow-x-auto",children:s.jsx(jo,{})})]})})})]});export{gn as default};
