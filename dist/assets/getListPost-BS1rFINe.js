import{r as u,l as y,bT as p,j as t,bU as f,f as b,L as w,h}from"./index-B8WTsAS6.js";import{A as v}from"./index-Cc_yPv-2.js";import{E as N}from"./EditDocumentIcon-DuofBkHL.js";import{D as _}from"./DeleteIcon-BukMQWWF.js";import{S as P}from"./sweetalert2.all-CanRnygg.js";import{w as C}from"./sweetalert2-react-content.es-_20BSG7l.js";import{f as k,g as T,h as S,m as g}from"./chunk-GBNLLUVD-1t55ujfQ.js";import{b as D}from"./chunk-DBLREEYE-KYxkDfWC.js";import{S as B}from"./searchMessage-I2XlDOxB.js";import{N as L}from"./noProduct-CCebxuri.js";import{t as E,a as M,b as R,c as A,d as G,e as H}from"./chunk-YRZGWF2W-CXxVUGNa.js";import{p as I}from"./chunk-MRXO6UUP-nmik_M5x.js";import{c as F}from"./chunk-4WFLSIHH-GgbuetXY.js";import{t as U}from"./chunk-3ZXLDIEA-b4fsncww.js";import{R as X,b as $}from"./ReusableBreadcrumb-D5trGug1.js";import"./chunk-TDOFO53L-BhVz0FjF.js";import"./chunk-N2KXC5ZE-mxrXGXiM.js";import"./tslib.es6-DUex0IDm.js";import"./useDialog-clsvYkd8.js";import"./useLabels-C5NmhLsG.js";import"./filterDOMProps-B3AneKiX.js";import"./useEffectEvent-Cg1JSw20.js";import"./clsx-B-dksMZM.js";import"./getChildNodes-Cw4ook6e.js";import"./VisuallyHidden-D5xcTfY7.js";import"./useFocusWithin-Cnv4cfRz.js";import"./focusSafely-7dc_zii7.js";import"./_class_private_field_set-DiTYLpP0.js";import"./FocusScope-DCO5JZf9.js";import"./useOverlayTriggerState-_gK5y_xw.js";import"./number-DfkVkf0F.js";import"./chunk-BZCSOIUI-ECjOxws-.js";import"./chunk-XHQUSKIE-BwnSvnTo.js";import"./features-animation-BrpZblPW.js";import"./chunk-6NL67ZRH-ST4yRtyp.js";import"./chunk-MNNRULGA-Ck-UmubQ.js";import"./chunk-CIZQCQPA-BQKhqm3c.js";import"./index-DiNnCp_7.js";import"./useFocusable-BgsBLUcz.js";import"./useFocus-CiKVCmpT.js";import"./chunk-KBN3H6OQ-BYj_qRg-.js";import"./chunk-CAFRINWI-BTDo8zfp.js";import"./useFormValidationState-Ds8IGnmn.js";import"./useFormReset-BlmLPiDA.js";import"./chunk-IXXDDLGU-D8Ib2K6T.js";import"./chunk-7F3ZLNJ6-B2JTPL8n.js";import"./index-xaiLQO7O.js";import"./useHover-BojuH7IM.js";const V=()=>{const[s,a]=u.useState(""),i=y();u.useEffect(()=>{i(p({page:1,search:s||void 0}))},[s,i]);const n=r=>{r.preventDefault()};return t.jsx("div",{className:"w-full md:w-1/2",children:t.jsxs("form",{className:"flex items-center",onSubmit:n,children:[t.jsx("label",{htmlFor:"simple-search",className:"sr-only",children:"Tìm kiếm"}),t.jsx("div",{className:"relative w-full",children:t.jsx("input",{id:"simple-search",type:"search",className:"w-full py-1 px-2 border text-black border-gray-300 rounded-md shadow-sm",placeholder:"Tìm kiếm",value:s,onChange:r=>a(r.target.value)})})]})})},x=C(P),q=(s,a,i,n)=>{x.fire({title:"Xóa danh mục?",text:"Bạn có chắc muốn xóa danh mục này không!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Có",cancelButtonText:"Hủy"}).then(async r=>{var c,m;if(r.isConfirmed)try{const l=await a(f(s));if(f.rejected.match(l)){const e=((c=l.payload)==null?void 0:c.msg)||"Đã xảy ra sự cố khi xóa danh mục.";j(e)}else{const e=((m=l.payload)==null?void 0:m.msg)||"Danh mục của bạn đã bị xóa.";z(e),a(p({page:i,search:n}))}}catch{j("Đã xảy ra sự cố khi xóa danh mục.")}})},z=s=>{x.fire({title:"Đã xóa!",text:s,icon:"success",customClass:{confirmButton:"bg-blue-500 md:bg-green-500"}})},j=s=>{x.fire({title:"Lỗi!",text:s,icon:"error",customClass:{confirmButton:"bg-red-600"}})};function J({postId:s,currentPage:a,searchTerm:i}){const n=b(),r="text-xl text-default-500 pointer-events-none flex-shrink-0";return t.jsxs(k,{children:[t.jsx(T,{children:t.jsx(D,{variant:"bordered",children:"Tùy chọn"})}),t.jsxs(S,{"aria-label":"Static Actions",children:[t.jsx(g,{startContent:t.jsx(N,{className:r}),children:t.jsx(w,{to:`/admin/edit-post/${s}`,children:"Sửa bài viết"})},"new"),t.jsx(g,{className:"text-danger",color:"danger",startContent:t.jsx(_,{className:r}),onClick:()=>q(s,n,a,i),children:"Xóa bài viết"},"delete")]})]})}const K=()=>{const s=b(),[a]=u.useState(""),i=h(e=>{var o;return((o=e.post.listPost.pagination)==null?void 0:o.currentPage)||1}),n=h(e=>{var o;return((o=e.post.listPost.pagination)==null?void 0:o.totalPages)||1}),r=h(e=>e.post.listPost.posts||[]);u.useEffect(()=>{s(p({page:i,search:a}))},[s,i,a]);const c=e=>{s(p({page:e,search:a}))},m=(e,o)=>{switch(o){case"image":return t.jsx("div",{className:"flex items-center ",children:t.jsx("img",{src:e.thumbnail[0],className:"rounded-lg w-16 md:w-32 max-w-full max-h-full sm:w-24 sm:min-w-[96px] sm:min-h-[96px]",alt:e.title})});case"title":const d=e.title;return t.jsx(U,{content:d,delay:0,children:t.jsx("span",{children:d.length>20?`${d.substring(0,20)}...`:d})});case"status":return t.jsx(F,{color:e.status==="active"?"success":"danger",children:e.status==="active"?"Hiển thị":"Đã ẩn"});case"actions":return t.jsx(J,{postId:e._id,currentPage:i,searchTerm:a});default:return null}},l=[{uid:"image",name:"Hình ảnh"},{uid:"title",name:"Tiêu đề bài viết"},{uid:"status",name:"Trạng thái"},{uid:"actions",name:"Chức năng"}];return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex flex-col md:flex-row items-stretch md:items-center md:space-x-3 space-y-3 md:space-y-0 justify-between mx-4 py-4 border-t dark:border-gray-700",children:[t.jsx(V,{}),t.jsx(v,{type:"addPost"})]}),r.length===0&&a?t.jsx(B,{}):r.length===0?t.jsx(L,{}):t.jsxs(E,{"aria-label":"Product Variants Table",className:"p-4",children:[t.jsx(M,{columns:l,children:e=>t.jsx(R,{align:e.uid==="actions"?"center":"start",children:e.name},e.uid)}),t.jsx(A,{items:r,children:e=>t.jsx(G,{children:o=>t.jsx(H,{children:m(e,o)})},e._id)})]}),t.jsx("div",{className:"flex justify-center my-4",children:t.jsx(I,{isCompact:!0,loop:!0,showControls:!0,color:"primary",total:n,initialPage:i,onChange:e=>c(e)})})]})},O=()=>{const s=h(a=>a.post.listPost.total||[]);return t.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-3 md:space-y-0 md:space-x-4 p-4",children:t.jsxs("div",{className:"flex-1 flex items-center space-x-2",children:[t.jsxs("h5",{children:[t.jsx("span",{className:"text-gray-500",children:"Tổng có: "}),t.jsx("span",{className:"dark:text-white",children:s})]}),t.jsx("h5",{className:"text-gray-500 dark:text-gray-400 ml-1",children:"Bài viết"})]})})},Vt=()=>t.jsxs("div",{children:[t.jsx(X,{items:$.listPost}),t.jsx("div",{className:"mb-4 ml-4 col-span-full xl:mb-2",children:t.jsx("h1",{className:"text-xl font-semibold text-gray-900 sm:text-2xl dark:text-white",children:"Danh sách bài viết"})}),t.jsx("section",{className:"bg-gray-50 dark:bg-gray-900 p-3 sm:p-5 antialiased",children:t.jsx("div",{className:"mb-4 col-span-full xl:mb-2",children:t.jsxs("div",{className:"bg-white dark:bg-gray-800 relative border shadow-md sm:rounded-lg overflow-hidden",children:[t.jsx(O,{}),t.jsx("div",{className:"overflow-x-auto",children:t.jsx(K,{})})]})})})]});export{Vt as default};
