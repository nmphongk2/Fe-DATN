import{j as e,r as q,f as F,g as I,bF as P}from"./index-B8WTsAS6.js";import{u as S}from"./index.esm-CH-ucXk-.js";import{Q as M}from"./react-toastify.esm-BnAFxftJ.js";/* empty css                      */import{n as A,a as C}from"./msgtoast-BPgOMtRW.js";import{R as B,b as D}from"./ReusableBreadcrumb-D5trGug1.js";import{u as R}from"./useImageUpload-SC4Y6V6O.js";import{S as V}from"./SubmitButtonAdd-BRQNU-dj.js";import{P as E}from"./product_description-BGirb00P.js";import{u as G,F as o,a as n}from"./selectFetchData-DpwuxXlo.js";import"./clsx-B-dksMZM.js";import"./numericFormatWrapper-BQSre79J.js";import"./react-number-format.es-D6o-XRFQ.js";const K=({imgPreview:r,register:l,handleImageChange:t,error:d})=>e.jsx("div",{className:"p-4 mb-4 bg-white border border-gray-200 rounded-lg shadow-sm dark:border-gray-700 sm:p-6 dark:bg-gray-800",children:e.jsxs("div",{className:"items-center sm:flex xl:block 2xl:flex sm:space-x-4 xl:space-x-0 2xl:space-x-4",children:[r&&e.jsx("div",{className:"mb-4 rounded-lg w-24 h-24 sm:mb-0 xl:mb-4 2xl:mb-0",children:e.jsx("img",{src:r,alt:"Image Preview"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"mb-1 text-xl font-bold text-gray-900 dark:text-white",children:"Hình ảnh"}),e.jsx("div",{className:"mb-4 text-sm text-gray-500 dark:text-gray-400",children:"JPG, GIF or PNG. Max size of 800KB"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("input",{type:"file",multiple:!0,id:"image",...l("image"),onChange:t,className:"block w-full text-sm text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 dark:text-gray-400 focus:outline-none dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400"}),d&&e.jsx("span",{className:"text-red-600",children:d})]})]})]})}),L=()=>{var c,g,u,p,x;const{register:r,setValue:l,control:t,handleSubmit:d,formState:{errors:s}}=S({}),[h,m]=q.useState(!1),b=F(),{imgPreview:f,handleImageChange:j}=R(),y=I(),{categories:v,brands:N,conditionShopping:k,suppliers:_}=G(),w=async a=>{m(!0);try{const i=await b(P(a)).unwrap();A(i.msg),setTimeout(()=>{y("/admin/listproduct")},2e3)}catch(i){const T=i.msg||"Có lỗi xảy ra khi thêm sản phẩm";C(T),m(!1)}};return e.jsxs("form",{onSubmit:d(w),encType:"multipart/form-data",children:[e.jsx(M,{}),e.jsx(B,{items:D.addProducts}),e.jsx("div",{className:"mb-4 ml-4 col-span-full xl:mb-2",children:e.jsx("h1",{className:"text-xl font-semibold text-gray-900 sm:text-2xl dark:text-white",children:"Thêm sản phẩm"})}),e.jsxs("div",{className:"grid grid-cols-[1fr_2fr] px-4 pt-4 xl:grid-cols-[1fr_2fr] xl:gap-4 dark:bg-gray-900",children:[e.jsxs("div",{className:"col-span-full xl:col-auto",children:[e.jsx(K,{imgPreview:f,register:r,handleImageChange:j,error:(c=s.image)==null?void 0:c.message}),e.jsx("div",{className:"p-4 mb-4 bg-white border border-gray-200 rounded-lg shadow-sm dark:border-gray-700 sm:p-6 dark:bg-gray-800",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(o,{label:"Danh mục",id:"product_type",options:(v||[]).map(a=>({_id:a._id,name:a.name})),register:r,validation:{required:"Danh mục mua sắm là bắt buộc"},errorMessage:(g=s.product_type)==null?void 0:g.message}),e.jsx(o,{label:"Thương hiệu",id:"product_brand",options:(N||[]).map(a=>({_id:a._id,name:a.name})),register:r,validation:{required:"Thương hiệu mua sắm là bắt buộc"},errorMessage:(u=s.product_brand)==null?void 0:u.message}),e.jsx(o,{label:"Nhà cung cấp",id:"product_supplier",options:(_||[]).map(a=>({_id:a._id,name:a.name})),register:r,validation:{required:"Nhà cung cấp mua sắm là bắt buộc"},errorMessage:(p=s.product_supplier)==null?void 0:p.message})]})})]}),e.jsx("div",{className:"col-span-full xl:col-auto",children:e.jsxs("div",{className:"p-4 mb-4 bg-white border border-gray-200 rounded-lg shadow-sm 2xl:col-span-2 dark:border-gray-700 sm:p-6 dark:bg-gray-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[" ",e.jsx("h3",{className:"text-xl font-semibold dark:text-white",children:"Tổng quan sản phẩm"})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-6",children:[e.jsx(n,{id:"product_name",label:"Tên sản phẩm",placeholder:"Bonnie",register:r,control:t,error:s.product_name,validation:{required:{value:!0,message:"Tên không được để trống"}}}),e.jsx(n,{id:"weight_g",label:"Trọng lượng (kg)",format:!0,suffix:" g",register:r,control:t,error:s.weight_g,validation:{required:"Khối lượng không được bỏ trống",min:{value:.01,message:"Khối lượng phải lớn hơn 0"}},onValueChange:a=>{const{floatValue:i}=a;l("weight_g",i??0)}}),e.jsx(n,{id:"createdAt",label:"Ngày nhập",type:"date",register:r,control:t,error:s.createdAt,validation:{required:"Ngày nhập không được bỏ trống"}}),e.jsx(o,{label:"Điều kiện mua sắm",id:"product_condition",options:(k||[]).map(a=>({_id:a._id,name:a.nameCondition})),register:r,validation:{required:"Điều kiện mua sắm là bắt buộc"},errorMessage:(x=s.product_condition)==null?void 0:x.message})]}),e.jsx(E,{register:r,errors:s}),e.jsx("div",{className:"col-span-6 sm:col-full",children:e.jsx(V,{isLoading:h})})]})})]})]})},re=()=>e.jsx(L,{});export{re as default};
