import{_ as r}from"./index-B8WTsAS6.js";const i=async t=>{try{return(await r.get(`/client/product/${t}`)).data}catch(e){return{success:!1,err:1,msg:"Lỗi",status:500,product:null,error:e.message}}},u=async t=>{try{return(await r.get(`/client/product/shopping/${t}`)).data}catch(e){return{success:!1,err:1,msg:"Lỗi",status:500,products:[],error:e.message}}},p=async t=>{const e=JSON.parse(localStorage.getItem("viewedProducts")||"[]"),o=e.find(s=>s.id===t);if(o){if(Date.now()-o.timestamp<2*60*1e3)return{message:"Product already viewed recently"};{const a=e.filter(c=>c.id!==t);localStorage.setItem("viewedProducts",JSON.stringify(a))}}return e.push({id:t,timestamp:Date.now()}),localStorage.setItem("viewedProducts",JSON.stringify(e)),setTimeout(async()=>{const s=await r.put(`/client/product/upView/${t}`,{},{headers:{"Content-Type":"multipart/form-data"}}),c=JSON.parse(localStorage.getItem("viewedProducts")||"[]").filter(n=>n.id!==t);return localStorage.setItem("viewedProducts",JSON.stringify(c)),s.data},2*60*1e3),{message:"View will be counted after 5 seconds"}},l=async t=>{try{const e=encodeURIComponent(t);return(await r.get(`/client/product/search/${e}`)).data}catch(e){console.log(e)}};export{i as a,u as g,l as s,p as u};
