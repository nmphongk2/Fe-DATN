import{j as fe,d as W,e as de,k as ge,l as ne,g as w,m as pe,n as q,i as B,a as ve}from"./useFocusWithin-Cnv4cfRz.js";import{b as _,d as ye,c as $e}from"./focusSafely-7dc_zii7.js";import{r as y,R as ae}from"./index-B8WTsAS6.js";import{_ as J,a as Te,b as be}from"./_class_private_field_set-DiTYLpP0.js";import{$ as V,d as he}from"./filterDOMProps-B3AneKiX.js";import{a as I}from"./useEffectEvent-Cg1JSw20.js";const Pe=y.createContext({isNative:!0,open:Ke,useHref:t=>t});function me(){return y.useContext(Pe)}function A(t,n,s=!0){var o,l;let{metaKey:d,ctrlKey:c,altKey:p,shiftKey:v}=n;fe()&&(!((l=window.event)===null||l===void 0||(o=l.type)===null||o===void 0)&&o.startsWith("key"))&&t.target==="_blank"&&(W()?d=!0:c=!0);let b=de()&&W()&&!ge()?new KeyboardEvent("keydown",{keyIdentifier:"Enter",metaKey:d,ctrlKey:c,altKey:p,shiftKey:v}):new MouseEvent("click",{metaKey:d,ctrlKey:c,altKey:p,shiftKey:v,bubbles:!0,cancelable:!0});A.isOpening=s,_(t),t.dispatchEvent(b),A.isOpening=!1}A.isOpening=!1;function Ee(t,n){if(t instanceof HTMLAnchorElement)n(t);else if(t.hasAttribute("data-href")){let s=document.createElement("a");s.href=t.getAttribute("data-href"),t.hasAttribute("data-target")&&(s.target=t.getAttribute("data-target")),t.hasAttribute("data-rel")&&(s.rel=t.getAttribute("data-rel")),t.hasAttribute("data-download")&&(s.download=t.getAttribute("data-download")),t.hasAttribute("data-ping")&&(s.ping=t.getAttribute("data-ping")),t.hasAttribute("data-referrer-policy")&&(s.referrerPolicy=t.getAttribute("data-referrer-policy")),t.appendChild(s),n(s),t.removeChild(s)}}function Ke(t,n){Ee(t,s=>A(s,n))}function Fe(t){return{"data-href":t.href,"data-target":t.target,"data-rel":t.rel,"data-download":t.download,"data-ping":t.ping,"data-referrer-policy":t.referrerPolicy}}function He(t){let n=me();var s;const o=n.useHref((s=t==null?void 0:t.href)!==null&&s!==void 0?s:"");return{href:t!=null&&t.href?o:void 0,target:t==null?void 0:t.target,rel:t==null?void 0:t.rel,download:t==null?void 0:t.download,ping:t==null?void 0:t.ping,referrerPolicy:t==null?void 0:t.referrerPolicy}}function Se(){let t=y.useRef(new Map),n=y.useCallback((l,d,c,p)=>{let v=p!=null&&p.once?(...b)=>{t.current.delete(c),c(...b)}:c;t.current.set(c,{type:d,eventTarget:l,fn:v,options:p}),l.addEventListener(d,c,p)},[]),s=y.useCallback((l,d,c,p)=>{var v;let b=((v=t.current.get(c))===null||v===void 0?void 0:v.fn)||c;l.removeEventListener(d,b,p),t.current.delete(c)},[]),o=y.useCallback(()=>{t.current.forEach((l,d)=>{s(l.eventTarget,l.type,d,l.options)})},[s]);return y.useEffect(()=>o,[o]),{addGlobalListener:n,removeGlobalListener:s,removeAllGlobalListeners:o}}let L="default",N="",Y=new WeakMap;function Q(t){if(ne()){if(L==="default"){const n=w(t);N=n.documentElement.style.webkitUserSelect,n.documentElement.style.webkitUserSelect="none"}L="disabled"}else(t instanceof HTMLElement||t instanceof SVGElement)&&(Y.set(t,t.style.userSelect),t.style.userSelect="none")}function F(t){if(ne()){if(L!=="disabled")return;L="restoring",setTimeout(()=>{ye(()=>{if(L==="restoring"){const n=w(t);n.documentElement.style.webkitUserSelect==="none"&&(n.documentElement.style.webkitUserSelect=N||""),N="",L="default"}})},300)}else if((t instanceof HTMLElement||t instanceof SVGElement)&&t&&Y.has(t)){let n=Y.get(t);t.style.userSelect==="none"&&(t.style.userSelect=n),t.getAttribute("style")===""&&t.removeAttribute("style"),Y.delete(t)}}const ie=ae.createContext({register:()=>{}});ie.displayName="PressResponderContext";function xe(t){let n=y.useContext(ie);if(n){let{register:s,...o}=n;t=V(o,t),s()}return $e(n,t.ref),t}var H=new WeakMap;class X{continuePropagation(){J(this,H,!1)}get shouldStopPropagation(){return Te(this,H)}constructor(n,s,o,l){be(this,H,{writable:!0,value:void 0}),J(this,H,!0);var d;let c=(d=l==null?void 0:l.target)!==null&&d!==void 0?d:o.currentTarget;const p=c==null?void 0:c.getBoundingClientRect();let v,b=0,T,D=null;o.clientX!=null&&o.clientY!=null&&(T=o.clientX,D=o.clientY),p&&(T!=null&&D!=null?(v=T-p.left,b=D-p.top):(v=p.width/2,b=p.height/2)),this.type=n,this.pointerType=s,this.target=o.currentTarget,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.x=v,this.y=b}}const Z=Symbol("linkClicked");function Xe(t){let{onPress:n,onPressChange:s,onPressStart:o,onPressEnd:l,onPressUp:d,isDisabled:c,isPressed:p,preventFocusOnPress:v,shouldCancelOnPointerExit:b,allowTextSelectionOnPress:T,ref:D,...le}=xe(t),[ue,z]=y.useState(!1),k=y.useRef({isPressed:!1,ignoreEmulatedMouseEvents:!1,ignoreClickAfterPress:!1,didFirePressStart:!1,isTriggeringEvent:!1,activePointerId:null,target:null,isOverTarget:!1,pointerType:null}),{addGlobalListener:K,removeAllGlobalListeners:M}=Se(),P=I((e,u)=>{let h=k.current;if(c||h.didFirePressStart)return!1;let i=!0;if(h.isTriggeringEvent=!0,o){let g=new X("pressstart",u,e);o(g),i=g.shouldStopPropagation}return s&&s(!0),h.isTriggeringEvent=!1,h.didFirePressStart=!0,z(!0),i}),$=I((e,u,h=!0)=>{let i=k.current;if(!i.didFirePressStart)return!1;i.ignoreClickAfterPress=!0,i.didFirePressStart=!1,i.isTriggeringEvent=!0;let g=!0;if(l){let r=new X("pressend",u,e);l(r),g=r.shouldStopPropagation}if(s&&s(!1),z(!1),n&&h&&!c){let r=new X("press",u,e);n(r),g&&(g=r.shouldStopPropagation)}return i.isTriggeringEvent=!1,g}),O=I((e,u)=>{let h=k.current;if(c)return!1;if(d){h.isTriggeringEvent=!0;let i=new X("pressup",u,e);return d(i),h.isTriggeringEvent=!1,i.shouldStopPropagation}return!0}),x=I(e=>{let u=k.current;u.isPressed&&u.target&&(u.isOverTarget&&u.pointerType!=null&&$(E(u.target,e),u.pointerType,!1),u.isPressed=!1,u.isOverTarget=!1,u.activePointerId=null,u.pointerType=null,M(),T||F(u.target))}),U=I(e=>{b&&x(e)}),ce=y.useMemo(()=>{let e=k.current,u={onKeyDown(i){if(G(i.nativeEvent,i.currentTarget)&&i.currentTarget.contains(i.target)){var g;te(i.target,i.key)&&i.preventDefault();let r=!0;if(!e.isPressed&&!i.repeat){e.target=i.currentTarget,e.isPressed=!0,r=P(i,"keyboard");let f=i.currentTarget,a=m=>{G(m,f)&&!m.repeat&&f.contains(m.target)&&e.target&&O(E(e.target,m),"keyboard")};K(w(i.currentTarget),"keyup",he(a,h),!0)}r&&i.stopPropagation(),i.metaKey&&W()&&((g=e.metaKeyEvents)===null||g===void 0||g.set(i.key,i.nativeEvent))}else i.key==="Meta"&&(e.metaKeyEvents=new Map)},onClick(i){if(!(i&&!i.currentTarget.contains(i.target))&&i&&i.button===0&&!e.isTriggeringEvent&&!A.isOpening){let g=!0;if(c&&i.preventDefault(),!e.ignoreClickAfterPress&&!e.ignoreEmulatedMouseEvents&&!e.isPressed&&(e.pointerType==="virtual"||q(i.nativeEvent))){!c&&!v&&_(i.currentTarget);let r=P(i,"virtual"),f=O(i,"virtual"),a=$(i,"virtual");g=r&&f&&a}e.ignoreEmulatedMouseEvents=!1,e.ignoreClickAfterPress=!1,g&&i.stopPropagation()}}},h=i=>{var g;if(e.isPressed&&e.target&&G(i,e.target)){var r;te(i.target,i.key)&&i.preventDefault();let a=i.target;$(E(e.target,i),"keyboard",e.target.contains(a)),M(),i.key!=="Enter"&&j(e.target)&&e.target.contains(a)&&!i[Z]&&(i[Z]=!0,A(e.target,i,!1)),e.isPressed=!1,(r=e.metaKeyEvents)===null||r===void 0||r.delete(i.key)}else if(i.key==="Meta"&&(!((g=e.metaKeyEvents)===null||g===void 0)&&g.size)){var f;let a=e.metaKeyEvents;e.metaKeyEvents=void 0;for(let m of a.values())(f=e.target)===null||f===void 0||f.dispatchEvent(new KeyboardEvent("keyup",m))}};if(typeof PointerEvent<"u"){u.onPointerDown=a=>{if(a.button!==0||!a.currentTarget.contains(a.target))return;if(pe(a.nativeEvent)){e.pointerType="virtual";return}R(a.currentTarget)&&a.preventDefault(),e.pointerType=a.pointerType;let m=!0;e.isPressed||(e.isPressed=!0,e.isOverTarget=!0,e.activePointerId=a.pointerId,e.target=a.currentTarget,!c&&!v&&_(a.currentTarget),T||Q(e.target),m=P(a,e.pointerType),K(w(a.currentTarget),"pointermove",i,!1),K(w(a.currentTarget),"pointerup",g,!1),K(w(a.currentTarget),"pointercancel",f,!1)),m&&a.stopPropagation()},u.onMouseDown=a=>{a.currentTarget.contains(a.target)&&a.button===0&&(R(a.currentTarget)&&a.preventDefault(),a.stopPropagation())},u.onPointerUp=a=>{!a.currentTarget.contains(a.target)||e.pointerType==="virtual"||a.button===0&&C(a,a.currentTarget)&&O(a,e.pointerType||a.pointerType)};let i=a=>{a.pointerId===e.activePointerId&&(e.target&&C(a,e.target)?!e.isOverTarget&&e.pointerType!=null&&(e.isOverTarget=!0,P(E(e.target,a),e.pointerType)):e.target&&e.isOverTarget&&e.pointerType!=null&&(e.isOverTarget=!1,$(E(e.target,a),e.pointerType,!1),U(a)))},g=a=>{a.pointerId===e.activePointerId&&e.isPressed&&a.button===0&&e.target&&(C(a,e.target)&&e.pointerType!=null?$(E(e.target,a),e.pointerType):e.isOverTarget&&e.pointerType!=null&&$(E(e.target,a),e.pointerType,!1),e.isPressed=!1,e.isOverTarget=!1,e.activePointerId=null,e.pointerType=null,M(),T||F(e.target),"ontouchend"in e.target&&a.pointerType!=="mouse"&&K(e.target,"touchend",r,{once:!0}))},r=a=>{se(a.currentTarget)&&a.preventDefault()},f=a=>{x(a)};u.onDragStart=a=>{a.currentTarget.contains(a.target)&&x(a)}}else{u.onMouseDown=r=>{if(r.button!==0||!r.currentTarget.contains(r.target))return;if(R(r.currentTarget)&&r.preventDefault(),e.ignoreEmulatedMouseEvents){r.stopPropagation();return}e.isPressed=!0,e.isOverTarget=!0,e.target=r.currentTarget,e.pointerType=q(r.nativeEvent)?"virtual":"mouse",!c&&!v&&_(r.currentTarget),P(r,e.pointerType)&&r.stopPropagation(),K(w(r.currentTarget),"mouseup",i,!1)},u.onMouseEnter=r=>{if(!r.currentTarget.contains(r.target))return;let f=!0;e.isPressed&&!e.ignoreEmulatedMouseEvents&&e.pointerType!=null&&(e.isOverTarget=!0,f=P(r,e.pointerType)),f&&r.stopPropagation()},u.onMouseLeave=r=>{if(!r.currentTarget.contains(r.target))return;let f=!0;e.isPressed&&!e.ignoreEmulatedMouseEvents&&e.pointerType!=null&&(e.isOverTarget=!1,f=$(r,e.pointerType,!1),U(r)),f&&r.stopPropagation()},u.onMouseUp=r=>{r.currentTarget.contains(r.target)&&!e.ignoreEmulatedMouseEvents&&r.button===0&&O(r,e.pointerType||"mouse")};let i=r=>{if(r.button===0){if(e.isPressed=!1,M(),e.ignoreEmulatedMouseEvents){e.ignoreEmulatedMouseEvents=!1;return}e.target&&C(r,e.target)&&e.pointerType!=null?$(E(e.target,r),e.pointerType):e.target&&e.isOverTarget&&e.pointerType!=null&&$(E(e.target,r),e.pointerType,!1),e.isOverTarget=!1}};u.onTouchStart=r=>{if(!r.currentTarget.contains(r.target))return;let f=we(r.nativeEvent);if(!f)return;e.activePointerId=f.identifier,e.ignoreEmulatedMouseEvents=!0,e.isOverTarget=!0,e.isPressed=!0,e.target=r.currentTarget,e.pointerType="touch",!c&&!v&&_(r.currentTarget),T||Q(e.target),P(S(e.target,r),e.pointerType)&&r.stopPropagation(),K(B(r.currentTarget),"scroll",g,!0)},u.onTouchMove=r=>{if(!r.currentTarget.contains(r.target))return;if(!e.isPressed){r.stopPropagation();return}let f=ee(r.nativeEvent,e.activePointerId),a=!0;f&&C(f,r.currentTarget)?!e.isOverTarget&&e.pointerType!=null&&(e.isOverTarget=!0,a=P(S(e.target,r),e.pointerType)):e.isOverTarget&&e.pointerType!=null&&(e.isOverTarget=!1,a=$(S(e.target,r),e.pointerType,!1),U(S(e.target,r))),a&&r.stopPropagation()},u.onTouchEnd=r=>{if(!r.currentTarget.contains(r.target))return;if(!e.isPressed){r.stopPropagation();return}let f=ee(r.nativeEvent,e.activePointerId),a=!0;f&&C(f,r.currentTarget)&&e.pointerType!=null?(O(S(e.target,r),e.pointerType),a=$(S(e.target,r),e.pointerType)):e.isOverTarget&&e.pointerType!=null&&(a=$(S(e.target,r),e.pointerType,!1)),a&&r.stopPropagation(),e.isPressed=!1,e.activePointerId=null,e.isOverTarget=!1,e.ignoreEmulatedMouseEvents=!0,e.target&&!T&&F(e.target),M()},u.onTouchCancel=r=>{r.currentTarget.contains(r.target)&&(r.stopPropagation(),e.isPressed&&x(S(e.target,r)))};let g=r=>{e.isPressed&&r.target.contains(e.target)&&x({currentTarget:e.target,shiftKey:!1,ctrlKey:!1,metaKey:!1,altKey:!1})};u.onDragStart=r=>{r.currentTarget.contains(r.target)&&x(r)}}return u},[K,c,v,M,T,x,U,$,P,O]);return y.useEffect(()=>()=>{var e;T||F((e=k.current.target)!==null&&e!==void 0?e:void 0)},[T]),{isPressed:p||ue,pressProps:V(le,ce)}}function j(t){return t.tagName==="A"&&t.hasAttribute("href")}function G(t,n){const{key:s,code:o}=t,l=n,d=l.getAttribute("role");return(s==="Enter"||s===" "||s==="Spacebar"||o==="Space")&&!(l instanceof B(l).HTMLInputElement&&!oe(l,s)||l instanceof B(l).HTMLTextAreaElement||l.isContentEditable)&&!((d==="link"||!d&&j(l))&&s!=="Enter")}function we(t){const{targetTouches:n}=t;return n.length>0?n[0]:null}function ee(t,n){const s=t.changedTouches;for(let o=0;o<s.length;o++){const l=s[o];if(l.identifier===n)return l}return null}function S(t,n){let s=0,o=0;return n.targetTouches&&n.targetTouches.length===1&&(s=n.targetTouches[0].clientX,o=n.targetTouches[0].clientY),{currentTarget:t,shiftKey:n.shiftKey,ctrlKey:n.ctrlKey,metaKey:n.metaKey,altKey:n.altKey,clientX:s,clientY:o}}function E(t,n){let s=n.clientX,o=n.clientY;return{currentTarget:t,shiftKey:n.shiftKey,ctrlKey:n.ctrlKey,metaKey:n.metaKey,altKey:n.altKey,clientX:s,clientY:o}}function ke(t){let n=0,s=0;return t.width!==void 0?n=t.width/2:t.radiusX!==void 0&&(n=t.radiusX),t.height!==void 0?s=t.height/2:t.radiusY!==void 0&&(s=t.radiusY),{top:t.clientY-s,right:t.clientX+n,bottom:t.clientY+s,left:t.clientX-n}}function Me(t,n){return!(t.left>n.right||n.left>t.right||t.top>n.bottom||n.top>t.bottom)}function C(t,n){let s=n.getBoundingClientRect(),o=ke(t);return Me(s,o)}function R(t){return!(t instanceof HTMLElement)||!t.hasAttribute("draggable")}function se(t){return t instanceof HTMLInputElement?!1:t instanceof HTMLButtonElement?t.type!=="submit"&&t.type!=="reset":!j(t)}function te(t,n){return t instanceof HTMLInputElement?!oe(t,n):se(t)}const Oe=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function oe(t,n){return t.type==="checkbox"||t.type==="radio"?n===" ":Oe.has(t.type)}const re={border:0,clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"};function Ce(t={}){let{style:n,isFocusable:s}=t,[o,l]=y.useState(!1),{focusWithinProps:d}=ve({isDisabled:!s,onFocusWithinChange:p=>l(p)}),c=y.useMemo(()=>o?n:n?{...re,...n}:re,[o]);return{visuallyHiddenProps:{...d,style:c}}}function Ye(t){let{children:n,elementType:s="div",isFocusable:o,style:l,...d}=t,{visuallyHiddenProps:c}=Ce(t);return ae.createElement(s,V(d,c),n)}export{Xe as $,He as a,Ye as b,Ce as c,me as d,A as e,ie as f,Se as g,Fe as h};
