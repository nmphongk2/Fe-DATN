import{f as L,z as P,h as R,r as g,g as K,cC as H,j as a,cD as M}from"./index-B8WTsAS6.js";/* empty css                      */import{Q as $,B as A}from"./react-toastify.esm-BnAFxftJ.js";import{w as z}from"./sweetalert2-react-content.es-_20BSG7l.js";import{S as F}from"./sweetalert2.all-CanRnygg.js";import{p as G}from"./chunk-5A5NBK2V-B8-r7H_u.js";import{b as l}from"./chunk-DBLREEYE-KYxkDfWC.js";import{R as Q,b as q}from"./ReusableBreadcrumb-D5trGug1.js";import"./clsx-B-dksMZM.js";import"./chunk-N2KXC5ZE-mxrXGXiM.js";import"./chunk-XHQUSKIE-BwnSvnTo.js";import"./chunk-MNNRULGA-Ck-UmubQ.js";import"./index-D8A0NvNB.js";import"./filterDOMProps-B3AneKiX.js";import"./useEffectEvent-Cg1JSw20.js";import"./number-DfkVkf0F.js";import"./useLabel-C_525Utu.js";import"./useLabels-C5NmhLsG.js";import"./_class_private_field_set-DiTYLpP0.js";import"./chunk-BZCSOIUI-ECjOxws-.js";import"./chunk-6NL67ZRH-ST4yRtyp.js";import"./features-animation-BrpZblPW.js";import"./chunk-TDOFO53L-BhVz0FjF.js";const U=z(F),X=()=>{var u,p,N,b,j,f,y,w;const m=L(),{id:x}=P(),{order:r,items:o}=R(s=>s.order);console.log("Order data:",r,o);const n=Array.isArray(r)?r.find(s=>s._id===x):r,[d,e]=g.useState(""),[D,c]=g.useState(0),V=K();g.useEffect(()=>{x&&m(H(x))},[m,x]),g.useEffect(()=>{switch(n==null?void 0:n.stateOrder){case"Chờ xử lý":c(25);break;case"Đã xác nhận":c(50);break;case"Đang vận chuyển":c(75);break;case"Hoàn tất":c(100);break;default:c(0)}},[n==null?void 0:n.stateOrder]);const E=()=>{V("/admin/listOrders")},i=async()=>{if(n&&(n!=null&&n._id)&&d&&(await U.fire({title:"Xác nhận cập nhật trạng thái?",text:`Bạn có chắc chắn muốn cập nhật trạng thái đơn hàng thành "${d}" không?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Có",cancelButtonText:"Hủy"})).isConfirmed)try{const t=await m(M({orderId:n==null?void 0:n._id,stateOrder:d})).unwrap();await m(H(n==null?void 0:n._id)),A.success(t.stateOrder?`Trạng thái đơn hàng đã được cập nhật thành "${t.stateOrder}"!`:"Cập nhật thành công!")}catch(t){let h="Đã xảy ra lỗi khi cập nhật trạng thái đơn hàng.";t instanceof Error&&(h=t.message),A.error(h)}},I=()=>{switch(n==null?void 0:n.stateOrder){case"Chờ xử lý":return a.jsx(l,{onClick:()=>{e("Đã xác nhận"),i()},className:"mt-4 bg-green-500 text-white",children:"Đã xác nhận"});case"Đã xác nhận":return a.jsx(l,{onClick:()=>{e("Đang vận chuyển"),i()},className:"mt-4 bg-yellow-500 text-white",children:"Đang vận chuyển"});case"Đang vận chuyển":return a.jsxs(a.Fragment,{children:[a.jsx(l,{onClick:()=>{e("Hoàn tất"),i()},className:"mt-4 bg-blue-500 text-white",children:"Hoàn tất"}),a.jsx(l,{onClick:()=>{e("Giao hàng không thành công"),i()},className:"mt-4 bg-red-500 text-white",children:"Giao hàng không thành công"}),(n==null?void 0:n.payment.payment_method)!=="Thanh toán khi nhận hàng"&&a.jsx(l,{onClick:()=>{e("Đã hoàn tiền"),i()},className:"mt-4 bg-purple-500 text-white",children:"Hoàn tiền"})]});case"Hoàn tất":return a.jsx("p",{className:"mt-4 text-gray-500",children:"Đơn hàng đã hoàn tất"});case"Hủy đơn hàng":return a.jsx(a.Fragment,{children:(n==null?void 0:n.payment.payment_method)!=="Thanh toán khi nhận hàng"&&a.jsx(l,{onClick:()=>{e("Đã hoàn tiền"),i()},className:"mt-4 bg-purple-500 text-white",children:"Hoàn tiền"})});default:return null}};return r?a.jsxs("main",{className:"w-full flex-grow p-6 bg-gray-50",children:[a.jsxs("div",{className:"max-w-4xl mx-auto",children:[a.jsxs("section",{className:"mb-8 bg-white rounded-lg shadow-lg p-6 hover:shadow-xl transition-shadow duration-300",children:[a.jsx("h2",{className:"text-2xl font-bold mb-4 text-gray-800",children:"Thông Tin Đơn Hàng"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("p",{className:"text-lg mb-2 text-gray-700",children:[a.jsx("span",{className:"font-medium",children:"Mã đơn hàng:"})," #",(n==null?void 0:n._id)||"null"]}),a.jsxs("p",{className:"text-lg mb-2 text-gray-700",children:[a.jsx("span",{className:"font-medium",children:"Ngày đặt:"})," ",new Date((n==null?void 0:n.createdAt)||"null").toLocaleDateString()]}),a.jsxs("p",{className:"text-lg text-red-600 mb-2",children:[a.jsx("span",{className:"font-medium",children:"Tổng tiền:"})," ",((u=n==null?void 0:n.totalAmount)==null?void 0:u.toLocaleString())||"0"," VND"]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"text-lg font-medium mb-2 block",children:"Trạng thái:"}),a.jsx("p",{children:n==null?void 0:n.stateOrder})]}),I()]}),a.jsxs("div",{className:"mt-4",children:[a.jsx("label",{className:"text-lg font-medium mb-2 block",children:"Tiến trình giao hàng:"}),a.jsx(G,{"aria-label":"Order Progress",size:"lg",value:D,color:"success",showValueLabel:!0,className:"max-w-md"})]})]}),a.jsxs("section",{className:"mb-8 bg-white rounded-lg shadow-lg p-6 hover:shadow-xl transition-shadow duration-300",children:[a.jsx("h2",{className:"text-2xl font-bold mb-4 text-gray-800",children:"Thông Tin Khách Hàng"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("p",{className:"text-lg mb-2 text-gray-700",children:[a.jsx("span",{className:"font-medium",children:"Họ tên:"})," ",((p=n==null?void 0:n.shipping)==null?void 0:p.recipientName)||"N/A"]}),a.jsxs("p",{className:"text-lg mb-2 text-gray-700",children:[a.jsx("span",{className:"font-medium",children:"Số điện thoại:"})," ",((N=n==null?void 0:n.shipping)==null?void 0:N.phoneNumber)||"N/A"]}),a.jsxs("p",{className:"text-lg text-gray-700",children:[a.jsx("span",{className:"font-medium",children:"Địa chỉ giao hàng:"})," ",((b=n==null?void 0:n.shipping)==null?void 0:b.address)||"N/A"]})]})]}),((j=n==null?void 0:n.payment)==null?void 0:j.payment_method)!=="Thanh toán khi nhận hàng"&&a.jsxs("section",{className:"mb-8 bg-white rounded-lg shadow-lg p-6 hover:shadow-xl transition-shadow duration-300",children:[a.jsx("h2",{className:"text-2xl font-bold mb-4 text-gray-800",children:"Ngân Hàng Thanh Toán"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("p",{className:"text-lg mb-2 text-gray-700",children:[a.jsx("span",{className:"font-medium",children:"Tên ngân hàng:"})," ",((f=n==null?void 0:n.refundBank)==null?void 0:f.bankName)||"N/A"]}),a.jsxs("p",{className:"text-lg mb-2 text-gray-700",children:[a.jsx("span",{className:"font-medium",children:"Họ tên:"})," ",((y=n==null?void 0:n.refundBank)==null?void 0:y.accountName)||"N/A"]}),a.jsxs("p",{className:"text-lg text-gray-700",children:[a.jsx("span",{className:"font-medium",children:"Số tài khoản:"})," ",((w=n==null?void 0:n.refundBank)==null?void 0:w.accountNumber)||"N/A"]})]})]}),a.jsxs("section",{className:"mb-8 bg-white rounded-lg shadow-lg p-6 hover:shadow-xl transition-shadow duration-300",children:[a.jsx("h2",{className:"text-2xl font-bold mb-4 text-gray-800",children:"Sản Phẩm"}),a.jsx("div",{className:"space-y-4",children:o!=null&&o.length?o.map((s,t)=>{var h,v,k,T,S,C,B,_;return a.jsxs("div",{className:"flex justify-between items-center p-4 bg-gray-100 rounded-lg shadow-md transition-all duration-200 hover:bg-gray-200",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("img",{src:((T=(k=(v=(h=s==null?void 0:s.productVariant)==null?void 0:h.image)==null?void 0:v[0])==null?void 0:k.image)==null?void 0:T[0])||"https://via.placeholder.com/64",alt:((S=s==null?void 0:s.productVariant)==null?void 0:S.variant_name)||"No Image",className:"w-16 h-16 object-cover rounded-md"}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-lg text-gray-800",children:((C=s==null?void 0:s.productVariant)==null?void 0:C.variant_name)||"N/A"}),a.jsxs("p",{className:"text-gray-600",children:["Số lượng: ",(s==null?void 0:s.quantity)||0]})]})]}),a.jsx("p",{className:"text-lg text-gray-800",children:(B=s==null?void 0:s.productVariant)!=null&&B.variant_price?`${s.productVariant.variant_price.toLocaleString()} VND`:"0 VND"})]},((_=s==null?void 0:s.product)==null?void 0:_._id)||t)}):a.jsx("p",{className:"text-lg text-gray-600",children:"Không có sản phẩm nào trong đơn hàng"})})]}),a.jsx("button",{onClick:E,className:"w-full bg-blue-600 text-white py-3 rounded-md shadow-lg hover:bg-blue-700 transition duration-300",children:"Quay lại danh sách đơn hàng"})]}),a.jsx($,{})]}):a.jsx("main",{className:"w-full flex-grow p-6",children:a.jsx("p",{children:"Không tìm thấy đơn hàng."})})},ba=()=>a.jsxs("div",{children:[a.jsx(Q,{items:q.listDetailOrder}),a.jsx("div",{className:"mb-4 ml-4 col-span-full xl:mb-2",children:a.jsx("h1",{className:"text-xl font-semibold text-gray-900 sm:text-2xl dark:text-white",children:"Chi tiết đơn hàng"})}),a.jsx("section",{className:"bg-gray-50 dark:bg-gray-900 p-3 sm:p-5 antialiased",children:a.jsx("div",{className:"mb-4 col-span-full xl:mb-2",children:a.jsx("div",{className:"bg-white dark:bg-gray-800 relative shadow-md sm:rounded-lg overflow-hidden",children:a.jsxs("div",{className:"overflow-x-auto",children:[a.jsx(X,{}),a.jsx("nav",{className:"flex flex-col md:flex-row justify-between items-start md:items-center space-y-3 md:space-y-0 p-4","aria-label":"Table navigation"})]})})})})]});export{ba as default};
