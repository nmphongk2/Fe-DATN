import{r as o,aY as me,aZ as de,a_ as pe,a$ as he,b0 as ve,Z as B,b1 as j,b2 as Re,b3 as L,X as xe,b4 as ye}from"./index-B8WTsAS6.js";import{n as _,o as ie,p as we}from"./transition-iMQxfHpN.js";function Ce(e){if(e===null)return{width:0,height:0};let{width:t,height:n}=e.getBoundingClientRect();return{width:t,height:n}}function Ke(e,t=!1){let n=e===null?null:"current"in e?e.current:e,[r,l]=o.useReducer(()=>({}),{}),s=o.useMemo(()=>Ce(n),[n,r]);return _(()=>{if(!n)return;let f=new ResizeObserver(l);return f.observe(n),()=>{f.disconnect()}},[n]),t?{width:`${s.width}px`,height:`${s.height}px`}:s}function be(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}var Y=typeof document<"u"?o.useLayoutEffect:o.useEffect;function V(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,l;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!V(e[r],t[r]))return!1;return!0}if(l=Object.keys(e),n=l.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,l[r]))return!1;for(r=n;r--!==0;){const s=l[r];if(!(s==="_owner"&&e.$$typeof)&&!V(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function ue(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Z(e,t){const n=ue(e);return Math.round(t*n)/n}function Q(e){const t=o.useRef(e);return Y(()=>{t.current=e}),t}function Me(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:l,elements:{reference:s,floating:f}={},transform:u=!0,whileElementsMounted:d,open:m}=e,[g,R]=o.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[v,i]=o.useState(r);V(v,r)||i(r);const[c,a]=o.useState(null),[h,w]=o.useState(null),C=o.useCallback(y=>{y!==E.current&&(E.current=y,a(y))},[]),p=o.useCallback(y=>{y!==H.current&&(H.current=y,w(y))},[]),x=s||c,M=f||h,E=o.useRef(null),H=o.useRef(null),I=o.useRef(g),W=d!=null,N=Q(d),P=Q(l),S=o.useCallback(()=>{if(!E.current||!H.current)return;const y={placement:t,strategy:n,middleware:v};P.current&&(y.platform=P.current),ve(E.current,H.current,y).then(T=>{const b={...T,isPositioned:!0};O.current&&!V(I.current,b)&&(I.current=b,B.flushSync(()=>{R(b)}))})},[v,t,n,P]);Y(()=>{m===!1&&I.current.isPositioned&&(I.current.isPositioned=!1,R(y=>({...y,isPositioned:!1})))},[m]);const O=o.useRef(!1);Y(()=>(O.current=!0,()=>{O.current=!1}),[]),Y(()=>{if(x&&(E.current=x),M&&(H.current=M),x&&M){if(N.current)return N.current(x,M,S);S()}},[x,M,S,N,W]);const $=o.useMemo(()=>({reference:E,floating:H,setReference:C,setFloating:p}),[C,p]),F=o.useMemo(()=>({reference:x,floating:M}),[x,M]),D=o.useMemo(()=>{const y={position:n,left:0,top:0};if(!F.floating)return y;const T=Z(F.floating,g.x),b=Z(F.floating,g.y);return u?{...y,transform:"translate("+T+"px, "+b+"px)",...ue(F.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:T,top:b}},[n,u,F.floating,g.x,g.y]);return o.useMemo(()=>({...g,update:S,refs:$,elements:F,floatingStyles:D}),[g,S,$,F,D])}const fe=(e,t)=>({...me(e),options:[e,t]}),Ee=(e,t)=>({...de(e),options:[e,t]}),Pe=(e,t)=>({...pe(e),options:[e,t]}),Se=(e,t)=>({...he(e),options:[e,t]}),ce={...xe},Fe=ce.useInsertionEffect,He=Fe||(e=>e());function ae(e){const t=o.useRef(()=>{});return He(()=>{t.current=e}),o.useCallback(function(){for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return t.current==null?void 0:t.current(...r)},[])}var K=typeof document<"u"?o.useLayoutEffect:o.useEffect;let ee=!1,Oe=0;const te=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+Oe++;function $e(){const[e,t]=o.useState(()=>ee?te():void 0);return K(()=>{e==null&&t(te())},[]),o.useEffect(()=>{ee=!0},[]),e}const Te=ce.useId,Ie=Te||$e;function De(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(l=>l(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(l=>l!==n))||[])}}}const Ae=o.createContext(null),ke=o.createContext(null),Ne=()=>{var e;return((e=o.useContext(Ae))==null?void 0:e.id)||null},Be=()=>o.useContext(ke);function _e(e){const{open:t=!1,onOpenChange:n,elements:r}=e,l=Ie(),s=o.useRef({}),[f]=o.useState(()=>De()),u=Ne()!=null,[d,m]=o.useState(r.reference),g=ae((i,c,a)=>{s.current.openEvent=i?c:void 0,f.emit("openchange",{open:i,event:c,reason:a,nested:u}),n==null||n(i,c,a)}),R=o.useMemo(()=>({setPositionReference:m}),[]),v=o.useMemo(()=>({reference:d||r.reference||null,floating:r.floating||null,domReference:r.reference}),[d,r.reference,r.floating]);return o.useMemo(()=>({dataRef:s,open:t,onOpenChange:g,elements:v,events:f,floatingId:l,refs:R}),[t,g,v,f,l,R])}function je(e){e===void 0&&(e={});const{nodeId:t}=e,n=_e({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,l=r.elements,[s,f]=o.useState(null),[u,d]=o.useState(null),g=(l==null?void 0:l.reference)||s,R=o.useRef(null),v=Be();K(()=>{g&&(R.current=g)},[g]);const i=Me({...e,elements:{...l,...u&&{reference:u}}}),c=o.useCallback(p=>{const x=j(p)?{getBoundingClientRect:()=>p.getBoundingClientRect(),contextElement:p}:p;d(x),i.refs.setReference(x)},[i.refs]),a=o.useCallback(p=>{(j(p)||p===null)&&(R.current=p,f(p)),(j(i.refs.reference.current)||i.refs.reference.current===null||p!==null&&!j(p))&&i.refs.setReference(p)},[i.refs]),h=o.useMemo(()=>({...i.refs,setReference:a,setPositionReference:c,domReference:R}),[i.refs,a,c]),w=o.useMemo(()=>({...i.elements,domReference:g}),[i.elements,g]),C=o.useMemo(()=>({...i,...r,refs:h,elements:w,nodeId:t}),[i,h,w,t,r]);return K(()=>{r.dataRef.current.floatingContext=C;const p=v==null?void 0:v.nodesRef.current.find(x=>x.id===t);p&&(p.context=C)}),o.useMemo(()=>({...i,context:C,refs:h,elements:w}),[i,h,w,C])}const ne="active",re="selected";function U(e,t,n){const r=new Map,l=n==="item";let s=e;if(l&&e){const{[ne]:f,[re]:u,...d}=e;s=d}return{...n==="floating"&&{tabIndex:-1},...s,...t.map(f=>{const u=f?f[n]:null;return typeof u=="function"?e?u(e):null:u}).concat(e).reduce((f,u)=>(u&&Object.entries(u).forEach(d=>{let[m,g]=d;if(!(l&&[ne,re].includes(m)))if(m.indexOf("on")===0){if(r.has(m)||r.set(m,[]),typeof g=="function"){var R;(R=r.get(m))==null||R.push(g),f[m]=function(){for(var v,i=arguments.length,c=new Array(i),a=0;a<i;a++)c[a]=arguments[a];return(v=r.get(m))==null?void 0:v.map(h=>h(...c)).find(h=>h!==void 0)}}}else f[m]=g}),f),{})}}function Ye(e){e===void 0&&(e=[]);const t=e.map(u=>u==null?void 0:u.reference),n=e.map(u=>u==null?void 0:u.floating),r=e.map(u=>u==null?void 0:u.item),l=o.useCallback(u=>U(u,e,"reference"),t),s=o.useCallback(u=>U(u,e,"floating"),n),f=o.useCallback(u=>U(u,e,"item"),r);return o.useMemo(()=>({getReferenceProps:l,getFloatingProps:s,getItemProps:f}),[l,s,f])}function oe(e,t){return{...e,rects:{...e.rects,floating:{...e.rects.floating,height:t}}}}const Ve=e=>({name:"inner",options:e,async fn(t){const{listRef:n,overflowRef:r,onFallbackChange:l,offset:s=0,index:f=0,minItemsVisible:u=4,referenceOverflowThreshold:d=0,scrollRef:m,...g}=Re(e,t),{rects:R,elements:{floating:v}}=t,i=n.current[f];if(!i)return{};const c={...t,...await fe(-i.offsetTop-v.clientTop-R.reference.height/2-i.offsetHeight/2-s).fn(t)},a=(m==null?void 0:m.current)||v,h=await L(oe(c,a.scrollHeight),g),w=await L(c,{...g,elementContext:"reference"}),C=Math.max(0,h.top),p=c.y+C,x=Math.max(0,a.scrollHeight-C-Math.max(0,h.bottom));return a.style.maxHeight=x+"px",a.scrollTop=C,l&&(a.offsetHeight<i.offsetHeight*Math.min(u,n.current.length-1)-1||w.top>=-d||w.bottom>=-d?B.flushSync(()=>l(!0)):B.flushSync(()=>l(!1))),r&&(r.current=await L(oe({...c,y:p},a.offsetHeight),g)),{y:p}}});function We(e,t){const{open:n,elements:r}=e,{enabled:l=!0,overflowRef:s,scrollRef:f,onChange:u}=t,d=ae(u),m=o.useRef(!1),g=o.useRef(null),R=o.useRef(null);o.useEffect(()=>{if(!l)return;function i(a){if(a.ctrlKey||!c||s.current==null)return;const h=a.deltaY,w=s.current.top>=-.5,C=s.current.bottom>=-.5,p=c.scrollHeight-c.clientHeight,x=h<0?-1:1,M=h<0?"max":"min";c.scrollHeight<=c.clientHeight||(!w&&h>0||!C&&h<0?(a.preventDefault(),B.flushSync(()=>{d(E=>E+Math[M](h,p*x))})):/firefox/i.test(be())&&(c.scrollTop+=h))}const c=(f==null?void 0:f.current)||r.floating;if(n&&c)return c.addEventListener("wheel",i),requestAnimationFrame(()=>{g.current=c.scrollTop,s.current!=null&&(R.current={...s.current})}),()=>{g.current=null,R.current=null,c.removeEventListener("wheel",i)}},[l,n,r.floating,s,f,d]);const v=o.useMemo(()=>({onKeyDown(){m.current=!0},onWheel(){m.current=!1},onPointerMove(){m.current=!1},onScroll(){const i=(f==null?void 0:f.current)||r.floating;if(!(!s.current||!i||!m.current)){if(g.current!==null){const c=i.scrollTop-g.current;(s.current.bottom<-.5&&c<-1||s.current.top<-.5&&c>1)&&B.flushSync(()=>d(a=>a+c))}requestAnimationFrame(()=>{g.current=i.scrollTop})}}}),[r.floating,d,s,f]);return o.useMemo(()=>l?{floating:v}:{},[l,v])}let k=o.createContext({styles:void 0,setReference:()=>{},setFloating:()=>{},getReferenceProps:()=>({}),getFloatingProps:()=>({}),slot:{}});k.displayName="FloatingContext";let G=o.createContext(null);G.displayName="PlacementContext";function Ge(e){return o.useMemo(()=>e?typeof e=="string"?{to:e}:e:null,[e])}function Je(){return o.useContext(k).setReference}function Xe(){return o.useContext(k).getReferenceProps}function Ze(){let{getFloatingProps:e,slot:t}=o.useContext(k);return o.useCallback((...n)=>Object.assign({},e(...n),{"data-anchor":t.anchor}),[e,t])}function Qe(e=null){e===!1&&(e=null),typeof e=="string"&&(e={to:e});let t=o.useContext(G),n=o.useMemo(()=>e,[JSON.stringify(e,typeof HTMLElement<"u"?(l,s)=>s instanceof HTMLElement?s.outerHTML:s:void 0)]);_(()=>{t==null||t(n??null)},[t,n]);let r=o.useContext(k);return o.useMemo(()=>[r.setFloating,e?r.styles:{}],[r.setFloating,e,r.styles])}let le=4;function et({children:e,enabled:t=!0}){let[n,r]=o.useState(null),[l,s]=o.useState(0),f=o.useRef(null),[u,d]=o.useState(null);qe(u);let m=t&&n!==null&&u!==null,{to:g="bottom",gap:R=0,offset:v=0,padding:i=0,inner:c}=Le(n,u),[a,h="center"]=g.split(" ");_(()=>{m&&s(0)},[m]);let{refs:w,floatingStyles:C,context:p}=je({open:m,placement:a==="selection"?h==="center"?"bottom":`bottom-${h}`:h==="center"?`${a}`:`${a}-${h}`,strategy:"absolute",transform:!1,middleware:[fe({mainAxis:a==="selection"?0:R,crossAxis:v}),Ee({padding:i}),a!=="selection"&&Pe({padding:i}),a==="selection"&&c?Ve({...c,padding:i,overflowRef:f,offset:l,minItemsVisible:le,referenceOverflowThreshold:i,onFallbackChange(P){var S,O;if(!P)return;let $=p.elements.floating;if(!$)return;let F=parseFloat(getComputedStyle($).scrollPaddingBottom)||0,D=Math.min(le,$.childElementCount),y=0,T=0;for(let b of(O=(S=p.elements.floating)==null?void 0:S.childNodes)!=null?O:[])if(b instanceof HTMLElement){let A=b.offsetTop,J=A+b.clientHeight+F,q=$.scrollTop,X=q+$.clientHeight;if(A>=q&&J<=X)D--;else{T=Math.max(0,Math.min(J,X)-Math.max(A,q)),y=b.clientHeight;break}}D>=1&&s(b=>{let A=y*D-T+F;return b>=A?b:A})}}):null,Se({padding:i,apply({availableWidth:P,availableHeight:S,elements:O}){Object.assign(O.floating.style,{overflow:"auto",maxWidth:`${P}px`,maxHeight:`min(var(--anchor-max-height, 100vh), ${S}px)`})}})].filter(Boolean),whileElementsMounted:ye}),[x=a,M=h]=p.placement.split("-");a==="selection"&&(x="selection");let E=o.useMemo(()=>({anchor:[x,M].filter(Boolean).join(" ")}),[x,M]),H=We(p,{overflowRef:f,onChange:s}),{getReferenceProps:I,getFloatingProps:W}=Ye([H]),N=ie(P=>{d(P),w.setFloating(P)});return o.createElement(G.Provider,{value:r},o.createElement(k.Provider,{value:{setFloating:N,setReference:w.setReference,styles:C,getReferenceProps:I,getFloatingProps:W,slot:E}},e))}function qe(e){_(()=>{if(!e)return;let t=new MutationObserver(()=>{let n=window.getComputedStyle(e).maxHeight,r=parseFloat(n);if(isNaN(r))return;let l=parseInt(n);isNaN(l)||r!==l&&(e.style.maxHeight=`${Math.ceil(r)}px`)});return t.observe(e,{attributes:!0,attributeFilter:["style"]}),()=>{t.disconnect()}},[e])}function Le(e,t){var n,r,l;let s=z((n=e==null?void 0:e.gap)!=null?n:"var(--anchor-gap, 0)",t),f=z((r=e==null?void 0:e.offset)!=null?r:"var(--anchor-offset, 0)",t),u=z((l=e==null?void 0:e.padding)!=null?l:"var(--anchor-padding, 0)",t);return{...e,gap:s,offset:f,padding:u}}function z(e,t,n=void 0){let r=we(),l=ie((d,m)=>{if(d==null)return[n,null];if(typeof d=="number")return[d,null];if(typeof d=="string"){if(!m)return[n,null];let g=se(d,m);return[g,R=>{let v=ge(d);{let i=v.map(c=>window.getComputedStyle(m).getPropertyValue(c));r.requestAnimationFrame(function c(){r.nextFrame(c);let a=!1;for(let[w,C]of v.entries()){let p=window.getComputedStyle(m).getPropertyValue(C);if(i[w]!==p){i[w]=p,a=!0;break}}if(!a)return;let h=se(d,m);g!==h&&(R(h),g=h)})}return r.dispose}]}return[n,null]}),s=o.useMemo(()=>l(e,t)[0],[e,t]),[f=s,u]=o.useState();return _(()=>{let[d,m]=l(e,t);if(u(d),!!m)return m(u)},[e,t]),f}function ge(e){let t=/var\((.*)\)/.exec(e);if(t){let n=t[1].indexOf(",");if(n===-1)return[t[1]];let r=t[1].slice(0,n).trim(),l=t[1].slice(n+1).trim();return l?[r,...ge(l)]:[r]}return[]}function se(e,t){let n=document.createElement("div");t.appendChild(n),n.style.setProperty("margin-top","0px","important"),n.style.setProperty("margin-top",e,"important");let r=parseFloat(window.getComputedStyle(n).marginTop)||0;return t.removeChild(n),r}export{Xe as F,Qe as R,Ze as b,Ke as f,et as v,Ge as x,Je as y};
