import{j as t,c9 as b,ca as u,f as C,L as x,r as v,h as p}from"./index-B8WTsAS6.js";import{S}from"./searchFomProduct-CtepxUMW.js";import{A as B}from"./index-Cc_yPv-2.js";import{E as A}from"./EditDocumentIcon-DuofBkHL.js";import{A as T}from"./AddNoteIcon-B-YsxfSi.js";import{S as L}from"./sweetalert2.all-CanRnygg.js";import{w as E}from"./sweetalert2-react-content.es-_20BSG7l.js";import{D as I}from"./DeleteIcon-BukMQWWF.js";import{f as _,g as N,h as k,m as l}from"./chunk-GBNLLUVD-1t55ujfQ.js";import{b as P}from"./chunk-DBLREEYE-KYxkDfWC.js";import{t as V,a as M,b as R,c as $,d as H,e as X}from"./chunk-YRZGWF2W-CXxVUGNa.js";import{p as F}from"./chunk-MRXO6UUP-nmik_M5x.js";import{c as w}from"./chunk-4WFLSIHH-GgbuetXY.js";import{a as Z}from"./chunk-QXREVWCS-CHEGexYN.js";import{t as z}from"./chunk-3ZXLDIEA-b4fsncww.js";import{R as K,b as U}from"./ReusableBreadcrumb-D5trGug1.js";import{P as q}from"./ProductSummary-NkOstGUN.js";import"./chunk-TDOFO53L-BhVz0FjF.js";import"./chunk-N2KXC5ZE-mxrXGXiM.js";import"./tslib.es6-DUex0IDm.js";import"./useDialog-clsvYkd8.js";import"./useLabels-C5NmhLsG.js";import"./filterDOMProps-B3AneKiX.js";import"./useEffectEvent-Cg1JSw20.js";import"./clsx-B-dksMZM.js";import"./getChildNodes-Cw4ook6e.js";import"./VisuallyHidden-D5xcTfY7.js";import"./useFocusWithin-Cnv4cfRz.js";import"./focusSafely-7dc_zii7.js";import"./_class_private_field_set-DiTYLpP0.js";import"./FocusScope-DCO5JZf9.js";import"./useOverlayTriggerState-_gK5y_xw.js";import"./number-DfkVkf0F.js";import"./chunk-BZCSOIUI-ECjOxws-.js";import"./chunk-XHQUSKIE-BwnSvnTo.js";import"./features-animation-BrpZblPW.js";import"./chunk-6NL67ZRH-ST4yRtyp.js";import"./chunk-MNNRULGA-Ck-UmubQ.js";import"./chunk-CIZQCQPA-BQKhqm3c.js";import"./index-DiNnCp_7.js";import"./useFocusable-BgsBLUcz.js";import"./useFocus-CiKVCmpT.js";import"./chunk-KBN3H6OQ-BYj_qRg-.js";import"./chunk-CAFRINWI-BTDo8zfp.js";import"./useFormValidationState-Ds8IGnmn.js";import"./useFormReset-BlmLPiDA.js";import"./chunk-IXXDDLGU-D8Ib2K6T.js";import"./chunk-7F3ZLNJ6-B2JTPL8n.js";import"./index-xaiLQO7O.js";import"./index-rH3ZM3xY.js";import"./useHover-BojuH7IM.js";const G=({size:a,height:s,width:r,...o})=>t.jsx("svg",{width:a||r||24,height:a||s||24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...o,children:t.jsx("path",{d:"M12 2C6.49 2 2 6.49 2 12C2 17.51 6.49 22 12 22C17.51 22 22 17.51 22 12C22 6.49 17.51 2 12 2ZM16.78 9.7L11.11 15.37C10.97 15.51 10.78 15.59 10.58 15.59C10.38 15.59 10.19 15.51 10.05 15.37L7.22 12.54C6.93 12.25 6.93 11.77 7.22 11.48C7.51 11.19 7.99 11.19 8.28 11.48L10.58 13.78L15.72 8.64C16.01 8.35 16.49 8.35 16.78 8.64C17.07 8.93 17.07 9.4 16.78 9.7Z",fill:"currentColor"})}),f=E(L),J=(a,s,r,o)=>{f.fire({title:"Xóa sản phẩm?",text:"Bạn có chắc muốn xóa sản phẩm này không!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Có",cancelButtonText:"Hủy"}).then(async i=>{var m,d;if(i.isConfirmed)try{const c=await s(b(a));if(b.rejected.match(c)){const e=((m=c.payload)==null?void 0:m.msg)||"Đã xảy ra sự cố khi xóa sản phẩm.";y(e)}else{const e=((d=c.payload)==null?void 0:d.msg)||"Sản phẩm của bạn đã bị xóa.";O(e),s(u({page:r,search:o}))}}catch{y("Đã xảy ra sự cố khi xóa sản phẩm.")}})},O=a=>{f.fire({title:"Đã xóa!",text:a,icon:"success",customClass:{confirmButton:"bg-blue-500 md:bg-green-500"}})},y=a=>{f.fire({title:"Lỗi!",text:a,icon:"error",customClass:{confirmButton:"bg-red-600"}})};function Q({productId:a,currentPage:s,searchTerm:r}){const o=C(),i="text-xl text-default-500 pointer-events-none flex-shrink-0";return t.jsxs(_,{children:[t.jsx(N,{children:t.jsx(P,{variant:"bordered",children:"Tùy chọn"})}),t.jsxs(k,{"aria-label":"Static Actions",children:[t.jsx(l,{startContent:t.jsx(A,{className:i}),textValue:"Sửa sản phẩm",children:t.jsx(x,{to:`/admin/editproduct/${a}`,children:"Sửa sản phẩm"})},"new"),t.jsx(l,{startContent:t.jsx(T,{className:i}),textValue:"Thêm biến thể",children:t.jsx(x,{to:`/admin/product/${a}/addvariant`,children:"Thêm biến thể"})},"copy"),t.jsx(l,{className:"text-danger",color:"danger",startContent:t.jsx(I,{className:i}),textValue:"Xóa sản phẩm",onClick:()=>J(a,o,s,r),children:"Xóa sản phẩm"},"delete")]})]})}function W({variants:a,productId:s}){const r=a.length;return t.jsxs(_,{children:[t.jsx(N,{children:t.jsxs(P,{variant:"bordered",children:[r," Biến thể"]})}),t.jsx(k,{"aria-label":"Static Actions",children:r>0?t.jsx(l,{textValue:"Danh sách sản phẩm biến thể",children:t.jsx(x,{to:`/admin/list-product-variant/${s}`,children:"Danh sách sản phẩm biến thể"})}):t.jsx(l,{isDisabled:!0,children:"No variants available"})})]})}const Y=()=>{const a=C(),[s]=v.useState(""),r=p(e=>{var n;return((n=e.products.pagilistActive.pagination)==null?void 0:n.currentPage)||1}),o=p(e=>{var n;return((n=e.products.pagilistActive.pagination)==null?void 0:n.totalPages)||1}),i=p(e=>e.products.pagilistActive.products||[]);v.useEffect(()=>{a(u({page:r,search:s}))},[a,r,s]);const m=e=>{a(u({page:e,search:s}))},d=(e,n)=>{var g,j;switch(n){case"image":return t.jsx("div",{className:"flex items-center",children:t.jsx("img",{src:e.image[0],className:"w-16 md:w-32 max-w-full max-h-full sm:w-24 sm:min-w-[96px] sm:min-h-[96px]",alt:e.product_name})});case"product_name":const h=e.product_name;return t.jsx(z,{content:h,delay:0,children:t.jsx("span",{children:h.length>20?`${h.substring(0,20)}...`:h})});case"category":return t.jsx(w,{variant:"flat",color:"primary",classNames:{base:"bg-primary-500 from-indigo-500 to-pink-500 border-small border-white/50 shadow-pink-500/30",content:"drop-shadow shadow-black text-white"},avatar:t.jsx(Z,{name:((g=e.product_type)==null?void 0:g.name)||"N/A",size:"sm",getInitials:D=>D.charAt(0)}),children:(j=e.product_type)==null?void 0:j.name});case"status":return t.jsx(w,{startContent:t.jsx(G,{size:18}),variant:"faded",color:e.variants&&e.variants.length>0?"success":"warning",children:e.variants&&e.variants.length>0&&e.status==="active"?"Hiển thị":"Chưa có biến thể"});case"variant":return t.jsx(W,{variants:e.variants,productId:e._id});case"actions":return t.jsx(Q,{productId:e._id,currentPage:r,searchTerm:s});default:return null}},c=[{uid:"image",name:"Hình ảnh"},{uid:"product_name",name:"Tên sản phẩm"},{uid:"category",name:"Danh mục"},{uid:"status",name:"Trạng thái"},{uid:"variant",name:"Biến thể"},{uid:"actions",name:"Chức năng"}];return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex flex-col md:flex-row items-stretch md:items-center md:space-x-3 space-y-3 md:space-y-0 justify-between mx-4 py-4 border-t dark:border-gray-700",children:[t.jsx(S,{}),t.jsx(B,{type:"addProduct"})]}),i.length===0?t.jsx("div",{className:"flex justify-center items-center h-64",children:t.jsx("p",{className:"text-gray-500 text-center",children:"Không có sản phẩm nào khớp với tìm kiếm của bạn."})}):t.jsxs(V,{"aria-label":"Product Variants Table",className:"p-4",children:[t.jsx(M,{columns:c,children:e=>t.jsx(R,{align:e.uid==="actions"?"center":"start",children:e.name},e.uid)}),t.jsx($,{items:i,children:e=>t.jsx(H,{children:n=>t.jsx(X,{children:d(e,n)})},e._id)})]}),t.jsx("div",{className:"flex justify-center my-4",children:t.jsx(F,{isCompact:!0,loop:!0,showControls:!0,color:"primary",total:o,initialPage:r,onChange:e=>m(e)})})]})},Qt=()=>t.jsxs("div",{children:[t.jsx(K,{items:U.listproduct}),t.jsx("div",{className:"mb-4 ml-4 col-span-full xl:mb-2",children:t.jsx("h1",{className:"text-xl font-semibold text-gray-900 sm:text-2xl dark:text-white",children:"Danh sách sản phẩm"})}),t.jsx("section",{className:"bg-gray-50 dark:bg-gray-900 p-3 sm:p-5 antialiased",children:t.jsx("div",{className:"mb-4 col-span-full xl:mb-2",children:t.jsxs("div",{className:"bg-white dark:bg-gray-800 relative border shadow-md sm:rounded-lg overflow-hidden",children:[t.jsx(q,{}),t.jsx("div",{className:"overflow-x-auto",children:t.jsx(Y,{})})]})})})]});export{Qt as default};
