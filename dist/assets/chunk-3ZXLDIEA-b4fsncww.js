import{r as c,u as ve,j as u,bi as G}from"./index-B8WTsAS6.js";import{$ as he,p as J,a as xe,b as Te,c as Q,t as ye,T as ge,g as Pe}from"./useOverlayTriggerState-_gK5y_xw.js";import{c as Oe}from"./clsx-B-dksMZM.js";import{a as we,$ as ee,b as Ce}from"./filterDOMProps-B3AneKiX.js";import{$ as te}from"./useHover-BojuH7IM.js";import{$ as De,b as Ee}from"./useFocusWithin-Cnv4cfRz.js";import{$ as Re,w as je}from"./useFocusable-BgsBLUcz.js";import{m as Ae,o as Ie,c as Ne,f as Se}from"./chunk-N2KXC5ZE-mxrXGXiM.js";import{b as _e,a as D}from"./chunk-XHQUSKIE-BwnSvnTo.js";import{m as ke}from"./chunk-CIZQCQPA-BQKhqm3c.js";import{u as He}from"./index-DiNnCp_7.js";import{aa as Le,a4 as Me,ab as Fe,ac as Ue}from"./features-animation-BrpZblPW.js";const Ve=1500,X=500;let y={},ze=0,j=!1,h=null,g=null;function Ke(e={}){let{delay:t=Ve,closeDelay:r=X}=e,{isOpen:s,open:l,close:i}=he(e),o=c.useMemo(()=>`${++ze}`,[]),a=c.useRef(),v=()=>{y[o]=x},f=()=>{for(let n in y)n!==o&&(y[n](!0),delete y[n])},p=()=>{clearTimeout(a.current),a.current=null,f(),v(),j=!0,l(),h&&(clearTimeout(h),h=null),g&&(clearTimeout(g),g=null)},x=n=>{n||r<=0?(clearTimeout(a.current),a.current=null,i()):a.current||(a.current=setTimeout(()=>{a.current=null,i()},r)),h&&(clearTimeout(h),h=null),j&&(g&&clearTimeout(g),g=setTimeout(()=>{delete y[o],g=null,j=!1},Math.max(X,r)))},m=()=>{f(),v(),!s&&!h&&!j?h=setTimeout(()=>{h=null,j=!0,p()},t):s||p()};return c.useEffect(()=>()=>{clearTimeout(a.current),y[o]&&delete y[o]},[o]),{isOpen:s,open:n=>{!n&&t>0&&!a.current?m():p()},close:x}}let Z=new Map;function We(e,t){if(e===t)return e;let r=Z.get(e);if(r)return r(t),t;let s=Z.get(t);return s?(s(e),e):t}function Ye(...e){return(...t)=>{for(let r of e)typeof r=="function"&&r(...t)}}function A(...e){let t={...e[0]};for(let r=1;r<e.length;r++){let s=e[r];for(let l in s){let i=t[l],o=s[l];typeof i=="function"&&typeof o=="function"&&l[0]==="o"&&l[1]==="n"&&l.charCodeAt(2)>=65&&l.charCodeAt(2)<=90?t[l]=Ye(i,o):(l==="className"||l==="UNSAFE_className")&&typeof i=="string"&&typeof o=="string"?t[l]=Oe(i,o):l==="id"&&i&&o?t.id=We(i,o):t[l]=o!==void 0?o:i}}return t}function qe(e,t){let r=we(e,{labelable:!0}),{hoverProps:s}=te({onHoverStart:()=>t==null?void 0:t.open(!0),onHoverEnd:()=>t==null?void 0:t.close()});return{tooltipProps:ee(r,s,{role:"tooltip"})}}function Be(e,t,r){let{isDisabled:s,trigger:l}=e,i=Ce(),o=c.useRef(!1),a=c.useRef(!1),v=()=>{(o.current||a.current)&&t.open(a.current)},f=d=>{!o.current&&!a.current&&t.close(d)};c.useEffect(()=>{let d=C=>{r&&r.current&&C.key==="Escape"&&(C.stopPropagation(),t.close(!0))};if(t.isOpen)return document.addEventListener("keydown",d,!0),()=>{document.removeEventListener("keydown",d,!0)}},[r,t]);let p=()=>{l!=="focus"&&(De()==="pointer"?o.current=!0:o.current=!1,v())},x=()=>{l!=="focus"&&(a.current=!1,o.current=!1,f())},m=()=>{a.current=!1,o.current=!1,f(!0)},n=()=>{Ee()&&(a.current=!0,v())},P=()=>{a.current=!1,o.current=!1,f(!0)},{hoverProps:O}=te({isDisabled:s,onHoverStart:p,onHoverEnd:x}),{focusableProps:w}=Re({isDisabled:s,onFocus:n,onBlur:P},r);return{triggerProps:{"aria-describedby":t.isOpen?i:void 0,...ee(w,O,{onPointerDown:m,onKeyDown:m})},tooltipProps:{id:i}}}function Ge(e){var t,r;const s=ve(),[l,i]=Ae(e,J.variantKeys),{ref:o,as:a,isOpen:v,content:f,children:p,defaultOpen:x,onOpenChange:m,isDisabled:n,trigger:P,shouldFlip:O=!0,containerPadding:w=12,placement:d="top",delay:C=0,closeDelay:L=500,showArrow:b=!1,offset:U=7,crossOffset:re=0,isDismissable:le,shouldCloseOnBlur:ne=!0,portalContainer:se,isKeyboardDismissDisabled:ae=!1,updatePositionDeps:V=[],shouldCloseOnInteractOutside:ie,className:ce,onClose:z,motionProps:de,classNames:E,...M}=l,ue=a||"div",F=(r=(t=e==null?void 0:e.disableAnimation)!=null?t:s==null?void 0:s.disableAnimation)!=null?r:!1,R=Ke({delay:C,closeDelay:L,isDisabled:n,defaultOpen:x,isOpen:v,onOpenChange:T=>{m==null||m(T),T||z==null||z()}}),I=c.useRef(null),N=c.useRef(null),S=c.useId(),$=R.isOpen&&!n;c.useImperativeHandle(o,()=>_e(N));const{triggerProps:K,tooltipProps:fe}=Be({isDisabled:n,trigger:P},R,I),{tooltipProps:W}=qe({isOpen:$,...A(l,fe)},R),{overlayProps:Y,placement:_,updatePosition:pe}=xe({isOpen:$,targetRef:I,placement:ye(d),overlayRef:N,offset:b?U+3:U,crossOffset:re,shouldFlip:O,containerPadding:w});He(()=>{V.length&&pe()},V);const{overlayProps:q}=Te({isOpen:$,onClose:R.close,isDismissable:le,shouldCloseOnBlur:ne,isKeyboardDismissDisabled:ae,shouldCloseOnInteractOutside:ie},N),k=c.useMemo(()=>{var T,H,B;return J({...i,disableAnimation:F,radius:(T=e==null?void 0:e.radius)!=null?T:"md",size:(H=e==null?void 0:e.size)!=null?H:"md",shadow:(B=e==null?void 0:e.shadow)!=null?B:"sm"})},[Ie(i),F,e==null?void 0:e.radius,e==null?void 0:e.size,e==null?void 0:e.shadow]),me=c.useCallback((T={},H=null)=>({...A(K,T),ref:ke(H,I),"aria-describedby":$?S:void 0}),[K,$,S,R]),be=c.useCallback(()=>({ref:N,"data-slot":"base","data-open":D($),"data-arrow":D(b),"data-disabled":D(n),"data-placement":Q(_,d),...A(W,q,M),style:A(Y.style,M.style,l.style),className:k.base({class:E==null?void 0:E.base}),id:S}),[k,$,b,n,_,d,W,q,M,Y,l,S]),$e=c.useCallback(()=>({"data-slot":"content","data-open":D($),"data-arrow":D(b),"data-disabled":D(n),"data-placement":Q(_,d),className:k.content({class:Ne(E==null?void 0:E.content,ce)})}),[k,$,b,n,_,d,E]);return{Component:ue,content:f,children:p,isOpen:$,triggerRef:I,showArrow:b,portalContainer:se,placement:d,disableAnimation:F,isDisabled:n,motionProps:de,getTooltipContentProps:$e,getTriggerProps:me,getTooltipProps:be}}var oe=Se((e,t)=>{const{Component:r,children:s,content:l,isOpen:i,portalContainer:o,placement:a,disableAnimation:v,motionProps:f,getTriggerProps:p,getTooltipProps:x,getTooltipContentProps:m}=Ge({...e,ref:t});let n;try{if(c.Children.count(s)!==1)throw new Error;if(!c.isValidElement(s))n=u.jsx("p",{...p(),children:s});else{const b=s;n=c.cloneElement(b,p(b.props,b.ref))}}catch{n=u.jsx("span",{}),je("Tooltip must have only one child node. Please, check your code.")}const{ref:P,id:O,style:w,...d}=x(),C=u.jsx("div",{ref:P,id:O,style:w,children:u.jsx(Le,{features:Me,children:u.jsx(Fe.div,{animate:"enter",exit:"exit",initial:"exit",variants:ge.scaleSpring,...A(f,d),style:{...Pe(a)},children:u.jsx(r,{...m(),children:l})})})});return u.jsxs(u.Fragment,{children:[n,v&&i?u.jsx(G,{portalContainer:o,children:u.jsx("div",{ref:P,id:O,style:w,...d,children:u.jsx(r,{...m(),children:l})})}):u.jsx(Ue,{children:i?u.jsx(G,{portalContainer:o,children:C}):null})]})});oe.displayName="NextUI.Tooltip";var it=oe;export{it as t};
