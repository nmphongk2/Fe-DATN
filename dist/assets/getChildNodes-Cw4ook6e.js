import{a9 as B,r as d,R as F}from"./index-B8WTsAS6.js";import{$ as z,a as W}from"./useEffectEvent-Cg1JSw20.js";import{g as j,$ as G}from"./VisuallyHidden-D5xcTfY7.js";import{$ as H}from"./filterDOMProps-B3AneKiX.js";import{$ as O}from"./focusSafely-7dc_zii7.js";const U=Symbol.for("react-aria.i18n.locale"),X=Symbol.for("react-aria.i18n.strings");let p;class S{getStringForLocale(e,t){let s=this.getStringsForLocale(t)[e];if(!s)throw new Error(`Could not find intl message ${e} in ${t} locale`);return s}getStringsForLocale(e){let t=this.strings[e];return t||(t=Y(e,this.strings,this.defaultLocale),this.strings[e]=t),t}static getGlobalDictionaryForPackage(e){if(typeof window>"u")return null;let t=window[U];if(p===void 0){let s=window[X];if(!s)return null;p={};for(let n in s)p[n]=new S({[t]:s[n]},t)}let l=p==null?void 0:p[e];if(!l)throw new Error(`Strings for package "${e}" were not included by LocalizedStringProvider. Please add it to the list passed to createLocalizedStringDictionary.`);return l}constructor(e,t="en-US"){this.strings=Object.fromEntries(Object.entries(e).filter(([,l])=>l)),this.defaultLocale=t}}function Y(i,e,t="en-US"){if(e[i])return e[i];let l=q(i);if(e[l])return e[l];for(let s in e)if(s.startsWith(l+"-"))return e[s];return e[t]}function q(i){return Intl.Locale?new Intl.Locale(i).language:i.split("-")[0]}const M=new Map,P=new Map;class J{format(e,t){let l=this.strings.getStringForLocale(e,this.locale);return typeof l=="function"?l(t,this):l}plural(e,t,l="cardinal"){let s=t["="+e];if(s)return typeof s=="function"?s():s;let n=this.locale+":"+l,r=M.get(n);r||(r=new Intl.PluralRules(this.locale,{type:l}),M.set(n,r));let o=r.select(e);return s=t[o]||t.other,typeof s=="function"?s():s}number(e){let t=P.get(this.locale);return t||(t=new Intl.NumberFormat(this.locale),P.set(this.locale,t)),t.format(e)}select(e,t){let l=e[t]||e.other;return typeof l=="function"?l():l}constructor(e,t){this.locale=e,this.strings=t}}const R=new WeakMap;function Q(i){let e=R.get(i);return e||(e=new S(i),R.set(i,e)),e}function Z(i,e){return e&&S.getGlobalDictionaryForPackage(e)||Q(i)}function ye(i,e){let{locale:t}=B(),l=Z(i,e);return d.useMemo(()=>new J(t,l),[t,l])}function _(i,e){let t=window.getComputedStyle(i),l=/(auto|scroll)/.test(t.overflow+t.overflowX+t.overflowY);return l&&e&&(l=i.scrollHeight!==i.clientHeight||i.scrollWidth!==i.clientWidth),l}function V(i,e){const t=[];for(;i&&i!==document.documentElement;)_(i,e)&&t.push(i),i=i.parentElement;return t}let N=0;const K=new Map;function ee(i){let[e,t]=d.useState();return z(()=>{if(!i)return;let l=K.get(i);if(l)t(l.element.id);else{let s=`react-aria-description-${N++}`;t(s);let n=document.createElement("div");n.id=s,n.style.display="none",n.textContent=i,document.body.appendChild(n),l={refCount:0,element:n},K.set(i,l)}return l.refCount++,()=>{l&&--l.refCount===0&&(l.element.remove(),K.delete(i))}},[i]),{"aria-describedby":i?e:void 0}}function ge(i,e,t,l){let s=W(t),n=t==null;d.useEffect(()=>{if(n||!i.current)return;let r=i.current;return r.addEventListener(e,s,l),()=>{r.removeEventListener(e,s,l)}},[i,e,l,n,s])}function te(i,e){let t=A(i,e,"left"),l=A(i,e,"top"),s=e.offsetWidth,n=e.offsetHeight,r=i.scrollLeft,o=i.scrollTop,{borderTopWidth:c,borderLeftWidth:f}=getComputedStyle(i),$=i.scrollLeft+parseInt(f,10),u=i.scrollTop+parseInt(c,10),a=$+i.clientWidth,h=u+i.clientHeight;t<=r?r=t-parseInt(f,10):t+s>a&&(r+=t+s-a),l<=u?o=l-parseInt(c,10):l+n>h&&(o+=l+n-h),i.scrollLeft=r,i.scrollTop=o}function A(i,e,t){const l=t==="left"?"offsetLeft":"offsetTop";let s=0;for(;e.offsetParent&&(s+=e[l],e.offsetParent!==i);){if(e.offsetParent.contains(i)){s-=i[l];break}e=e.offsetParent}return s}function be(i,e){if(document.contains(i)){let r=document.scrollingElement||document.documentElement;if(window.getComputedStyle(r).overflow==="hidden"){let c=V(i);for(let f of c)te(f,i)}else{var t;let{left:c,top:f}=i.getBoundingClientRect();i==null||(t=i.scrollIntoView)===null||t===void 0||t.call(i,{block:"nearest"});let{left:$,top:u}=i.getBoundingClientRect();if(Math.abs(c-$)>1||Math.abs(f-u)>1){var l,s,n;e==null||(s=e.containingElement)===null||s===void 0||(l=s.scrollIntoView)===null||l===void 0||l.call(s,{block:"center",inline:"center"}),(n=i.scrollIntoView)===null||n===void 0||n.call(i,{block:"nearest"})}}}}let x=new Map;function pe(i){let{locale:e}=B(),t=e+(i?Object.entries(i).sort((s,n)=>s[0]<n[0]?-1:1).join():"");if(x.has(t))return x.get(t);let l=new Intl.Collator(e,i);return x.set(t,l),l}const le=500;function ve(i){let{isDisabled:e,onLongPressStart:t,onLongPressEnd:l,onLongPress:s,threshold:n=le,accessibilityDescription:r}=i;const o=d.useRef(void 0);let{addGlobalListener:c,removeGlobalListener:f}=j(),{pressProps:$}=G({isDisabled:e,onPressStart(a){if(a.continuePropagation(),(a.pointerType==="mouse"||a.pointerType==="touch")&&(t&&t({...a,type:"longpressstart"}),o.current=setTimeout(()=>{a.target.dispatchEvent(new PointerEvent("pointercancel",{bubbles:!0})),s&&s({...a,type:"longpress"}),o.current=void 0},n),a.pointerType==="touch")){let h=v=>{v.preventDefault()};c(a.target,"contextmenu",h,{once:!0}),c(window,"pointerup",()=>{setTimeout(()=>{f(a.target,"contextmenu",h)},30)},{once:!0})}},onPressEnd(a){o.current&&clearTimeout(o.current),l&&(a.pointerType==="mouse"||a.pointerType==="touch")&&l({...a,type:"longpressend"})}}),u=ee(s&&!e?r:void 0);return{longPressProps:H($,u)}}class y extends Set{constructor(e,t,l){super(e),e instanceof y?(this.anchorKey=t??e.anchorKey,this.currentKey=l??e.currentKey):(this.anchorKey=t,this.currentKey=l)}}function ie(i,e){if(i.size!==e.size)return!1;for(let t of i)if(!e.has(t))return!1;return!0}function me(i){let{selectionMode:e="none",disallowEmptySelection:t,allowDuplicateSelectionEvents:l,selectionBehavior:s="toggle",disabledBehavior:n="all"}=i,r=d.useRef(!1),[,o]=d.useState(!1),c=d.useRef(null),f=d.useRef(null),[,$]=d.useState(null),u=d.useMemo(()=>D(i.selectedKeys),[i.selectedKeys]),a=d.useMemo(()=>D(i.defaultSelectedKeys,new y),[i.defaultSelectedKeys]),[h,v]=O(u,a,i.onSelectionChange),m=d.useMemo(()=>i.disabledKeys?new Set(i.disabledKeys):new Set,[i.disabledKeys]),[g,w]=d.useState(s);s==="replace"&&g==="toggle"&&typeof h=="object"&&h.size===0&&w("replace");let L=d.useRef(s);return d.useEffect(()=>{s!==L.current&&(w(s),L.current=s)},[s]),{selectionMode:e,disallowEmptySelection:t,selectionBehavior:g,setSelectionBehavior:w,get isFocused(){return r.current},setFocused(b){r.current=b,o(b)},get focusedKey(){return c.current},get childFocusStrategy(){return f.current},setFocusedKey(b,k="first"){c.current=b,f.current=k,$(b)},selectedKeys:h,setSelectedKeys(b){(l||!ie(b,h))&&v(b)},disabledKeys:m,disabledBehavior:n}}function D(i,e){return i?i==="all"?"all":new y(i):e}function se(i,e){return typeof e.getChildren=="function"?e.getChildren(i.key):i.childNodes}function ne(i){return re(i)}function re(i,e){for(let t of i)return t}function I(i,e,t){if(e.parentKey===t.parentKey)return e.index-t.index;let l=[...E(i,e),e],s=[...E(i,t),t],n=l.slice(0,s.length).findIndex((r,o)=>r!==s[o]);return n!==-1?(e=l[n],t=s[n],e.index-t.index):l.findIndex(r=>r===t)>=0?1:(s.findIndex(r=>r===e)>=0,-1)}function E(i,e){let t=[];for(;(e==null?void 0:e.parentKey)!=null;)e=i.getItem(e.parentKey),t.unshift(e);return t}class Se{get selectionMode(){return this.state.selectionMode}get disallowEmptySelection(){return this.state.disallowEmptySelection}get selectionBehavior(){return this.state.selectionBehavior}setSelectionBehavior(e){this.state.setSelectionBehavior(e)}get isFocused(){return this.state.isFocused}setFocused(e){this.state.setFocused(e)}get focusedKey(){return this.state.focusedKey}get childFocusStrategy(){return this.state.childFocusStrategy}setFocusedKey(e,t){(e==null||this.collection.getItem(e))&&this.state.setFocusedKey(e,t)}get selectedKeys(){return this.state.selectedKeys==="all"?new Set(this.getSelectAllKeys()):this.state.selectedKeys}get rawSelection(){return this.state.selectedKeys}isSelected(e){return this.state.selectionMode==="none"?!1:(e=this.getKey(e),this.state.selectedKeys==="all"?this.canSelectItem(e):this.state.selectedKeys.has(e))}get isEmpty(){return this.state.selectedKeys!=="all"&&this.state.selectedKeys.size===0}get isSelectAll(){if(this.isEmpty)return!1;if(this.state.selectedKeys==="all")return!0;if(this._isSelectAll!=null)return this._isSelectAll;let e=this.getSelectAllKeys(),t=this.state.selectedKeys;return this._isSelectAll=e.every(l=>t.has(l)),this._isSelectAll}get firstSelectedKey(){let e=null;for(let t of this.state.selectedKeys){let l=this.collection.getItem(t);(!e||l&&I(this.collection,l,e)<0)&&(e=l)}return e==null?void 0:e.key}get lastSelectedKey(){let e=null;for(let t of this.state.selectedKeys){let l=this.collection.getItem(t);(!e||l&&I(this.collection,l,e)>0)&&(e=l)}return e==null?void 0:e.key}get disabledKeys(){return this.state.disabledKeys}get disabledBehavior(){return this.state.disabledBehavior}extendSelection(e){if(this.selectionMode==="none")return;if(this.selectionMode==="single"){this.replaceSelection(e);return}e=this.getKey(e);let t;if(this.state.selectedKeys==="all")t=new y([e],e,e);else{let n=this.state.selectedKeys;var l;let r=(l=n.anchorKey)!==null&&l!==void 0?l:e;t=new y(n,r,e);var s;for(let o of this.getKeyRange(r,(s=n.currentKey)!==null&&s!==void 0?s:e))t.delete(o);for(let o of this.getKeyRange(e,r))this.canSelectItem(o)&&t.add(o)}this.state.setSelectedKeys(t)}getKeyRange(e,t){let l=this.collection.getItem(e),s=this.collection.getItem(t);return l&&s?I(this.collection,l,s)<=0?this.getKeyRangeInternal(e,t):this.getKeyRangeInternal(t,e):[]}getKeyRangeInternal(e,t){var l;if(!((l=this.layoutDelegate)===null||l===void 0)&&l.getKeyRange)return this.layoutDelegate.getKeyRange(e,t);let s=[],n=e;for(;n!=null;){let r=this.collection.getItem(n);if((r&&r.type==="item"||r.type==="cell"&&this.allowsCellSelection)&&s.push(n),n===t)return s;n=this.collection.getKeyAfter(n)}return[]}getKey(e){let t=this.collection.getItem(e);if(!t||t.type==="cell"&&this.allowsCellSelection)return e;for(;t.type!=="item"&&t.parentKey!=null;)t=this.collection.getItem(t.parentKey);return!t||t.type!=="item"?null:t.key}toggleSelection(e){if(this.selectionMode==="none")return;if(this.selectionMode==="single"&&!this.isSelected(e)){this.replaceSelection(e);return}if(e=this.getKey(e),e==null)return;let t=new y(this.state.selectedKeys==="all"?this.getSelectAllKeys():this.state.selectedKeys);t.has(e)?t.delete(e):this.canSelectItem(e)&&(t.add(e),t.anchorKey=e,t.currentKey=e),!(this.disallowEmptySelection&&t.size===0)&&this.state.setSelectedKeys(t)}replaceSelection(e){if(this.selectionMode==="none"||(e=this.getKey(e),e==null))return;let t=this.canSelectItem(e)?new y([e],e,e):new y;this.state.setSelectedKeys(t)}setSelectedKeys(e){if(this.selectionMode==="none")return;let t=new y;for(let l of e)if(l=this.getKey(l),l!=null&&(t.add(l),this.selectionMode==="single"))break;this.state.setSelectedKeys(t)}getSelectAllKeys(){let e=[],t=l=>{for(;l!=null;){if(this.canSelectItem(l)){let s=this.collection.getItem(l);s.type==="item"&&e.push(l),s.hasChildNodes&&(this.allowsCellSelection||s.type!=="item")&&t(ne(se(s,this.collection)).key)}l=this.collection.getKeyAfter(l)}};return t(this.collection.getFirstKey()),e}selectAll(){!this.isSelectAll&&this.selectionMode==="multiple"&&this.state.setSelectedKeys("all")}clearSelection(){!this.disallowEmptySelection&&(this.state.selectedKeys==="all"||this.state.selectedKeys.size>0)&&this.state.setSelectedKeys(new y)}toggleSelectAll(){this.isSelectAll?this.clearSelection():this.selectAll()}select(e,t){this.selectionMode!=="none"&&(this.selectionMode==="single"?this.isSelected(e)&&!this.disallowEmptySelection?this.toggleSelection(e):this.replaceSelection(e):this.selectionBehavior==="toggle"||t&&(t.pointerType==="touch"||t.pointerType==="virtual")?this.toggleSelection(e):this.replaceSelection(e))}isSelectionEqual(e){if(e===this.state.selectedKeys)return!0;let t=this.selectedKeys;if(e.size!==t.size)return!1;for(let l of e)if(!t.has(l))return!1;for(let l of t)if(!e.has(l))return!1;return!0}canSelectItem(e){var t;if(this.state.selectionMode==="none"||this.state.disabledKeys.has(e))return!1;let l=this.collection.getItem(e);return!(!l||!(l==null||(t=l.props)===null||t===void 0)&&t.isDisabled||l.type==="cell"&&!this.allowsCellSelection)}isDisabled(e){var t,l;return this.state.disabledBehavior==="all"&&(this.state.disabledKeys.has(e)||!!(!((l=this.collection.getItem(e))===null||l===void 0||(t=l.props)===null||t===void 0)&&t.isDisabled))}isLink(e){var t,l;return!!(!((l=this.collection.getItem(e))===null||l===void 0||(t=l.props)===null||t===void 0)&&t.href)}getItemProps(e){var t;return(t=this.collection.getItem(e))===null||t===void 0?void 0:t.props}constructor(e,t,l){this.collection=e,this.state=t;var s;this.allowsCellSelection=(s=l==null?void 0:l.allowsCellSelection)!==null&&s!==void 0?s:!1,this._isSelectAll=null,this.layoutDelegate=(l==null?void 0:l.layoutDelegate)||null}}class oe{build(e,t){return this.context=t,T(()=>this.iterateCollection(e))}*iterateCollection(e){let{children:t,items:l}=e;if(typeof t=="function"){if(!l)throw new Error("props.children was a function but props.items is missing");for(let s of e.items)yield*this.getFullNode({value:s},{renderer:t})}else{let s=[];F.Children.forEach(t,r=>{s.push(r)});let n=0;for(let r of s){let o=this.getFullNode({element:r,index:n},{});for(let c of o)n++,yield c}}}getKey(e,t,l,s){if(e.key!=null)return e.key;if(t.type==="cell"&&t.key!=null)return`${s}${t.key}`;let n=t.value;if(n!=null){var r;let o=(r=n.key)!==null&&r!==void 0?r:n.id;if(o==null)throw new Error("No key found for item");return o}return s?`${s}.${t.index}`:`$.${t.index}`}getChildState(e,t){return{renderer:t.renderer||e.renderer}}*getFullNode(e,t,l,s){let n=e.element;if(!n&&e.value&&t&&t.renderer){let c=this.cache.get(e.value);if(c&&(!c.shouldInvalidate||!c.shouldInvalidate(this.context))){c.index=e.index,c.parentKey=s?s.key:null,yield c;return}n=t.renderer(e.value)}if(F.isValidElement(n)){let c=n.type;if(typeof c!="function"&&typeof c.getCollectionNode!="function"){let a=typeof n.type=="function"?n.type.name:n.type;throw new Error(`Unknown element <${a}> in collection.`)}let f=c.getCollectionNode(n.props,this.context),$=e.index,u=f.next();for(;!u.done&&u.value;){let a=u.value;e.index=$;let h=a.key;h||(h=a.element?null:this.getKey(n,e,t,l));let m=[...this.getFullNode({...a,key:h,index:$,wrapper:ce(e.wrapper,a.wrapper)},this.getChildState(t,a),l?`${l}${n.key}`:n.key,s)];for(let g of m){if(g.value=a.value||e.value,g.value&&this.cache.set(g.value,g),e.type&&g.type!==e.type)throw new Error(`Unsupported type <${C(g.type)}> in <${C(s.type)}>. Only <${C(e.type)}> is supported.`);$++,yield g}u=f.next(m)}return}if(e.key==null)return;let r=this,o={type:e.type,props:e.props,key:e.key,parentKey:s?s.key:null,value:e.value,level:s?s.level+1:0,index:e.index,rendered:e.rendered,textValue:e.textValue,"aria-label":e["aria-label"],wrapper:e.wrapper,shouldInvalidate:e.shouldInvalidate,hasChildNodes:e.hasChildNodes,childNodes:T(function*(){if(!e.hasChildNodes)return;let c=0;for(let f of e.childNodes()){f.key!=null&&(f.key=`${o.key}${f.key}`),f.index=c;let $=r.getFullNode(f,r.getChildState(t,f),o.key,o);for(let u of $)c++,yield u}})};yield o}constructor(){this.cache=new WeakMap}}function T(i){let e=[],t=null;return{*[Symbol.iterator](){for(let l of e)yield l;t||(t=i());for(let l of t)e.push(l),yield l}}}function ce(i,e){if(i&&e)return t=>i(e(t));if(i)return i;if(e)return e}function C(i){return i[0].toUpperCase()+i.slice(1)}function we(i,e,t){let l=d.useMemo(()=>new oe,[]),{children:s,items:n,collection:r}=i;return d.useMemo(()=>{if(r)return r;let c=l.build({children:s,items:n},t);return e(c)},[l,s,n,r,t,e])}function Ke(i,e){return typeof e.getChildren=="function"?e.getChildren(i.key):i.childNodes}function xe(i){return ae(i,0)}function ae(i,e){if(e<0)return;let t=0;for(let l of i){if(t===e)return l;t++}}function Ie(i){let e;for(let t of i)e=t;return e}export{pe as $,me as a,we as b,Se as c,ge as d,te as e,be as f,ve as g,_ as h,Ke as i,ye as j,J as k,S as l,ee as m,xe as n,ae as o,Ie as p};
