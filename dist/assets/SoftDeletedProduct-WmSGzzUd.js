import{r as x,l as k,j as e,cN as m,cO as g,cP as f,f as N,h}from"./index-B8WTsAS6.js";import{P as v}from"./paginationcrud-CYiMZm9R.js";import{S as j}from"./sweetalert2.all-CanRnygg.js";import{w}from"./sweetalert2-react-content.es-_20BSG7l.js";import{S as C}from"./searchMessage-I2XlDOxB.js";import{N as B}from"./noProduct-CCebxuri.js";import{R as S,b as P}from"./ReusableBreadcrumb-D5trGug1.js";import{P as T}from"./ProductSummary-NkOstGUN.js";import"./clsx-B-dksMZM.js";const D=({onSearchChange:t})=>{const[r,l]=x.useState(""),n=k(),s=i=>{i.preventDefault(),n(m({page:1,search:r})),t(r)},c=i=>{const o=i.target.value;l(o)};return e.jsx("div",{className:"w-full md:w-1/2",children:e.jsxs("form",{className:"flex items-center",onSubmit:s,children:[e.jsx("label",{htmlFor:"simple-search",className:"sr-only",children:"Tìm kiếm"}),e.jsxs("div",{className:"relative w-full",children:[e.jsx("input",{id:"simple-search",type:"search",className:"w-full py-1 px-2 border text-black border-gray-300 rounded-md shadow-sm",placeholder:"Tìm kiếm",value:r,onChange:c}),e.jsx("button",{type:"submit",className:"absolute inset-y-0 right-0 flex items-center p-2 text-gray-700 bg-blue-500 border border-gray-300 rounded-r-md",children:e.jsx("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.795 13.408l5.204 5.204a1 1 0 01-1.414 1.414l-5.204-5.204a7.5 7.5 0 111.414-1.414zM8.5 14A5.5 5.5 0 103 8.5 5.506 5.506 0 008.5 14z"})})})]})]})})},M=(t,r)=>t.length>r?t.slice(0,r)+"...":t,u=w(j),_=(t,r,l,n)=>{u.fire({title:"Khôi phục?",text:"Bạn có muốn khôi phục sản phẩm này không!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Có",cancelButtonText:"Hủy"}).then(async s=>{var c,i;if(s.isConfirmed)try{const o=await r(g(t));if(g.rejected.match(o)){const a=((c=o.payload)==null?void 0:c.msg)||"Đã xảy ra sự cố khi khôi phục sản phẩm.";y(a)}else{const a=((i=o.payload)==null?void 0:i.msg)||"Sản phẩm đã được khôi phục thành công.";L(a),r(m({page:l,search:n}))}}catch{y("Đã xảy ra sự cố khi khôi phục sản phẩm.")}})},L=t=>{u.fire({title:"Đã khôi phục!",text:t,icon:"success",customClass:{confirmButton:"bg-blue-500 md:bg-green-500"}})},y=t=>{u.fire({title:"Lỗi!",text:t,icon:"error",customClass:{confirmButton:"bg-red-600"}})},p=w(j),R=(t,r,l,n)=>{p.fire({title:"Xóa sản phẩm?",text:"Bạn có chắc muốn xóa sản phẩm này không!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Có",cancelButtonText:"Hủy"}).then(async s=>{var c,i;if(s.isConfirmed)try{const o=await r(f(t));if(f.rejected.match(o)){const a=((c=o.payload)==null?void 0:c.msg)||"Đã xảy ra sự cố khi xóa sản phẩm.";b(a)}else{const a=((i=o.payload)==null?void 0:i.msg)||"Sản phẩm của bạn đã bị xóa.";E(a),r(m({page:l,search:n}))}}catch{b("Đã xảy ra sự cố khi xóa sản phẩm.")}})},E=t=>{p.fire({title:"Đã xóa!",text:t,icon:"success",customClass:{confirmButton:"bg-blue-500 md:bg-green-500"}})},b=t=>{p.fire({title:"Lỗi!",text:t,icon:"error",customClass:{confirmButton:"bg-red-600"}})},F=({products:t,dispatch:r,currentPage:l,searchTerm:n})=>e.jsxs("table",{className:"w-full text-sm text-left text-gray-500 dark:text-gray-400",children:[e.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"p-4",children:"Tên sản phẩm"}),e.jsx("th",{scope:"col",className:"p-4",children:"Danh mục"}),e.jsx("th",{scope:"col",className:"p-4",children:"Giá gốc"}),e.jsx("th",{scope:"col",className:"p-4",children:"Trạng thái"}),e.jsx("th",{scope:"col",className:"p-4",children:"Chức năng"})]})}),e.jsx("tbody",{children:t.map(s=>{var c;return e.jsxs("tr",{className:"border-b dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700",children:[e.jsx("th",{scope:"row",className:"px-4 py-3 font-medium text-gray-900 whitespace-nowrap dark:text-white",children:e.jsxs("div",{className:"flex items-center mr-3",children:[e.jsx("img",{src:s.image[0],className:"h-8 w-auto mr-3",alt:s.product_name}),e.jsx("span",{children:M(s.product_name,30)})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"bg-primary-100 text-primary-800 text-xs font-medium px-2 py-0.5 rounded dark:bg-primary-900 dark:text-primary-300",children:((c=s.product_type)==null?void 0:c.name)||"Chưa có loại"})}),e.jsx("td",{className:"px-4 py-3",children:new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(s.product_price)}),e.jsx("td",{className:"py-4 px-6 border-b border-grey-light",children:e.jsx("span",{className:`inline-flex items-center rounded-md px-2 py-1 text-xs font-medium ring-1 ring-current ${s.status==="active"?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:s.status==="active"?"Hiển thị":"Đã ẩn"})}),e.jsx("td",{className:"px-4 py-3 font-medium text-gray-900 whitespace-nowrap dark:text-white",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{type:"button",className:"flex items-center text-red-700 bg-red-200 hover:text-white border border-red-700 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 font-medium rounded-lg text-sm px-3 py-2 text-center dark:border-red-500 dark:text-red-500 dark:hover:text-white dark:hover:bg-red-600 dark:focus:ring-red-900",onClick:()=>R(s._id,r,l,n),children:"Xoá"}),e.jsx("button",{onClick:()=>_(s._id,r,l,n),className:"py-2 px-3 flex items-center text-sm font-medium text-center text-white bg-lime-600 rounded-lg hover:bg-lime-500 focus:ring-4 focus:outline-none focus:ring-primary-300 dark:bg-primary-600 dark:hover:bg-primary-700 dark:focus:ring-primary-800",children:"Khôi phục"})]})})]},s._id)})})]}),$=()=>{const t=N(),[r,l]=x.useState(""),n=h(a=>{var d;return((d=a.products.pagiDeletedList.pagination)==null?void 0:d.currentPage)||1}),s=h(a=>{var d;return((d=a.products.pagiDeletedList.pagination)==null?void 0:d.totalPages)||1}),c=h(a=>a.products.pagiDeletedList.products||[]);x.useEffect(()=>{t(m({page:n,search:r}))},[t,n,r]);const i=a=>{t(m({page:a,search:r}))},o=a=>{l(a)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex flex-col md:flex-row items-stretch md:items-center md:space-x-3 space-y-3 md:space-y-0 justify-between mx-4 py-4 border-t dark:border-gray-700",children:e.jsx(D,{onSearchChange:o})}),c.length===0&&r?e.jsx(C,{}):c.length===0?e.jsx(B,{}):e.jsx(F,{products:c,dispatch:t,currentPage:n,searchTerm:r}),e.jsx(v,{currentPage:n,totalPages:s,onPageChange:i})]})},q=()=>e.jsxs("div",{children:[e.jsx(S,{items:P.recycleBin}),e.jsx("div",{className:"mb-4 ml-4 col-span-full xl:mb-2",children:e.jsx("h1",{className:"text-xl font-semibold text-gray-900 sm:text-2xl dark:text-white",children:"Danh sách xóa mềm"})}),e.jsx("section",{className:"bg-gray-50 dark:bg-gray-900 p-3 sm:p-5 antialiased",children:e.jsx("div",{className:"mb-4 col-span-full xl:mb-2",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 relative shadow-md sm:rounded-lg overflow-hidden",children:[e.jsx(T,{}),e.jsx("div",{className:"overflow-x-auto",children:e.jsx($,{})})]})})})]});export{q as default};
