import{r as x,l as C,j as e,bR as p,bS as f,f as y,L as v,h as u}from"./index-B8WTsAS6.js";import{A as N}from"./index-Cc_yPv-2.js";import{E as _}from"./EditDocumentIcon-DuofBkHL.js";import{S as P}from"./sweetalert2.all-CanRnygg.js";import{w as S}from"./sweetalert2-react-content.es-_20BSG7l.js";import{D as k}from"./DeleteIcon-BukMQWWF.js";import{f as T,g as D,h as B,m as j}from"./chunk-GBNLLUVD-1t55ujfQ.js";import{b as L}from"./chunk-DBLREEYE-KYxkDfWC.js";import{S as R}from"./searchMessage-I2XlDOxB.js";import{t as E,a as M,b as A,c as I,d as F,e as H}from"./chunk-YRZGWF2W-CXxVUGNa.js";import{c as z}from"./chunk-4WFLSIHH-GgbuetXY.js";import{p as G}from"./chunk-MRXO6UUP-nmik_M5x.js";import{t as X}from"./chunk-3ZXLDIEA-b4fsncww.js";import{R as $,b as U}from"./ReusableBreadcrumb-D5trGug1.js";import"./chunk-TDOFO53L-BhVz0FjF.js";import"./chunk-N2KXC5ZE-mxrXGXiM.js";import"./tslib.es6-DUex0IDm.js";import"./useDialog-clsvYkd8.js";import"./useLabels-C5NmhLsG.js";import"./filterDOMProps-B3AneKiX.js";import"./useEffectEvent-Cg1JSw20.js";import"./clsx-B-dksMZM.js";import"./getChildNodes-Cw4ook6e.js";import"./VisuallyHidden-D5xcTfY7.js";import"./useFocusWithin-Cnv4cfRz.js";import"./focusSafely-7dc_zii7.js";import"./_class_private_field_set-DiTYLpP0.js";import"./FocusScope-DCO5JZf9.js";import"./useOverlayTriggerState-_gK5y_xw.js";import"./number-DfkVkf0F.js";import"./chunk-BZCSOIUI-ECjOxws-.js";import"./chunk-XHQUSKIE-BwnSvnTo.js";import"./features-animation-BrpZblPW.js";import"./chunk-6NL67ZRH-ST4yRtyp.js";import"./chunk-MNNRULGA-Ck-UmubQ.js";import"./chunk-CIZQCQPA-BQKhqm3c.js";import"./index-DiNnCp_7.js";import"./useFocusable-BgsBLUcz.js";import"./useFocus-CiKVCmpT.js";import"./chunk-KBN3H6OQ-BYj_qRg-.js";import"./chunk-CAFRINWI-BTDo8zfp.js";import"./useFormValidationState-Ds8IGnmn.js";import"./useFormReset-BlmLPiDA.js";import"./chunk-IXXDDLGU-D8Ib2K6T.js";import"./chunk-7F3ZLNJ6-B2JTPL8n.js";import"./index-xaiLQO7O.js";import"./useHover-BojuH7IM.js";const V=({onSearchChange:s})=>{const[a,c]=x.useState(""),r=C(),n=i=>{i.preventDefault(),r(p({page:1,search:a})),s(a)},m=i=>{const l=i.target.value;c(l)};return e.jsx("div",{className:"w-full md:w-1/2",children:e.jsxs("form",{className:"flex items-center",onSubmit:n,children:[e.jsx("label",{htmlFor:"simple-search",className:"sr-only",children:"Tìm kiếm"}),e.jsxs("div",{className:"relative w-full",children:[e.jsx("input",{id:"simple-search",type:"search",className:"w-full py-1 px-2 border text-black border-gray-300 rounded-md shadow-sm",placeholder:"Tìm kiếm",value:a,onChange:m}),e.jsx("button",{type:"submit",className:"absolute inset-y-0 right-0 flex items-center p-2 text-gray-700 bg-blue-500 border border-gray-300 rounded-r-md",children:e.jsx("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.795 13.408l5.204 5.204a1 1 0 01-1.414 1.414l-5.204-5.204a7.5 7.5 0 111.414-1.414zM8.5 14A5.5 5.5 0 103 8.5 5.506 5.506 0 008.5 14z"})})})]})]})})},g=S(P),q=(s,a,c,r)=>{g.fire({title:"Xóa danh mục?",text:"Bạn có chắc muốn xóa danh mục này không!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Có",cancelButtonText:"Hủy"}).then(async n=>{var m,i;if(n.isConfirmed)try{const l=await a(f(s));if(f.rejected.match(l)){const d=((m=l.payload)==null?void 0:m.msg)||"Đã xảy ra sự cố khi xóa danh mục.";b(d)}else{const d=((i=l.payload)==null?void 0:i.msg)||"Danh mục của bạn đã bị xóa.";J(d),a(p({page:c,search:r}))}}catch{b("Đã xảy ra sự cố khi xóa danh mục.")}})},J=s=>{g.fire({title:"Đã xóa!",text:s,icon:"success",customClass:{confirmButton:"bg-blue-500 md:bg-green-500"}})},b=s=>{g.fire({title:"Lỗi!",text:s,icon:"error",customClass:{confirmButton:"bg-red-600"}})};function K({categoryId:s,currentPage:a,searchTerm:c}){const r=y(),n="text-xl text-default-500 pointer-events-none flex-shrink-0";return e.jsxs(T,{children:[e.jsx(D,{children:e.jsx(L,{variant:"bordered",children:"Tùy chọn"})}),e.jsxs(B,{"aria-label":"Static Actions",children:[e.jsx(j,{startContent:e.jsx(_,{className:n}),children:e.jsx(v,{to:"#",children:"Sửa danh mục"})},"new"),e.jsx(j,{className:"text-danger",color:"danger",startContent:e.jsx(k,{className:n}),onClick:()=>q(s,r,a,c),children:"Xóa danh mục"},"delete")]})]})}const O=()=>{const s=y(),[a,c]=x.useState(""),r=u(t=>{var o;return((o=t.post.listCategoryPost.pagination)==null?void 0:o.currentPage)||1}),n=u(t=>{var o;return((o=t.post.listCategoryPost.pagination)==null?void 0:o.totalPages)||1}),m=u(t=>t.post.listCategoryPost.categories||[]);x.useEffect(()=>{s(p({page:r,search:a}))},[s,r,a]);const i=t=>{s(p({page:t,search:a}))},l=(t,o)=>{switch(o){case"image":return e.jsx("div",{className:"flex items-center",children:e.jsx("img",{src:t.image[0],className:"w-16 md:w-32 max-w-full max-h-full sm:w-24 sm:min-w-[96px] sm:min-h-[96px]",alt:t.name})});case"name":const h=t.name;return e.jsx(X,{content:h,delay:0,children:e.jsx("span",{children:h.length>20?`${h.substring(0,20)}...`:h})});case"status":return e.jsx(z,{color:t.status==="active"?"success":"danger",children:t.status==="active"?"Hiển thị":"Đã ẩn"});case"actions":return e.jsx(K,{categoryId:t._id,currentPage:r,searchTerm:a});default:return null}},d=[{uid:"image",name:"Hình ảnh"},{uid:"name",name:"Tên sản phẩm"},{uid:"status",name:"Trạng thái"},{uid:"actions",name:"Chức năng"}],w=t=>{c(t)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-stretch md:items-center md:space-x-3 space-y-3 md:space-y-0 justify-between mx-4 py-4 border-t dark:border-gray-700",children:[e.jsx(V,{onSearchChange:w}),e.jsx(N,{type:"addCategoryPost"})]}),m.length===0?e.jsx(R,{}):e.jsxs(E,{"aria-label":"Product Variants Table",className:"p-4",children:[e.jsx(M,{columns:d,children:t=>e.jsx(A,{align:t.uid==="actions"?"center":"start",children:t.name},t.uid)}),e.jsx(I,{items:m,children:t=>e.jsx(F,{children:o=>e.jsx(H,{children:l(t,o)})},t._id)})]}),e.jsx("div",{className:"flex justify-center my-4",children:e.jsx(G,{isCompact:!0,loop:!0,showControls:!0,color:"primary",total:n,initialPage:r,onChange:t=>i(t)})})]})},Q=()=>{const s=u(a=>a.post.listCategoryPost.total||[]);return e.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-3 md:space-y-0 md:space-x-4 p-4",children:e.jsxs("div",{className:"flex-1 flex items-center space-x-2",children:[e.jsxs("h5",{children:[e.jsx("span",{className:"text-gray-500",children:"Tổng có: "}),e.jsx("span",{className:"dark:text-white",children:s})]}),e.jsx("h5",{className:"text-gray-500 dark:text-gray-400 ml-1",children:"danh mục"})]})})},Ue=()=>e.jsxs("div",{children:[e.jsx($,{items:U.listproduct}),e.jsx("div",{className:"mb-4 ml-4 col-span-full xl:mb-2",children:e.jsx("h1",{className:"text-xl font-semibold text-gray-900 sm:text-2xl dark:text-white",children:"Danh sách danh mục bài viết"})}),e.jsx("section",{className:"bg-gray-50 dark:bg-gray-900 p-3 sm:p-5 antialiased",children:e.jsx("div",{className:"mb-4 col-span-full xl:mb-2",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 relative border shadow-md sm:rounded-lg overflow-hidden",children:[e.jsx(Q,{}),e.jsx("div",{className:"overflow-x-auto",children:e.jsx(O,{})})]})})})]});export{Ue as default};
