import{r as o,j as e,d4 as j,d5 as k,f as N,h as O,d6 as g,L as C,d7 as M,d8 as H}from"./index-B8WTsAS6.js";/* empty css                    *//* empty css                      */import{Q as L,B as l}from"./react-toastify.esm-BnAFxftJ.js";import{S}from"./sweetalert2.all-CanRnygg.js";import{P as A}from"./paginationcrud-CYiMZm9R.js";import{w as z}from"./sweetalert2-react-content.es-_20BSG7l.js";import{R as B,b as F}from"./ReusableBreadcrumb-D5trGug1.js";import{P as D}from"./ProductSummary-NkOstGUN.js";import"./clsx-B-dksMZM.js";const P=({onSearch:s})=>{const[r,i]=o.useState(""),a=n=>{n.preventDefault(),s(r)};return e.jsx("div",{className:"w-full md:w-1/2",children:e.jsxs("form",{className:"flex items-center",onSubmit:a,children:[e.jsx("label",{htmlFor:"simple-search",className:"sr-only",children:"Search"}),e.jsxs("div",{className:"relative w-full",children:[e.jsx("input",{id:"simple-search",type:"search",className:"w-full py-1 px-2 border border-gray-300 rounded-l-md shadow-sm h-10",placeholder:"Tìm kiếm sản phẩm",value:r,onChange:n=>i(n.target.value)}),e.jsx("button",{type:"submit",className:"absolute inset-y-0 right-0 flex items-center justify-center p-2 text-white bg-blue-500 border border-gray-300 rounded-r-md h-10",children:e.jsx("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.795 13.408l5.204 5.204a1 1 0 01-1.414 1.414l-5.204-5.204a7.5 7.5 0 111.414-1.414zM8.5 14A5.5 5.5 0 103 8.5 5.506 5.506 0 008.5 14z"})})})]})]})})},T=j("order/fetchOrderData",async({orderId:s},{rejectWithValue:r})=>{try{return(await k(s)).data}catch{return r("Failed to fetch order data")}}),V=z(S),E=()=>{const s=N(),{orders:r,totalPages:i}=O(t=>t.orderAucAdmin),[a,n]=o.useState(1),[c]=o.useState(5),[h,m]=o.useState(""),[,w]=o.useState([]);o.useEffect(()=>{s(g({page:a,pageSize:c,search:h}))},[s,a,c,h]);const p=t=>{n(t)},u=t=>{m(t),n(1)},v=async t=>{V.fire({title:"Hủy đơn hàng?",text:"Bạn có chắc muốn hủy đơn hàng này không?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Có",cancelButtonText:"Hủy"}).then(async d=>{if(d.isConfirmed)try{await s(T({orderId:t})).unwrap(),s(g({page:a,pageSize:c,search:h})),w(x=>x.filter(f=>f._id!==t)),l.success("Đơn hàng của bạn đã hủy.")}catch{l.error("Đã xảy ra sự cố khi hủy đơn hàng.")}})},y=async t=>{try{await M(t),l.success("Tải về thành công!")}catch(d){l.error("Failed to download the invoice."),console.error("Error downloading invoice:",d)}},b=async t=>{try{await H(t),l.success("Tải về thành công!")}catch(d){l.error("Failed to download the invoice."),console.error("Error downloading invoice:",d)}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex flex-col md:flex-row items-stretch md:items-center md:space-x-3 space-y-3 md:space-y-0 justify-between mx-4 py-4 border-t dark:border-gray-700",children:e.jsx(P,{onSearch:u})}),e.jsxs("table",{className:"w-full text-sm text-left text-gray-500 dark:text-gray-400",children:[e.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"p-4"}),e.jsx("th",{scope:"col",className:"p-4",children:"NGƯỜI DÙNG"}),e.jsx("th",{scope:"col",className:"text-center",children:"ĐỊA CHỈ"}),e.jsx("th",{scope:"col",className:"p-4",children:"SỐ ĐIỆN THOẠI"}),e.jsx("th",{scope:"col",className:"p-4",children:"TRẠNG THÁI"}),e.jsx("th",{scope:"col",className:"p-4",children:"CHỨC NĂNG"})]})}),e.jsx("tbody",{children:Array.isArray(r)&&r.length>0?r==null?void 0:r.map(t=>e.jsxs("tr",{className:"border-b dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"p-4"}),e.jsx("th",{scope:"row",className:"px-4 py-3 font-medium text-gray-900",children:t.shippingAddress.recipientName}),e.jsx("td",{className:"py-4 px-6 border-b border-grey-light",children:t.shippingAddress.address}),e.jsx("td",{className:"py-4 px-6 border-b border-grey-light",children:t.shippingAddress.phoneNumber}),e.jsx("td",{className:"py-4 px-6 border-b border-grey-light",children:e.jsxs("span",{className:`mt-1.5 inline-flex items-center rounded px-2.5 py-0.5 text-xs font-medium ${t.stateOrder==="Chờ giao hàng"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300":t.stateOrder==="Chờ xử lý"?"bg-violet-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300":t.stateOrder==="Đã xác nhận"?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300":t.stateOrder==="Vận chuyển"?"bg-indigo-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300":t.stateOrder==="Nhận hàng"?"bg-orange-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-300":t.stateOrder==="Hoàn tất"?"bg-green-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-300":t.stateOrder==="Hủy đơn hàng"?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300":"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300"}`,children:[t.stateOrder==="Chờ giao hàng"&&e.jsx("svg",{className:"me-1 h-3 w-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",children:e.jsx("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M18.5 4h-13m13 16h-13M8 20v-3.333a2 2 0 0 1 .4-1.2L10 12.6a1 1 0 0 0 0-1.2L8.4 8.533a2 2 0 0 1-.4-1.2V4h8v3.333a2 2 0 0 1-.4 1.2L13.957 11.4a1 1 0 0 0 0 1.2l1.643 2.867a2 2 0 0 1 .4 1.2V20H8Z"})}),t.stateOrder==="Chờ xử lý"&&e.jsx("svg",{className:"me-1 h-3 w-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",children:e.jsx("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M18.5 4h-13m13 16h-13M8 20v-3.333a2 2 0 0 1 .4-1.2L10 12.6a1 1 0 0 0 0-1.2L8.4 8.533a2 2 0 0 1-.4-1.2V4h8v3.333a2 2 0 0 1-.4 1.2L13.957 11.4a1 1 0 0 0 0 1.2l1.643 2.867a2 2 0 0 1 .4 1.2V20H8Z"})}),t.stateOrder==="Đã xác nhận"&&e.jsx("svg",{className:"me-1 h-3 w-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",children:e.jsx("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 11.917 9.724 16.5 19 7.5"})}),t.stateOrder==="Vận chuyển"&&e.jsx("svg",{className:"me-1 h-3 w-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",children:e.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 7h6l2 4m-8-4v8m0-8V6a1 1 0 0 0-1-1H4a1 1 0 0 0-1 1v9h2m8 0H9m4 0h2m4 0h2v-4m0 0h-5m3.5 5.5a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0Zm-10 0a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0Z"})}),t.stateOrder==="Nhận hàng"&&e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",className:"me-1 h-4 w-4",x:"0px",y:"0px",viewBox:"0 0 29 37.5",children:[e.jsx("g",{transform:"translate(-270 -380)",children:e.jsxs("g",{xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M281.5,382l-11.5,6.64v12l11,6.351l0.5,0.289l0.5-0.289l2.618-1.512c1.152,2.66,3.799,4.521,6.882,4.521    c4.143,0,7.5-3.357,7.5-7.5c0-3.629-2.576-6.654-6-7.35v-6.511L281.5,382z M281.5,383.154l10,5.774l-4.5,2.599l-10-5.774    L281.5,383.154z M281,405.836l-10-5.773v-10.269l10,5.774V405.836z M281.5,394.702l-10-5.773l4.5-2.599l10.001,5.773    L281.5,394.702z M282,405.836v-10.268l10-5.774v5.231c-0.166-0.011-0.331-0.025-0.5-0.025c-4.143,0-7.5,3.357-7.5,7.5    c0,0.7,0.104,1.375,0.283,2.018L282,405.836z M298,402.5c0,3.59-2.91,6.5-6.5,6.5s-6.5-2.91-6.5-6.5s2.91-6.5,6.5-6.5    S298,398.91,298,402.5z"}),e.jsx("polygon",{points:"287.965,402.146 287.258,402.854 290.086,405.682 295.742,400.025 295.035,399.318 290.086,404.268   "})]})}),e.jsx("text",{x:"0",y:"45",fill:"#000000","font-size":"5px","font-weight":"bold","font-family":"'Helvetica Neue', Helvetica, Arial-Unicode, Arial, Sans-serif"}),e.jsx("text",{x:"0",y:"50",fill:"#000000","font-size":"5px","font-weight":"bold","font-family":"'Helvetica Neue', Helvetica, Arial-Unicode, Arial, Sans-serif"})]}),t.stateOrder==="Hoàn tất"&&e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",className:"me-1 h-4 w-4",x:"0px",y:"0px",viewBox:"0 0 29 37.5",children:[e.jsx("g",{transform:"translate(-270 -380)",children:e.jsxs("g",{xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M281.5,382l-11.5,6.64v12l11,6.351l0.5,0.289l0.5-0.289l2.618-1.512c1.152,2.66,3.799,4.521,6.882,4.521    c4.143,0,7.5-3.357,7.5-7.5c0-3.629-2.576-6.654-6-7.35v-6.511L281.5,382z M281.5,383.154l10,5.774l-4.5,2.599l-10-5.774    L281.5,383.154z M281,405.836l-10-5.773v-10.269l10,5.774V405.836z M281.5,394.702l-10-5.773l4.5-2.599l10.001,5.773    L281.5,394.702z M282,405.836v-10.268l10-5.774v5.231c-0.166-0.011-0.331-0.025-0.5-0.025c-4.143,0-7.5,3.357-7.5,7.5    c0,0.7,0.104,1.375,0.283,2.018L282,405.836z M298,402.5c0,3.59-2.91,6.5-6.5,6.5s-6.5-2.91-6.5-6.5s2.91-6.5,6.5-6.5    S298,398.91,298,402.5z"}),e.jsx("polygon",{points:"287.965,402.146 287.258,402.854 290.086,405.682 295.742,400.025 295.035,399.318 290.086,404.268   "})]})}),e.jsx("text",{x:"0",y:"45",fill:"#000000","font-size":"5px","font-weight":"bold","font-family":"'Helvetica Neue', Helvetica, Arial-Unicode, Arial, Sans-serif"}),e.jsx("text",{x:"0",y:"50",fill:"#000000","font-size":"5px","font-weight":"bold","font-family":"'Helvetica Neue', Helvetica, Arial-Unicode, Arial, Sans-serif"})]}),t.stateOrder]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{className:`flex items-center border font-medium rounded-lg text-sm px-3 py-2 text-center ${t.stateOrder==="Chờ xử lý"?"text-yellow-700 bg-yellow-200 hover:text-white border-yellow-700 hover:bg-yellow-800 focus:ring-4 focus:outline-none focus:ring-yellow-300 dark:border-yellow-500 dark:text-yellow-500 dark:hover:text-white dark:hover:bg-yellow-600 dark:focus:ring-yellow-900":t.stateOrder==="Hủy đơn hàng"?"text-red-700 bg-red-200 hover:text-white border-red-700 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 dark:border-red-500 dark:text-red-500 dark:hover:text-white dark:hover:bg-red-600 dark:focus:ring-red-900":"text-gray-500 bg-gray-200 border-gray-500 cursor-not-allowed dark:text-gray-400 dark:bg-gray-700 dark:border-gray-600"}`,onClick:()=>{t.stateOrder==="Chờ xử lý"&&v(t._id)},disabled:!(t.stateOrder==="Chờ xử lý"||t.stateOrder==="Hủy đơn hàng"),children:t.stateOrder}),e.jsx(C,{to:`/admin/detailOrderAuction/${t._id}`,children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12c0 5 9 9 9 9s9-4 9-9-9-9-9-9-9 4-9 9z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9.75a2.25 2.25 0 100 4.5 2.25 2.25 0 000-4.5z"})]})}),t.stateOrder==="Hoàn tất"&&e.jsx("div",{onClick:()=>y(t._id),className:"flex items-center cursor-pointer",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 64 64",className:"mr-2",children:[e.jsx("rect",{width:"64",height:"64",rx:"8",fill:"#27AE60"}),e.jsx("path",{d:"M20 20H44V44H20z",fill:"#FFF"}),e.jsx("path",{d:"M24 24L40 40M40 24L24 40",stroke:"#27AE60",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"})]})}),t.stateOrder==="Vận chuyển"&&e.jsx("div",{onClick:()=>b(t._id),className:"flex items-center cursor-pointer",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 64 64",className:"mr-2",children:[e.jsx("rect",{width:"64",height:"64",rx:"8",fill:"#E74C3C"}),e.jsx("path",{d:"M32 12V52M22 22H42M22 32H42M22 42H32",stroke:"#FFF",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"})]})})]})})]},t._id)):e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center py-4",children:"No orders available."})})})]}),e.jsx(A,{currentPage:a,totalPages:i,onPageChange:p}),e.jsx(L,{})]})},J=()=>e.jsxs("div",{children:[e.jsx(B,{items:F.listOrderGeneral}),e.jsx("div",{className:"mb-4 ml-4 col-span-full xl:mb-2",children:e.jsx("h1",{className:"text-xl font-semibold text-gray-900 sm:text-2xl dark:text-white",children:"Danh sách đơn hàng đấu giá"})}),e.jsx("section",{className:"bg-gray-50 dark:bg-gray-900 p-3 sm:p-5 antialiased",children:e.jsx("div",{className:"mb-4 col-span-full xl:mb-2",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 relative shadow-md sm:rounded-lg overflow-hidden",children:[e.jsx(D,{}),e.jsx("div",{className:"overflow-x-auto",children:e.jsx(E,{})})]})})})]});export{J as default};
