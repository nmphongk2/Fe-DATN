import{z as W,r,f as $,h as J,g as K,c3 as X,j as e,c4 as Y}from"./index-B8WTsAS6.js";import{u as Z}from"./index.esm-CH-ucXk-.js";import{Q as ee}from"./react-toastify.esm-BnAFxftJ.js";/* empty css                      */import{n as ae,a as se}from"./msgtoast-BPgOMtRW.js";import{R as te,b as re}from"./ReusableBreadcrumb-D5trGug1.js";import{R as ne,S as le,O as ie,a as ce,C as oe,b as me,B as de,h as ge,c as he,d as xe,e as ue,f as pe,g as be,i as fe}from"./storage-UXuvrFtN.js";import{P as je}from"./product_description-BGirb00P.js";import{u as ve,a as ye,F as Se}from"./selectFetchData-DpwuxXlo.js";import"./clsx-B-dksMZM.js";import"./react-select.esm-CU0GCB-z.js";import"./assertThisInitialized-CUbX1Gq7.js";import"./hoist-non-react-statics.cjs-C4SqqP4T.js";import"./numericFormatWrapper-BQSre79J.js";import"./react-number-format.es-D6o-XRFQ.js";const Ne=()=>{var g,h,x,u,p,b,f,j;const{variantId:i}=W(),v=i??"",{register:c,setValue:t,handleSubmit:y,control:S,formState:{errors:s}}=Z({}),[o,d]=r.useState(!1),m=$(),n=J(a=>a.products.getOneProductVariant.variant),[N,C]=r.useState(null),[k,w]=r.useState(null),[_,P]=r.useState(null),[R,V]=r.useState(null),[B,T]=r.useState(null),[O,E]=r.useState(null),[F,G]=r.useState(null),I=a=>{ge(a,C,t)},q=a=>{he(a,w,t)},U=a=>{xe(a,P,t)},D=a=>{ue(a,V,t)},M=a=>{pe(a,T,t)},z=a=>{be(a,E,t)},A=a=>{fe(a,G,t)},H=K(),{discounts:L}=ve();r.useEffect(()=>{i&&m(X(i))},[m,i]);const Q=async a=>{d(!0);try{const l=await m(Y({variantId:v,updatedData:a})).unwrap();ae(l.msg),setTimeout(()=>{H("/admin/listproduct")},2e3)}catch(l){se(l.msg)}finally{d(!1)}};return r.useEffect(()=>{n&&(t("variant_name",n.variant_name),t("variant_description",n.variant_description),t("variant_original_price",n.variant_original_price),t("color",n.color))},[n,t]),e.jsxs("form",{onSubmit:y(Q),encType:"multipart/form-data",children:[e.jsx(ee,{}),e.jsx(te,{items:re.addVariant}),e.jsx("div",{className:"mb-4 ml-4 col-span-full xl:mb-2",children:e.jsx("h1",{className:"text-xl font-semibold text-gray-900 sm:text-2xl dark:text-white",children:"Thêm biến thể sản phẩm"})}),e.jsx("div",{className:"grid grid-cols-1 px-4 pt-4 xl:grid-cols-2 xl:gap-4 dark:bg-gray-900",children:e.jsx("div",{className:"col-span-full xl:col-auto",children:e.jsxs("div",{className:"p-4 mb-4 bg-white border border-gray-200 rounded-lg shadow-sm 2xl:col-span-2 dark:border-gray-700 sm:p-6 dark:bg-gray-800",children:[e.jsx("h3",{className:"mb-4 text-xl font-semibold dark:text-white",children:"Tổng quan sản phẩm"}),e.jsxs("div",{className:"grid grid-cols-6 gap-6",children:[e.jsxs("div",{className:"col-span-6 sm:col-span-3",children:[e.jsx("label",{htmlFor:"name",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Tên sản phẩm"}),e.jsx("input",{type:"text",id:"name",className:"shadow-sm bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-md  focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",placeholder:"Bonnie",...c("variant_name",{required:{value:!0,message:"Tên không được để trống"}})}),s.variant_name&&e.jsx("div",{className:"flex items-center mt-2 text-red-600",children:e.jsx("span",{className:"text-sm font-medium",children:s.variant_name.message})})]}),e.jsx(ye,{id:"variant_original_price",label:"Giá gốc",format:!0,suffix:" đ",register:c,control:S,error:s.variant_original_price,validation:{required:"Giá sản phẩm không được bỏ trống",min:{value:1e3,message:"Giá sản phẩm không thể thấp hơn 1000"},max:{value:2e9,message:"Giá sản phẩm không thể vượt quá 2000000000"},valueAsNumber:!0},onValueChange:a=>{const{floatValue:l}=a;t("variant_original_price",l??0)}}),e.jsxs("div",{className:"col-span-3 1sm:col-span-3",children:[e.jsx("label",{className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Dung lượng RAM"}),e.jsx(ne,{value:N,onChange:I}),s.ram&&e.jsx("span",{className:"text-red-600",children:(g=s.ram.message)==null?void 0:g.toString()})]}),e.jsxs("div",{className:"col-span-3 1sm:col-span-3",children:[e.jsx("label",{className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Ổ cứng"}),e.jsx(le,{value:F,onChange:A}),s.storage&&e.jsx("span",{className:"text-red-600",children:(h=s.storage.message)==null?void 0:h.toString()})]}),e.jsxs("div",{className:"col-span-3 1sm:col-span-3",children:[e.jsx("label",{className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Hệ điều hành"}),e.jsx(ie,{value:O,onChange:z}),s.operatingSystem&&e.jsx("span",{className:"text-red-600",children:(x=s.operatingSystem.message)==null?void 0:x.toString()})]}),e.jsxs("div",{className:"col-span-3 1sm:col-span-3",children:[e.jsx("label",{className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Màn hình"}),e.jsx(ce,{value:k,onChange:q}),s.screen&&e.jsx("span",{className:"text-red-600",children:(u=s.screen.message)==null?void 0:u.toString()})]}),e.jsxs("div",{className:"col-span-3 1sm:col-span-3",children:[e.jsx("label",{className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"CPU"}),e.jsx(oe,{value:_,onChange:U}),s.cpu&&e.jsx("span",{className:"text-red-600",children:(p=s.cpu.message)==null?void 0:p.toString()})]}),e.jsxs("div",{className:"col-span-3 1sm:col-span-3",children:[e.jsx("label",{className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Card Đồ Họa"}),e.jsx(me,{value:R,onChange:D}),s.graphicsCard&&e.jsx("span",{className:"text-red-600",children:(b=s.graphicsCard.message)==null?void 0:b.toString()})]}),e.jsxs("div",{className:"col-span-3 1sm:col-span-3",children:[e.jsx("label",{className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Pin"}),e.jsx(de,{value:B,onChange:M}),s.battery&&e.jsx("span",{className:"text-red-600",children:(f=s.battery.message)==null?void 0:f.toString()})]})]}),e.jsx(Se,{label:"Giảm giá",id:"product_discount",options:(L??[]).map(a=>({_id:a._id,name:a.discountPercent})),register:c,validation:{required:"Giảm giá là bắt buộc"},errorMessage:(j=s.product_discount)==null?void 0:j.message}),e.jsx(je,{register:c,errors:s}),e.jsx("div",{className:"col-span-6 sm:col-full",children:e.jsx("button",{type:"submit",className:`text-white bg-blue-600 hover:bg-primary-800 focus:ring-4 focus:ring-primary-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-primary-600 dark:hover:bg-primary-700 dark:focus:ring-primary-800 ${o?"opacity-50 cursor-not-allowed":""}`,disabled:o,children:o?e.jsxs("div",{className:"flex items-center",children:[e.jsxs("svg",{className:"animate-spin mr-2 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Đang thêm..."]}):"Thêm sản phẩm"})})]})})})]})},Ue=()=>e.jsx(Ne,{});export{Ue as default};
