import{f as h,h as p,r as m,cS as l,j as e,cT as g,cU as u}from"./index-B8WTsAS6.js";import{S as y}from"./sweetalert2.all-CanRnygg.js";import{w as f}from"./sweetalert2-react-content.es-_20BSG7l.js";import{R as b,b as j}from"./ReusableBreadcrumb-D5trGug1.js";import{P as N}from"./paginationcrud-CYiMZm9R.js";import{P as k}from"./ProductSummary-NkOstGUN.js";import{S as w}from"./searchFomProduct-CtepxUMW.js";import"./clsx-B-dksMZM.js";const c=f(y),v=t=>new Intl.NumberFormat("vi-VN",{style:"decimal",minimumFractionDigits:0,maximumFractionDigits:0}).format(t)+" vnđ",C=()=>{const t=h(),{deletedVoucher:i}=p(r=>r.voucher),[,n]=m.useState(i);m.useEffect(()=>{t(l())},[t]);const d=async r=>{c.fire({title:"Khôi phục mã giảm giá?",text:"Bạn có chắc muốn khôi phục dòng này không!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Có",cancelButtonText:"Hủy"}).then(async a=>{if(a.isConfirmed)try{await t(g(r)).unwrap(),t(l()),n(s=>s.filter(o=>o._id!==r)),c.fire({title:"Đã khôi phục!",text:"Mã giảm giá  đã  khôi phục.",icon:"success"})}catch(s){console.error("Error deleting product:",s),c.fire({title:"Lỗi!",text:"Đã xảy ra sự cố ",icon:"error"})}})},x=async r=>{c.fire({title:"Xóa mã giảm giá?",text:"Bạn có chắc muốn xóa dòng này không!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Có",cancelButtonText:"Hủy"}).then(async a=>{if(a.isConfirmed)try{await t(u(r)).unwrap(),t(l()),n(s=>s.filter(o=>o._id!==r)),c.fire({title:"Đã xóa!",text:"Mã giảm giá  đã  xóa.",icon:"success"})}catch(s){console.error("Error deleting product:",s),c.fire({title:"Lỗi!",text:"Đã xảy ra sự cố ",icon:"error"})}})};return e.jsxs("table",{className:"w-full text-sm text-left text-gray-500 dark:text-gray-400",children:[e.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"checkbox-all",type:"checkbox",className:"w-4 h-4 text-primary-600 bg-gray-100 rounded border-gray-300 focus:ring-primary-500 dark:focus:ring-primary-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),e.jsx("label",{htmlFor:"checkbox-all",className:"sr-only",children:"checkbox"})]})}),e.jsx("th",{scope:"col",className:"p-4",children:"MÃ GIẢM"}),e.jsx("th",{scope:"col",className:"p-4",children:"GIẢM GIÁ"}),e.jsx("th",{scope:"col",className:"p-4",children:"HẠN SỬ DỤNG"}),e.jsx("th",{scope:"col",className:"p-4",children:"DANH MỤC SẴN SÀNG"}),e.jsx("th",{scope:"col",className:"p-4",children:"MÔ TẢ"}),e.jsx("th",{scope:"col",className:"p-4",children:"TRẠNG THÁI"}),e.jsx("th",{scope:"col",className:"p-4",children:"CHỨC NĂNG"})]})}),e.jsx("tbody",{children:i.map(r=>{var a;return e.jsxs("tr",{className:"border-b dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"p-4 w-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"checkbox-table-search-1",type:"checkbox",className:"w-4 h-4 text-primary-600 bg-gray-100 rounded border-gray-300 focus:ring-primary-500 dark:focus:ring-primary-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),e.jsx("label",{htmlFor:"checkbox-table-search-1",className:"sr-only",children:"checkbox"})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"bg-primary-100 text-primary-800 text-xs font-medium px-2 py-0.5 rounded dark:bg-primary-900 dark:text-primary-300",children:r.code})}),e.jsx("td",{className:"px-4 py-3",children:v(r.voucherNum)}),e.jsx("td",{className:"px-4 py-3",children:r.expiryDate}),e.jsx("td",{className:"px-4 py-3",children:(a=r.cateReady)==null?void 0:a.map((s,o)=>e.jsx("div",{children:s.name},o))}),e.jsx("td",{className:"px-4 py-3",children:r.conditionActive}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"inline-flex items-center rounded-md bg-green-50 px-2 py-1 text-xs font-medium text-green-700 ring-1 ring-current",children:r.status==="active"?"Hiển thị":"Đã ẩn"})}),e.jsx("td",{className:"px-4 py-3 font-medium text-gray-900 whitespace-nowrap dark:text-white",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{className:"flex items-center text-red-700 bg-red-200 hover:text-white border border-red-700 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 font-medium rounded-lg text-sm px-3 py-2 text-center dark:border-red-500 dark:text-red-500 dark:hover:text-white dark:hover:bg-red-600 dark:focus:ring-red-900",onClick:()=>x(r._id),children:"Xoá"}),e.jsx("button",{className:"flex items-center text-red-700 bg-red-200 hover:text-white border border-red-700 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 font-medium rounded-lg text-sm px-3 py-2 text-center dark:border-red-500 dark:text-red-500 dark:hover:text-white dark:hover:bg-red-600 dark:focus:ring-red-900",onClick:()=>d(r._id),children:"Khôi phục"})]})})]},r._id)})})]})},H=()=>{const[t,i]=m.useState(1),n=d=>{i(d)};return e.jsxs("div",{children:[e.jsx(b,{items:j.recycleBinVoucher}),e.jsx("div",{className:"mb-4 ml-4 col-span-full xl:mb-2",children:e.jsx("h1",{className:"text-xl font-semibold text-gray-900 sm:text-2xl dark:text-white",children:"Danh sách xóa mềm"})}),e.jsx("section",{className:"bg-gray-50 dark:bg-gray-900 p-3 sm:p-5 antialiased",children:e.jsx("div",{className:"mb-4 col-span-full xl:mb-2",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 relative shadow-md sm:rounded-lg overflow-hidden",children:[e.jsx(k,{}),e.jsx("div",{className:"flex flex-col md:flex-row items-stretch md:items-center md:space-x-3 space-y-3 md:space-y-0 justify-between mx-4 py-4 border-t dark:border-gray-700",children:e.jsx(w,{})}),e.jsxs("div",{className:"overflow-x-auto",children:[e.jsx(C,{}),e.jsx(N,{currentPage:t,totalPages:5,onPageChange:n})]})]})})})]})};export{H as default};
