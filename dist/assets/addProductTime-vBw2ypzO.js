import{r as n,g as j,j as e,cE as u}from"./index-B8WTsAS6.js";import{u as v,C as g}from"./index.esm-CH-ucXk-.js";import{Q as N,B as d}from"./react-toastify.esm-BnAFxftJ.js";/* empty css                      */import{R as w,b as B}from"./ReusableBreadcrumb-D5trGug1.js";import"./clsx-B-dksMZM.js";const P=()=>{const{handleSubmit:p,control:c,watch:m,formState:{errors:t},setError:l,clearErrors:o}=v(),[h,x]=n.useState([]),[s,b]=n.useState(""),y=j(),i=m("endTime"),f=m("endTimeBid");n.useEffect(()=>{(async()=>{try{const a=await u.getProductBy();a.status===200?x(a.data):d.error("Lấy danh sách sản phẩm thất bại")}catch{d.error("Đã có lỗi xảy ra khi lấy sản phẩm")}})()},[]);const k=()=>{const r=new Date,a=new Date(i||"");return i!==f?(l("endTimeBid",{type:"manual",message:"Thời gian kết thúc và thời gian kết thúc dự phòng phải giống nhau"}),!1):(a.getTime()-r.getTime())/(1e3*3600*24)>30?(l("endTime",{type:"manual",message:"Thời gian kết thúc không được lớn hơn 30 ngày so với ngày hiện tại"}),!1):(o("endTime"),o("endTimeBid"),!0)},T=async r=>{if(k()){if(!s){d.error("Vui lòng chọn sản phẩm");return}await u.createTimeTrack(s,r),d.success("Thời gian cho sản phẩm đã được tạo thành công"),setTimeout(()=>{y("/admin/listProdAuc")},2e3)}};return e.jsxs("form",{onSubmit:p(T),encType:"multipart/form-data",children:[e.jsx(N,{}),e.jsx(w,{items:B.addProducTime}),e.jsx("div",{className:"mb-4 ml-4 col-span-full xl:mb-2",children:e.jsx("h1",{className:"text-xl font-semibold text-gray-900 sm:text-2xl dark:text-white",children:"Thêm thời gian đấu giá sản phẩm"})}),e.jsx("div",{className:"px-4 pt-4 xl:grid-cols-[1fr_2fr] xl:gap-4 dark:bg-gray-900",children:e.jsx("div",{className:"col-span-full xl:col-auto",children:e.jsxs("div",{className:"p-4 mb-4 bg-white border border-gray-200 rounded-lg shadow-sm 2xl:col-span-2 dark:border-gray-700 sm:p-6 dark:bg-gray-800",children:[e.jsx("h3",{className:"mb-4 text-xl font-semibold dark:text-white",children:"Tổng quan thêm mới"}),e.jsxs("div",{className:"grid grid-cols-6 gap-6",children:[e.jsxs("div",{className:"col-span-4 sm:col-span-3",children:[e.jsx("label",{htmlFor:"product_variant",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Tên sản phẩm"}),e.jsxs("select",{id:"product_variant",className:"bg-gray-50 border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",value:s,onChange:r=>b(r.target.value),children:[e.jsx("option",{value:"",children:"Chọn sản phẩm"}),h.length>0?h.map(r=>e.jsx("option",{value:r._id,children:r.product_name},r._id)):e.jsx("option",{disabled:!0,children:"Không có sản phẩm nào"})]}),!s&&e.jsx("span",{className:"text-red-500 text-xs italic",children:"Vui lòng chọn sản phẩm"})]}),e.jsxs("div",{className:"col-span-3 sm:col-span-6",children:[e.jsx("label",{htmlFor:"endTime",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Thời gian kết thúc"}),e.jsx(g,{name:"endTime",control:c,defaultValue:"",rules:{required:"Vui lòng nhập thời gian kết thúc"},render:({field:r})=>e.jsx("input",{className:"shadow-sm bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",id:"endTime",type:"datetime-local",...r})}),t.endTime&&e.jsx("span",{className:"text-red-500 text-xs italic",children:t.endTime.message})]}),e.jsxs("div",{className:`col-span-6 sm:col-span-6 ${i?"":"hidden"}`,children:[e.jsx("label",{htmlFor:"endTimeBid",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Thời gian kết thúc dự phòng"}),e.jsx(g,{name:"endTimeBid",control:c,defaultValue:"",rules:{required:"Vui lòng nhập thời gian dự phòng"},render:({field:r})=>e.jsx("input",{className:"shadow-sm bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",id:"endTimeBid",type:"datetime-local",...r,disabled:!i})}),t.endTimeBid&&e.jsx("span",{className:"text-red-500 text-xs italic",children:t.endTimeBid.message})]})]}),e.jsx("br",{}),e.jsx("div",{className:"col-span-6 sm:col-full",children:e.jsx("button",{type:"submit",className:"text-white bg-blue-600 hover:bg-primary-800 focus:ring-4 focus:ring-primary-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-primary-600 dark:hover:bg-primary-700 dark:focus:ring-primary-800",children:"Tạo ra sản phẩm"})})]})})})]})},q=()=>e.jsx(P,{});export{q as default};
