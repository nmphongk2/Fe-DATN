import{z as v,r as m,f as w,h as d,g as N,j as e,co as S,cp as k}from"./index-B8WTsAS6.js";import{u as E}from"./index.esm-CH-ucXk-.js";import{Q as T}from"./react-toastify.esm-BnAFxftJ.js";/* empty css                      */import{a as p,n as C}from"./msgtoast-BPgOMtRW.js";import{R as F,b as I}from"./ReusableBreadcrumb-D5trGug1.js";import{F as O,C as R}from"./ckeditor-BVdMjCjg.js";import"./clsx-B-dksMZM.js";import"./numericFormatWrapper-BQSre79J.js";import"./react-number-format.es-D6o-XRFQ.js";import"./ckeditor5-DyEy2vTb.js";const D=()=>{const{screenId:r}=v(),{register:u,handleSubmit:x,control:g,watch:f,setValue:n,formState:{errors:b}}=E(),[o,a]=m.useState(!1),c=w(),t=d(s=>s.attribute.getOneScreen.screen),h=d(s=>s.attribute.getOneScreen.status),l=d(s=>s.attribute.getOneScreen.error),y=N();console.log(t),m.useEffect(()=>{if(!r){a(!1);return}(async()=>{a(!0);try{await c(S(r)).unwrap()}catch{p(l instanceof Error?l.message:"Lỗi hệ thống")}finally{a(!1)}})()},[r,c,l]),m.useEffect(()=>{h==="succeeded"&&t&&(n("name",t.name),n("description",t.description))},[h,t,n]);const j=async s=>{a(!0);try{const i=await c(k({screenId:r,updates:s})).unwrap();C(i.msg),setTimeout(()=>{y("/admin/list-screen")},2e3)}catch(i){p(i.msg)}finally{a(!1)}};return e.jsxs("form",{onSubmit:x(j),encType:"multipart/form-data",children:[e.jsx(T,{}),e.jsx(F,{items:I.addVariant}),e.jsx("div",{className:"flex items-center px-4 py-2",children:e.jsxs("h1",{className:"text-xl font-semibold text-gray-900 sm:text-2xl dark:text-white",children:["Đang cập nhật màn hình "," ",e.jsx("span",{className:"text-blue-600",children:(t==null?void 0:t.name)||"Không có tên màn hình"})]})}),e.jsx("div",{className:"grid grid-cols-1 px-4 pt-4 xl:grid-cols-2 xl:gap-4 dark:bg-gray-900",children:e.jsx("div",{className:"col-span-full xl:col-auto",children:e.jsxs("div",{className:"p-4 mb-4 bg-white border border-gray-200 rounded-lg shadow-sm 2xl:col-span-2 dark:border-gray-700 sm:p-6 dark:bg-gray-800",children:[e.jsx("h3",{className:"mb-4 text-xl font-semibold dark:text-white",children:"Tổng quan bài viết"}),e.jsxs("div",{className:"grid grid-cols-6 gap-6",children:[e.jsx("div",{className:"col-span-6 sm:col-span-6",children:e.jsx(O,{id:"name",label:"Tên loại màn hình",placeholder:"Nhập loại màn hình",register:u,control:g,error:b.name,validation:{required:"Tên loại màn hình là bắt buộc"}})}),e.jsx("div",{className:"col-span-6 1sm:col-span-3 mb-4",children:e.jsx(R,{name:"description",value:f("description"),onChange:s=>n("description",s)})})]}),e.jsx("div",{className:"col-span-6 sm:col-full",children:e.jsx("button",{type:"submit",className:`text-white bg-blue-600 hover:bg-primary-800 focus:ring-4 focus:ring-primary-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-primary-600 dark:hover:bg-primary-700 dark:focus:ring-primary-800 ${o?"opacity-50 cursor-not-allowed":""}`,disabled:o,children:o?e.jsxs("div",{className:"flex items-center",children:[e.jsxs("svg",{className:"animate-spin mr-2 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Đang thêm..."]}):"Thêm sản phẩm"})})]})})})]})},A=()=>e.jsx(D,{});export{A as default};
